import{_ as V}from"./AppLayout.e446c98c.js";import{_ as F,u as f,N as U,o as c,e as p,a as l,w as i,b as t,t as s,C as R,g as u,j as T,F as x,i as b,c as O,s as w,X as k,r as n}from"./app.0fe294dc.js";import{s as P}from"./multiselect.0e5fdc61.js";import{_ as q}from"./Modal.48c9f882.js";/* empty css                */import"./TopBarMenu.658c6f16.js";import"./CheckCircleIcon.0b1b48c7.js";import"./shepherd.esm.1647f5c6.js";import"./XMarkIcon.b073216c.js";import"./WarningToast.9e91d17d.js";import"./NavLink.f87d79c3.js";import"./PlusCircleIcon.92b99d95.js";import"./UserIcon.56a47257.js";import"./Bars3Icon.8ccbdb06.js";const A={props:{attendances:Object,filter_data:Object,subjects:Array},components:{AppLayout:V,Multiselect:P,useForm:f,ExportModal:q,NothingFound:U},data(){var e,o,d;return{subject_data:[],filter:f({keyword:(e=this.filter_data.keyword)!=null?e:"",status:(o=this.filter_data.status)!=null?o:"",subject_id:(d=this.filter_data.subject_id)!=null?d:""}),loading:!1,visible:!1,exportData:{type:"xlsx",subject:""}}},methods:{getSubject(){var e=[];this.subjects.forEach(o=>{e.push({value:o.id,label:o.name})}),this.subject_data=e},filterData(){this.filter.get(this.route("my.attendance"))},showExportModal(e){this.exportData.subject=e,this.visible=!0},exportSubmit(e){this.loading=!0,axios({url:this.route("attendance.export"),method:"POST",data:this.exportData,responseType:"blob"}).then(o=>{let d=this.exportData.type;var h=window.URL.createObjectURL(new Blob([o.data])),a=document.createElement("a");a.href=h,a.setAttribute("download","attendance-report."+d),document.body.appendChild(a),a.click(),this.loading=!1,this.visible=!1}).catch(o=>{this.loading=!1,this.visible=!1})}},mounted(){this.getSubject()}},H={class:"dark:text-gray-400"},X={key:0,class:"ml-0.5 my-5"},z={class:"col-span-2"},G={class:"col-span-2"},I={class:"w-full"},J={class:"sm:px-6 lg:px-8"},K={class:"mt-8 flex flex-col"},Q={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},W={class:"inline-block min-w-full py-2 align-middle"},Y={class:"overflow-hidden w-full"},Z={class:"min-w-full bg-white dark:bg-gray-800 rounded-lg"},$={scope:"col",class:"py-4 px-5 whitespace-nowrap text-left rtl:text-right text-sm font-semibold text-gray-900 dark:text-gray-400 sm:pl-6"},tt={scope:"col",class:"py-4 px-5 whitespace-nowrap text-left rtl:text-right text-sm font-semibold text-gray-900 dark:text-gray-400"},et={scope:"col",class:"py-4 px-5 whitespace-nowrap text-left rtl:text-right text-sm font-semibold text-gray-900 dark:text-gray-400"},ot={scope:"col",class:"py-4 px-5 whitespace-nowrap text-left rtl:text-right text-sm font-semibold text-gray-900 dark:text-gray-400"},st={scope:"col",class:"py-4 px-5 whitespace-nowrap text-left rtl:text-right text-sm font-semibold text-gray-900 dark:text-gray-400"},at={scope:"col",class:"py-4 px-5 whitespace-nowrap text-left rtl:text-right text-sm font-semibold text-gray-900 dark:text-gray-400"},rt={class:"border-t border-gray-200"},lt={colspan:"5",scope:"colgroup",class:"bg-gray-50 dark:bg-gray-700 px-5 py-2 text-left text-sm font-semibold text-gray-900 dark:text-gray-400 sm:px-6"},it={colspan:"1",scope:"colgroup",class:"bg-gray-50 dark:bg-gray-700 px-5 py-2 text-right text-sm font-semibold text-gray-900 dark:text-gray-400 sm:px-6"},nt={class:"whitespace-nowrap py-4 px-5 text-sm font-medium text-gray-900 dark:text-gray-400"},dt={class:"whitespace-nowrap px-5 py-4 text-sm text-gray-500"},ct={class:"whitespace-nowrap px-5 py-4 text-sm text-gray-500"},pt={class:"whitespace-nowrap px-5 py-4 text-sm text-gray-500"},_t={colspan:"2",class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},ut={key:1},mt=t("tr",null,[t("td",{colspan:"10",class:"text-center p-4"},"No Attendance Found")],-1),gt=[mt],xt={class:"flex gap-6"},ht={class:"w-full rounded-lg cursor-pointer flex items-center pl-4 border border-gray-200 dark:border-gray-700"},yt={for:"pdf",class:"w-full cursor-pointer rounded-lg flex items-center pl-4 border border-gray-200 dark:border-gray-700"};function ft(e,o,d,h,a,g){const v=n("Head"),j=n("BreadcrumbLink"),D=n("Breadcrumb"),C=n("page-header"),L=n("Multiselect"),m=n("global-button"),S=n("NothingFound"),y=n("global-label"),E=n("export-modal"),B=n("AppLayout");return c(),p(x,null,[l(v,{title:e.__("Attendance List")},null,8,["title"]),l(B,null,{default:i(()=>[l(D,null,{default:i(()=>[l(j,{title:e.__("Attendance List")},null,8,["title"])]),_:1}),t("div",null,[l(C,null,{default:i(()=>[t("div",H,s(e.__("Attendance List")),1)]),_:1}),d.attendances.length>0?(c(),p("div",X,[t("form",{class:"grid grid-cols-1 md:grid-cols-7 gap-6 items-center",onSubmit:o[1]||(o[1]=R(r=>g.filterData(),["prevent"]))},[t("div",z,[l(L,{modelValue:a.filter.subject_id,"onUpdate:modelValue":o[0]||(o[0]=r=>a.filter.subject_id=r),"close-on-select":!0,searchable:!0,"create-option":!1,placeholder:e.__("Select Subject"),options:a.subject_data,autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),t("div",G,[l(m,{loading:a.filter.processing,type:"submit",theme:"primary"},{default:i(()=>[u(s(e.__("Search")),1)]),_:1},8,["loading"])])],32)])):T("",!0),t("div",I,[t("div",J,[t("div",K,[t("div",Q,[t("div",W,[t("div",Y,[t("table",Z,[t("thead",null,[t("tr",null,[t("th",$,s(e.__("Date")),1),t("th",tt,s(e.__("Teacher")),1),t("th",et,s(e.__("Total Class")),1),t("th",ot,s(e.__("Present Class")),1),t("th",st,s(e.__("Present Rate")),1),t("th",at,s(e.__("Export Sheet")),1)])]),d.attendances.length>0?(c(!0),p(x,{key:0},b(d.attendances,(r,M)=>(c(),p("tbody",{class:"bg-white dark:bg-gray-800",key:M},[t("tr",rt,[t("th",lt,s(r[0].subject.name),1),t("th",it,[l(m,{onClick:_=>g.showExportModal(r[0].subject),loading:!1,type:"button",theme:"primary"},{default:i(()=>[u(" Export ")]),_:2},1032,["onClick"])])]),r&&r.length?(c(!0),p(x,{key:0},b(r,(_,N)=>(c(),p("tr",{class:"border-t border-gray-300",key:N},[t("td",nt,s(_.date_time),1),t("td",dt,s(_.teacher.name),1),t("td",ct,s(_.total_class),1),t("td",pt,s(_.present_days),1),t("td",_t,s(_.present_percentage)+" %",1)]))),128)):(c(),p("div",ut,gt))]))),128)):(c(),O(S,{key:1,asShow:"tr"}))])])])])])])])]),l(E,{show:a.visible,onClose:e.closeModal},{title:i(()=>[u(s(e.__("Export Data")),1)]),content:i(()=>[t("div",xt,[t("div",ht,[w(t("input",{value:"xlsx",id:"excel","onUpdate:modelValue":o[2]||(o[2]=r=>a.exportData.type=r),type:"radio",name:"export_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:text-gray-400 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[k,a.exportData.type]]),l(y,{for:"excel",class:"py-3 ml-2 cursor-pointer w-full text-sm font-medium text-gray-900 dark:text-gray-400",value:"Excel",required:!1})]),t("label",yt,[w(t("input",{value:"pdf",id:"pdf","onUpdate:modelValue":o[3]||(o[3]=r=>a.exportData.type=r),type:"radio",name:"export_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[k,a.exportData.type]]),l(y,{for:"pdf",class:"py-3 ml-2 w-full text-sm font-medium cursor-pointer text-gray-900 dark:text-gray-400",value:"PDF",required:!1})])])]),footer:i(()=>[l(m,{onClick:o[4]||(o[4]=r=>g.exportSubmit()),loading:a.loading,type:"button",theme:"primary",class:"mr-2"},{default:i(()=>[u(s(e.__("Export")),1)]),_:1},8,["loading"]),l(m,{loading:!1,onClick:o[5]||(o[5]=r=>a.visible=!1),type:"button",theme:"outline-danger"},{default:i(()=>[u(s(e.__("Cancel")),1)]),_:1})]),_:1},8,["show","onClose"])]),_:1})],64)}const Ft=F(A,[["render",ft]]);export{Ft as default};
