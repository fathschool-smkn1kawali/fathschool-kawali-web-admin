import{_ as S}from"./AppLayout.e446c98c.js";import{s as C}from"./multiselect.0e5fdc61.js";import{_ as L,u as y,o as m,c as A,w as c,a as r,b as t,t as p,g as v,C as M,e as _,j as g,s as R,a3 as B,i as T,F as U,r as n}from"./app.0fe294dc.js";/* empty css                                                         */import"./TopBarMenu.658c6f16.js";import"./CheckCircleIcon.0b1b48c7.js";import"./shepherd.esm.1647f5c6.js";import"./XMarkIcon.b073216c.js";import"./WarningToast.9e91d17d.js";import"./NavLink.f87d79c3.js";import"./PlusCircleIcon.92b99d95.js";import"./UserIcon.56a47257.js";import"./Bars3Icon.8ccbdb06.js";const D={props:{types:Array,templates:Array,roles:Array,courses:Array,filter_data:Object,users:Array},components:{AppLayout:S,Multiselect:C,useForm:y},data(){var s,l,a,f,o,i;return{loading:!1,text:"Send SMS",form:y({type_id:(s=this.filter_data.type_id)!=null?s:"",role_id:(l=this.filter_data.role_id)!=null?l:"",user_id:(a=this.filter_data.user_id)!=null?a:"",message:(f=this.filter_data.message)!=null?f:"",course_id:(o=this.filter_data.course_id)!=null?o:"",individualRole_id:(i=this.filter_data.individualRole_id)!=null?i:""}),maxLength:320,uniqueKey:{name:"{name}",email:"{email}",phone:"{phone}"}}},watch:{"form.individualRole_id":function(s){s&&this.filterData()}},methods:{insertValue(s){this.form.message+=this.uniqueKey[s]},filterData(){this.form.get(this.route("sms.index"))},submit(){this.$inertia.post(this.route("sms.send"),this.form,{preserveScroll:!0,onSuccess:()=>{this.reset()},onFinish:s=>{this.loading=!1}})},reset(){this.form.type_id="",this.form.template_message="",this.form.role_id="",this.form.user_id="",this.form.message="",this.form.course_id="",this.form.individualRole_id=""}},computed:{remainingCharacters(){return this.maxLength-this.form.message.length}}},q={class:"mx-auto pb-12"},F={class:"rounded-lg flex justify-between items-center mb-4 py-4 px-6 text-lg font-semibold rtl:text-right text-left text-gray-900 bg-white dark:text-white dark:bg-gray-800"},N={class:"dark:text-gray-400"},j={class:"rounded-lg"},K={class:"grid sm:grid-cols-1 md:grid-cols-2 sm:gap-1 md:gap-4"},E={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},I={class:"mb-3"},O={class:"col-span-2"},z={class:"mb-3"},G={class:"col-span-2"},H={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},J={class:"mb-3"},P={key:0,class:"col-span-2"},Q={key:1,class:"col-span-2"},W={class:"grid sm:grid-cols-1 md:grid-cols-2 sm:gap-1 md:gap-4"},X={class:"col-span-1"},Y={class:"col-span-1"},Z={key:2,class:"col-span-2"},$={class:"mb-1"},ee=["placeholder"],oe={class:"text-right"},se=t("b",null,"Dynamic Tag :",-1),te=["onClick"];function le(s,l,a,f,o,i){const k=n("BreadcrumbLink"),x=n("Breadcrumb"),h=n("global-button"),V=n("Link"),d=n("global-label"),u=n("Multiselect"),w=n("AppLayout");return m(),A(w,{title:s.__(o.text)},{default:c(()=>[r(x,null,{default:c(()=>[r(k,{title:o.text},null,8,["title"])]),_:1}),t("div",q,[t("div",F,[t("div",N,p(s.__(o.text)),1),r(V,{"preserve-scroll":"",href:s.route("sms.template.index")},{default:c(()=>[r(h,{loading:!1,type:"button",theme:"primary"},{default:c(()=>[v(p(s.__("Message Template")),1)]),_:1})]),_:1},8,["href"])]),t("div",j,[t("form",{onSubmit:l[7]||(l[7]=M((...e)=>i.submit&&i.submit(...e),["prevent"]))},[t("div",K,[t("div",E,[t("div",I,[t("div",O,[r(d,{for:"class",value:"Type"}),r(u,{id:"class",class:"dark:text-gray-900",modelValue:o.form.type_id,"onUpdate:modelValue":l[0]||(l[0]=e=>o.form.type_id=e),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:s.__("Select Type"),options:a.types.map(e=>({value:e.id,label:e.type})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])])]),t("div",z,[t("div",G,[r(d,{for:"class",value:"Template"}),r(u,{id:"class",class:"dark:text-gray-900",modelValue:o.form.message,"onUpdate:modelValue":l[1]||(l[1]=e=>o.form.message=e),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:s.__("Select A Template"),options:a.templates.map(e=>({value:e.message,label:e.title})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])])])]),t("div",H,[t("div",J,[o.form.type_id==2?(m(),_("div",P,[r(d,{for:"role",value:"Role"}),r(u,{id:"role",class:"dark:text-gray-900",modelValue:o.form.role_id,"onUpdate:modelValue":l[2]||(l[2]=e=>o.form.role_id=e),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:s.__("Select Course"),options:a.roles.map(e=>({value:e.name,label:e.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])])):g("",!0),o.form.type_id==3?(m(),_("div",Q,[t("div",W,[t("div",X,[r(d,{for:"role",value:"Role"}),r(u,{id:"role",class:"dark:text-gray-900",modelValue:o.form.individualRole_id,"onUpdate:modelValue":l[3]||(l[3]=e=>o.form.individualRole_id=e),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:s.__("Select Course"),options:a.roles.map(e=>({value:e.name,label:e.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),t("div",Y,[r(d,{for:"users",value:"Send to"}),r(u,{id:"users",class:"dark:text-gray-900",modelValue:o.form.user_id,"onUpdate:modelValue":l[4]||(l[4]=e=>o.form.user_id=e),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:s.__("Select User"),options:o.form.individualRole_id==="Student"?a.users.map(e=>({value:e.user_id,label:e.student_id})):a.users.map(e=>({value:e.id,label:e.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])])])])):g("",!0),o.form.type_id==4?(m(),_("div",Z,[r(d,{for:"Course",value:"Course"}),r(u,{id:"Course",class:"dark:text-gray-900",modelValue:o.form.course_id,"onUpdate:modelValue":l[5]||(l[5]=e=>o.form.course_id=e),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:s.__("Select Course"),options:a.courses.map(e=>({value:e.id,label:e.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])])):g("",!0)]),t("div",$,[r(d,{for:"message",value:"Message",required:!1}),R(t("textarea",{rows:"4","onUpdate:modelValue":l[6]||(l[6]=e=>o.form.message=e),name:"",placeholder:s.__("Message"),id:"description",maxlength:"320",class:"pl-4 bg-gray-50 border rounded-lg border-gray-300 text-gray-900 text-sm focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},`\r
                                `,8,ee),[[B,o.form.message]]),t("p",oe,p(i.remainingCharacters)+" characters remaining",1),se,(m(!0),_(U,null,T(o.uniqueKey,(e,b)=>(m(),_("button",{key:b,type:"button",class:"bg-transparent border border-gray-700 text-gray-700 dark:border-gray-300 dark:text-gray-300 mx-1 px-2 py-1 rounded-lg",onClick:re=>i.insertValue(b)},p(e),9,te))),128))])])]),r(h,{loading:o.form.processing,type:"submit",cssClass:"w-full mt-3",theme:"primary"},{default:c(()=>[v(p(s.__("Send")),1)]),_:1},8,["loading"])],32)])])]),_:1},8,["title"])}const ye=L(D,[["render",le]]);export{ye as default};
