import{_ as F}from"./AppLayout.e446c98c.js";import{P as T}from"./Pagination.285ecdee.js";import{_ as O,I as b,o as n,e as d,a as o,w as u,b as e,g as y,t as a,C as z,F as m,i as k,s as P,a3 as U,n as X,r as i,j as f,V as H,W as E}from"./app.0fe294dc.js";import{s as G}from"./multiselect.0e5fdc61.js";/* empty css                */import{r as W}from"./CheckIcon.cd10278d.js";import{r as q}from"./XMarkIcon.b073216c.js";import{r as J}from"./ClockIcon.fa958b72.js";import{r as K}from"./MagnifyingGlassIcon.f5dd672f.js";import"./TopBarMenu.658c6f16.js";import"./CheckCircleIcon.0b1b48c7.js";import"./shepherd.esm.1647f5c6.js";import"./WarningToast.9e91d17d.js";import"./NavLink.f87d79c3.js";import"./PlusCircleIcon.92b99d95.js";import"./UserIcon.56a47257.js";import"./Bars3Icon.8ccbdb06.js";const Q={props:{errors:Object,students:Object,subjects:Object,filter_data:Object},components:{AppLayout:F,Pagination:T,CheckIcon:W,XMarkIcon:q,ClockIcon:J,Multiselect:G,MagnifyingGlassIcon:K},data(){var t;return{visible:!1,loading:!1,date_value:this.filter_data.date?b(this.filter_data.date):"",customDateFormat:"YYYY-MM-DD",form:{student:"",status:"",late_amount:"",subject:"",date:this.filter_data.date?this.filter_data.date:""},filter:{subject:this.filter_data.subject?this.filter_data.subject:(t=this.subjects[0])==null?void 0:t.id,date:this.filter_data.date?this.filter_data.date:""}}},watch:{"filter.subject":function(t,r){b(this.filter.date).isValid()&&t!==r&&this.filterData()}},methods:{filterData(){this.loading=!0,this.$inertia.get(this.route("student.attendance.index"),this.filter,{preserveScroll:!0,onFinish:t=>{this.loading=!1}})},submit(t,r){this.form.student=t,this.form.status=r,r!="late"&&this.save(),r=="late"&&(this.visible=!0)},save(){this.form.subject=this.filter.subject,this.form.date=this.filter_data.date,this.$inertia.post(this.route("student.attendance.store"),this.form,{preserveScroll:!0,onSuccess:t=>{this.visible=!1}})},getDateTimeFormat(){if(!isNaN(this.date_value)){const t=b(this.date_value).format("YYYY-MM-DD");this.filter.date=t}}}},R=t=>(H("data-v-a398fd61"),t=t(),E(),t),Z={class:"my-6"},$={class:"col-span-2"},ee={class:"col-span-2"},te={class:"col-span-1 text-right"},se={key:0,class:"w-full mt-4"},re={class:"py-4 px-5 whitespace-nowrap"},ae={class:"py-4 px-5 whitespace-nowrap"},oe={style:{width:"35%"},class:"py-4 px-5 whitespace-nowrap"},ie={class:"py-4 px-5 whitespace-nowrap"},le={class:"py-4 px-5 text-black dark:text-gray-400 whitespace-nowrap"},ne={class:"inline-flex gap-2 items-center text-sm text-gray-900 dark:text-gray-400 font-medium"},de=["src","alt"],ce={class:"flex flex-col"},_e={class:"font-medium"},ue={class:"py-4 px-5 text-black dark:text-gray-400 whitespace-nowrap"},pe={class:"py-4 px-5 text-black dark:text-gray-400 whitespace-nowrap"},me={class:"flex gap-2"},fe={key:0},be={key:0,class:"flex items-center gap-1 text-center"},ge={class:"text-green-500 capitalize"},he={key:1,class:"flex gap-1 items-center text-center"},ye={class:"text-red-500 capitalize"},ke={key:2,class:"flex gap-1 items-center text-center"},ve={class:"flex gap-1 items-center"},xe={class:"text-purple-500 capitalize"},we={class:"py-4 px-5 whitespace-nowrap"},je={class:"flex gap-1 text-center whitespace-nowrap w-full"},Ce=["onClick"],Me=["id"],Ie=["for"],De=["onClick"],Le=["id"],Se=["for"],Ve=["onClick"],Ae=["id"],Ne=["for"],Ye={key:1},Be={colspan:"4",class:"text-center p-4"},Fe={class:"flex justify-center col-span-3"},Te={key:1,class:"w-full mt-8 text-center text-lg pt-8"},Oe={action:""},ze={class:"mb-1 ml-4 mr-4"},Pe={for:"late_minutes",class:"block mb-2 items-center text-sm font-medium text-gray-900 dark:text-gray-400"},Ue=R(()=>e("span",{class:"text-red-500 ml-1 text-md"},"\u2217",-1)),Xe=["placeholder"];function He(t,r,p,Ee,c,_){const v=i("Head"),x=i("BreadcrumbLink"),w=i("Breadcrumb"),j=i("page-header"),C=i("Multiselect"),M=i("a-date-picker"),I=i("global-button"),D=i("CheckIcon"),L=i("XMarkIcon"),S=i("ClockIcon"),V=i("global-table"),A=i("pagination"),N=i("input-error"),Y=i("a-modal"),B=i("AppLayout");return n(),d(m,null,[o(v,{title:t.__("Attendance List")},null,8,["title"]),o(B,null,{default:u(()=>[o(w,null,{default:u(()=>[o(x,{title:t.__("Attendance List")},null,8,["title"])]),_:1}),e("div",Z,[o(j,null,{default:u(()=>[y(a(t.__("Attendance List")),1)]),_:1}),e("form",{onSubmit:r[2]||(r[2]=z((...s)=>_.filterData&&_.filterData(...s),["prevent"])),class:"items-center grid grid-cols-1 md:grid-cols-7 gap-4 mt-4"},[e("div",$,[o(C,{id:"subject","close-on-select":!0,"can-clear":!1,searchable:!0,modelValue:c.filter.subject,"onUpdate:modelValue":r[0]||(r[0]=s=>c.filter.subject=s),"create-option":!1,placeholder:t.__("Select Subject"),options:p.subjects.map(s=>({value:s.id,label:s.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),e("div",ee,[o(M,{name:"date",class:"ant-datepicker-custom dark:bg-gray-700 dark:border-gray-700 dark:text-gray-400",format:_.getDateTimeFormat(),value:c.date_value,"onUpdate:value":r[1]||(r[1]=s=>c.date_value=s)},null,8,["format","value"])]),e("div",te,[o(I,{loading:c.loading,type:"submit",theme:"primary"},{default:u(()=>[y(a(t.__("Search")),1)]),_:1},8,["loading"])])],32),p.filter_data!=""?(n(),d("div",se,[o(V,null,{head:u(()=>[e("th",re,a(t.__("Student Name")),1),e("th",ae,a(t.__("Student ID")),1),e("th",oe,a(t.__("Status")),1),e("th",ie,a(t.__("Today action")),1)]),body:u(()=>[p.students.data.length>0?(n(!0),d(m,{key:0},k(p.students.data,s=>{var g,h;return n(),d("tr",{class:"rounded-lg border-b dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600",key:s.id},[e("td",le,[e("span",ne,[e("img",{class:"w-10 h-10 rounded-full",src:s.profile_photo_url,alt:s.name},null,8,de),e("div",ce,[e("span",_e,a(s.name),1),e("span",null,a(s.email),1)])])]),e("td",ue,a((h=(g=s==null?void 0:s.profile)==null?void 0:g.student_id)!=null?h:""),1),e("td",pe,[e("div",me,[(n(!0),d(m,null,k(s.attendances,l=>(n(),d(m,{key:l.id},[c.filter.subject==l.subject_id?(n(),d("div",fe,[l.status=="present"?(n(),d("div",be,[o(D,{class:"text-green-500 w-4 h-4"}),e("span",ge,a(l.status),1)])):f("",!0),l.status=="absent"?(n(),d("div",he,[o(L,{class:"text-red-500 w-4 h-4"}),e("span",ye,a(l.status),1)])):f("",!0),l.status=="late"?(n(),d("div",ke,[e("div",ve,[e("div",null,[o(S,{class:"text-purple-500 w-6 h-6"})]),e("span",xe,a(l.late_amount)+" "+a(l.late_amount>1?t.__("Minutes Late"):t.__("Minute Late")),1)])])):f("",!0)])):f("",!0)],64))),128))])]),e("td",we,[e("div",je,[e("div",{class:"flex w-28 items-center cursor-pointer pl-4 rounded border border-gray-300 dark:border-gray-700",onClick:l=>_.submit(s.id,"present")},[e("input",{id:"present"+s.id,type:"radio",value:"",name:"bordered-radio",class:"text-blue-600 inline-block bg-gray-100 border-gray-300 focus:ring-blue-500 cursor-pointer dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,Me),e("label",{for:"present"+s.id,class:"py-2 ml-2 whitespace-nowrap cursor-pointer mr-2 w-full text-sm font-medium text-gray-900 dark:text-gray-400"},a(t.__("Present")),9,Ie)],8,Ce),e("div",{class:"flex w-28 items-center cursor-pointer pl-4 rounded border border-gray-300 dark:border-gray-700",onClick:l=>_.submit(s.id,"absent")},[e("input",{id:"absent"+s.id,type:"radio",value:"",name:"bordered-radio",class:"text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 cursor-pointer dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,Le),e("label",{for:"absent"+s.id,class:"py-2 ml-2 mr-2 cursor-pointer w-full text-sm font-medium text-gray-900 dark:text-gray-400"},a(t.__("Absent")),9,Se)],8,De),e("div",{class:"flex w-28 items-center cursor-pointer pl-4 rounded border border-gray-300 dark:border-gray-700",onClick:l=>_.submit(s.id,"late")},[e("input",{id:"late"+s.id,type:"radio",value:"",name:"bordered-radio",class:"text-blue-600 cursor-pointer bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,Ae),e("label",{for:"late"+s.id,class:"py-2 ml-2 mr-2 cursor-pointer w-full text-sm font-medium text-gray-900 dark:text-gray-400"},a(t.__("Late")),9,Ne)],8,Ve)])])])}),128)):(n(),d("tr",Ye,[e("td",Be,a(t.__("No Students")),1)]))]),_:1}),e("div",Fe,[o(A,{class:"mt-6",links:p.students.links},null,8,["links"])])])):(n(),d("div",Te," Please select the subject and date to take attendance. "))]),o(Y,{visible:c.visible,"onUpdate:visible":r[4]||(r[4]=s=>c.visible=s),title:t.__("Late Time"),onOk:r[5]||(r[5]=s=>_.save())},{default:u(()=>[e("form",Oe,[e("div",ze,[e("label",Pe,[e("span",null,a(t.__("Late Minutes")),1),Ue]),P(e("input",{type:"number",class:X([p.errors.title?"border-red-500 dark:border-red-500":"","pl-4 bg-gray-50 rounded-lg border border-gray-300 text-gray-900 text-sm focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:border-gray-600 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500"]),id:"late_minutes","onUpdate:modelValue":r[3]||(r[3]=s=>c.form.late_minutes=s),name:"late_minutes",placeholder:t.__("Late Minutes")},null,10,Xe),[[U,c.form.late_minutes]]),o(N,{error:t.$page.props.errors.title},null,8,["error"])])])]),_:1},8,["visible","title"])]),_:1})],64)}const nt=O(Q,[["render",He],["__scopeId","data-v-a398fd61"]]);export{nt as default};
