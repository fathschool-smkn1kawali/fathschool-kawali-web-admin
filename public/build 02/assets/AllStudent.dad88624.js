import{_ as G}from"./AppLayout.e446c98c.js";import{T as q}from"./ToolTip.ecacd31e.js";import{P as H}from"./Pagination.285ecdee.js";import{T as R}from"./TdUserShow.1f7e21d9.js";import{_ as z,N as K,u as J,o as u,c as Q,w as n,g as d,t as i,a as t,b as l,C as W,e as _,i as v,F as f,r,j as X}from"./app.0fe294dc.js";import{_ as Y}from"./Modal.48c9f882.js";import{s as Z}from"./multiselect.0e5fdc61.js";/* empty css                */import{r as $}from"./PencilSquareIcon.78c3e2b0.js";import{r as ee}from"./TrashIcon.fe35b37b.js";import{r as te}from"./EyeIcon.5183fbb5.js";import{r as oe}from"./MagnifyingGlassIcon.f5dd672f.js";import"./TopBarMenu.658c6f16.js";import"./CheckCircleIcon.0b1b48c7.js";import"./shepherd.esm.1647f5c6.js";import"./XMarkIcon.b073216c.js";import"./WarningToast.9e91d17d.js";import"./NavLink.f87d79c3.js";import"./PlusCircleIcon.92b99d95.js";import"./UserIcon.56a47257.js";import"./Bars3Icon.8ccbdb06.js";const se={components:{AppLayout:G,ToolTip:q,Multiselect:Z,TdUserShow:R,PencilSquareIcon:$,TrashIcon:ee,Pagination:H,EyeIcon:te,MagnifyingGlassIcon:oe,NothingFound:K,ExportModal:Y},props:{users:Object,filter_data:Object,classes:Object},data(){var e,o;return{loading:!1,options:[],options2:[],export_options:[],visible:!1,export_visible:!1,show_user:"",filter:{keyword:(e=this.filter_data.keyword)!=null?e:null,course:(o=this.filter_data.course)!=null?o:null},export_data:J({type:"Excel",course:"all"})}},created(){this.export_options.push({value:"all",label:"All"});for(const[e,o]of Object.entries(this.classes))this.export_options.push({value:o.id,label:o.name});this.options.push({value:"",label:"All"});for(const[e,o]of Object.entries(this.classes))this.options.push({value:o.slug,label:o.name})},methods:{accountHold(e,o){let p=e.target.checked;this.$inertia.post(this.route("user.account.hold",o),{status:p},{preserveScroll:!0})},destroy(e){if(confirm("Are you sure ?"))this.$inertia.delete(this.route("users.destroy",e));else return!1},show(e){this.show_user=e,this.visible=!0},hide(e){this.visible=!1},exportStudent(){this.export_visible=!0},filterData(){this.loading=!0,this.$inertia.get(this.route("student.admission.all"),this.filter,{preserveScroll:!0,onFinish:e=>{this.loading=!1}})},filterOption(e,o){return o.label.toLowerCase().indexOf(e.toLowerCase())>=0},sendMail(e){this.$inertia.post(this.route("student.send.mail"),{user:e})},exportSubmit(){this.loading=!0,axios({url:this.route("student.export"),method:"POST",data:this.export_data,responseType:"blob"}).then(e=>{this.export_data.type;var o=window.URL.createObjectURL(new Blob([e.data])),p=document.createElement("a");p.href=o,p.setAttribute("download","student-report.xlsx"),document.body.appendChild(p),p.click(),this.loading=!1,this.visible=!1}).catch(e=>{this.loading=!1,this.visible=!1})}}},le={class:"flex flex-col sm:flex-row gap-4"},re={class:"mb-4"},ne={class:"flex col-span-2"},ie={class:"relative w-full"},ae={type:"submit",class:"absolute top-1 right-0 p-2.5 text-sm font-medium text-white bg-blue-700 rounded-r-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},de={class:"sr-only"},ce={class:"col-span-2"},ue={class:"col-span-1"},pe={class:"py-4 px-5"},_e={class:"py-4 px-5"},he={class:"py-4 px-5"},me={class:"py-4 px-5"},fe={width:"10%",class:"py-4 px-5"},be={scope:"row",class:"flex items-center py-4 px-5 text-gray-900 whitespace-nowrap dark:text-white"},ge={class:"py-4 px-5"},ve={class:"py-4 px-5"},ke={key:0,class:"flex flex-wrap items-center gap-0.5"},ye={class:"py-4 px-5"},we={class:"relative inline-flex items-center cursor-pointer"},xe=["onChange","checked"],Ce=l("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1),Se={class:"py-4 px-5"},Ae={class:"flex gap-2"},Le=["onClick"],Be=["onClick","id"],Me={key:1},Oe={colspan:"4",class:"text-center p-4"},Ee={class:"flex justify-center"},Ne={class:"col-span-2"};function Ve(e,o,p,Fe,a,h){const k=r("BreadcrumbLink"),y=r("Breadcrumb"),m=r("global-button"),w=r("page-header"),x=r("global-input"),C=r("MagnifyingGlassIcon"),S=r("a-select"),A=r("td-user-show"),g=r("Link"),L=r("envelope"),b=r("tool-tip"),B=r("EyeIcon"),M=r("PencilSquareIcon"),O=r("trash-icon"),E=r("NothingFound"),N=r("global-table"),V=r("pagination"),F=r("a-button"),I=r("show-modal"),T=r("a-modal"),j=r("Multiselect"),U=r("export-modal"),P=r("AppLayout");return u(),Q(P,{title:e.__("Student Admission")},{header:n(()=>[d(i(e.__("Student Admission")),1)]),default:n(()=>[t(y,null,{default:n(()=>[t(k,{title:e.__("All Student"),href:e.route("student.admission.all")},null,8,["title","href"])]),_:1}),l("div",null,[t(w,{class:"flex-col sm:flex-row"},{content:n(()=>[l("div",le,[t(m,{loading:!1,onClick:o[0]||(o[0]=s=>h.exportStudent()),type:"button",theme:"sky"},{default:n(()=>[d(i(e.__("Export")),1)]),_:1}),t(m,{"preserve-scroll":"",loading:!1,url:e.route("student.bulk.admission"),type:"link",theme:"secondary"},{default:n(()=>[d(i(e.__("Bulk Admission")),1)]),_:1},8,["url"]),t(m,{loading:!1,"preserve-scroll":"",type:"link",url:e.route("student.admission.create"),theme:"primary"},{default:n(()=>[d(i(e.__("New Admission")),1)]),_:1},8,["url"])])]),default:n(()=>[d(i(e.__("All Student"))+" ",1)]),_:1}),l("div",re,[l("form",{class:"items-center grid grid-cols-1 md:grid-cols-7 gap-6",onSubmit:o[3]||(o[3]=W(s=>h.filterData(),["prevent"]))},[l("div",ne,[l("div",ie,[t(x,{type:"search",modelValue:a.filter.keyword,"onUpdate:modelValue":o[1]||(o[1]=s=>a.filter.keyword=s),class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Keyword")},null,8,["modelValue","placeholder"]),l("button",ae,[t(C,{class:"w-5 h-5"}),l("span",de,i(e.__("Search")),1)])])]),l("div",ce,[t(S,{class:"width-100",size:"large",value:a.filter.course,"onUpdate:value":o[2]||(o[2]=s=>a.filter.course=s),"show-search":"",placeholder:e.__("Select a course"),options:a.options,"filter-option":h.filterOption,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleChange},null,8,["value","placeholder","options","filter-option","onFocus","onBlur","onChange"])]),l("div",ue,[t(m,{loading:a.loading,type:"submit",theme:"primary"},{default:n(()=>[d(i(e.__("Search")),1)]),_:1},8,["loading"])])],32)]),t(N,null,{head:n(()=>[l("th",pe,i(e.__("Name")),1),l("th",_e,i(e.__("Guardian Name")),1),l("th",he,i(e.__("Course")),1),l("th",me,i(e.__("Account Hold")),1),l("th",fe,i(e.__("Action")),1)]),body:n(()=>[p.users.data.length>0?(u(!0),_(f,{key:0},v(p.users.data,s=>(u(),_("tr",{key:s.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[l("td",be,[t(A,{image:s.profile_photo_url,name:s.name,email:s.email},null,8,["image","name","email"])]),l("td",ge,[(u(!0),_(f,null,v(s.parents,c=>(u(),_("div",{key:c,class:"flex"},[t(g,{href:e.route("parent.show",c.id),class:"bg-blue-100 text-blue-800 whitespace-nowrap text-xs font-bold mr-2 px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300 mb-1"},{default:n(()=>[d(i(c?c.name:""),1)]),_:2},1032,["href"])]))),128))]),l("td",ve,[s.courses.length>0?(u(),_("div",ke,[(u(!0),_(f,null,v(s.courses,(c,D)=>(u(),_("div",{key:c.id,class:"font-bold ml-0.5"},[d(i(c.course?c.course.name:"")+" ",1),s.courses.length!=D+1?(u(),_(f,{key:0},[d(",")],64)):X("",!0)]))),128))])):(u(),_(f,{key:1},[d(" - ")],64))]),l("td",ye,[l("label",we,[l("input",{onChange:c=>h.accountHold(c,s.id),checked:s.account_hold,type:"checkbox",class:"sr-only peer"},null,40,xe),Ce])]),l("td",Se,[l("div",Ae,[l("button",{onClick:c=>h.sendMail(s.id),type:"button",class:"group relative"},[t(L,{class:"text-purple-400 hover:text-purple-300"}),t(b,{text:e.__("Send Mail")},null,8,["text"])],8,Le),t(g,{"preserve-scroll":"",href:e.route("student.show",s.username),class:"group relative",id:"show"+s.id},{default:n(()=>[t(B,{class:"w-6 h-6 text-pink-400 hover:text-pink-300"}),t(b,{text:e.__("View")},null,8,["text"])]),_:2},1032,["href","id"]),t(g,{"preserve-scroll":"",href:e.route("student.admission.edit",s.id),class:"group relative",id:"edit"+s.id},{default:n(()=>[t(M,{class:"text-blue-400 w-6 h-6 hover:text-blue-300"}),t(b,{text:e.__("Edit")},null,8,["text"])]),_:2},1032,["href","id"]),l("button",{type:"button",onClick:c=>h.destroy(s.id),class:"group relative",id:"delete"+s.id},[t(O,{class:"w-6 h-6 text-red-400 hover:text-red-300"}),t(b,{text:e.__("Delete")},null,8,["text"])],8,Be)])])]))),128)):(u(),_("tr",Me,[l("td",Oe,[t(E,{asShow:"div"})])]))]),_:1}),l("div",Ee,[t(V,{class:"mt-6 mb-6",links:p.users.links},null,8,["links"])])]),t(T,{visible:a.visible,"onUpdate:visible":o[4]||(o[4]=s=>a.visible=s),title:a.show_user.name,onOk:h.hide},{footer:n(()=>[t(F,{key:"back",onClick:h.hide},{default:n(()=>[d(i(e.__("Close")),1)]),_:1},8,["onClick"])]),default:n(()=>[t(I,{user:a.show_user},null,8,["user"])]),_:1},8,["visible","title","onOk"]),t(U,{show:a.export_visible,onClose:e.closeModal},{title:n(()=>[d(i(e.__("Export Data")),1)]),content:n(()=>[l("div",Ne,[t(j,{id:"course","close-on-select":!0,"can-clear":!1,searchable:!0,modelValue:a.export_data.course,"onUpdate:modelValue":o[5]||(o[5]=s=>a.export_data.course=s),"create-option":!1,placeholder:e.__("Select Course"),options:a.export_options,autocomplete:"off"},null,8,["modelValue","placeholder","options"])])]),footer:n(()=>[t(m,{onClick:o[6]||(o[6]=s=>h.exportSubmit()),loading:a.loading,type:"button",class:"text-white bg-blue-500 dark:bg-blue-500 hover:bg-blue-500 active:bg-blue-600 dark:active:bg-blue-600 focus:border-blue-600 dark:focus:border-blue-600 focus:ring focus:ring-blue-300 mr-2 mb-2 dark:focus:ring-blue-300"},{default:n(()=>[d(i(e.__("Export")),1)]),_:1},8,["loading"]),t(m,{loading:!1,onClick:o[7]||(o[7]=s=>a.export_visible=!1),type:"button",class:"text-white bg-red-500 dark:bg-red-500 hover:bg-red-500 active:bg-red-600 dark:active:bg-red-600 focus:border-red-600 dark:focus:border-red-600 focus:ring focus:ring-red-300 mr-2 mb-2 dark:focus:ring-red-300"},{default:n(()=>[d(i(e.__("Cancel")),1)]),_:1})]),_:1},8,["show","onClose"])]),_:1},8,["title"])}const ot=z(se,[["render",Ve]]);export{ot as default};
