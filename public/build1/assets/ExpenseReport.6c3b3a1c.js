import{_ as w}from"./AppLayout.68aece36.js";import{_ as M,N as Y,I as i,u as B,X as L,o as _,c as f,w as l,a as s,b as e,t as p,j as N,C as R,g as S,r as a}from"./app.e2158f44.js";import{s as j}from"./multiselect.576f90b9.js";/* empty css                                                         */import"./TopBarMenu.2e81788b.js";import"./CheckCircleIcon.7023e821.js";import"./XMarkIcon.e1cec856.js";import"./WarningToast.efaf1557.js";import"./PlusCircleIcon.b7e1c640.js";import"./UserIcon.81d1f1d5.js";import"./Bars3Icon.e96342cc.js";const C={components:{AppLayout:w,Multiselect:j,NothingFound:Y,dayjs:i},props:{filter_data:Object},data(){var t,o;return{filter:B({month:(t=this.filter_data.month)!=null?t:"",year:(o=this.filter_data.year)!=null?o:""}),visible:!1,loading:!1,month_value:this.filter_data.month?i(i(this.filter_data.month).format("MMM")+this.filter_data.year,this.customMonthFormat):null,export_data:{month:"",year:""}}},watch:{month_value:function(t){t?(this.filter.month=i(t).format("MM"),this.filter.year=i(t).format("YYYY")):(this.filter.month=null,this.filter.year=null)}},methods:{exportSubmit(){console.log(this.filter),this.loading=!0,this.export_data.month=this.filter.month,this.export_data.year=this.filter.year,L({url:this.route("report.expense.export"),method:"POST",data:this.export_data,responseType:"blob"}).then(t=>{var o=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=o;const d=t.headers["content-disposition"],n=d.indexOf('"')+1,h=d.lastIndexOf('"'),c=d.substring(n,h);r.setAttribute("download",c),document.body.appendChild(r),r.click(),r.remove(),this.loading=!1,this.visible=!1}).catch(t=>{this.loading=!1,this.visible=!1})},handleYearSelection(){const t=this.year.$y;this.filter.year=t}}},E={class:"text-center"},F={class:"pb-12 pt-2"},I={class:"mb-3 rounded-lg py-4 font-semibold text-left rtl:text-right text-gray-900 bg-white dark:text-white dark:bg-gray-800"},O={class:"dark:text-gray-400 mb-0 text-2xl"},V={class:"col-span-2"},A={class:"flex gap-3"},U={class:"col-span-2"},T={class:"text-center mt-52"},z=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),D={class:"mt-2 text-sm font-medium text-gray-900"};function $(t,o,r,d,n,h){const c=a("BreadcrumbLink"),b=a("Breadcrumb"),m=a("page-header"),g=a("global-label"),x=a("a-date-picker"),v=a("global-button"),y=a("NothingFound"),k=a("AppLayout");return _(),f(k,{title:t.__("Expense Report")},{default:l(()=>[s(b,null,{default:l(()=>[s(c,{href:t.route("reports.index"),title:"Report"},null,8,["href"]),s(c,{title:t.__("Expense Report")},null,8,["title"])]),_:1}),n.loading?(_(),f(m,{key:0},{default:l(()=>[e("div",E,p(t.__("It can take up to 2 minutes to generate this report, so please wait.")),1)]),_:1})):N("",!0),e("div",F,[e("div",I,[s(m,{class:"flex justify-between items-center"},{default:l(()=>[e("div",null,[e("h1",O,p(t.__("Expense Report")),1)])]),_:1}),e("form",{class:"grid grid-cols-1 md:grid-cols-8 gap-2 items-center px-6",onSubmit:o[1]||(o[1]=R(u=>h.exportSubmit(),["prevent"]))},[e("div",V,[s(g,{for:"month",value:"Month"}),e("div",A,[s(x,{size:"large",placeholder:t.__("Select Month"),picker:"month",value:n.month_value,"onUpdate:value":o[0]||(o[0]=u=>n.month_value=u),format:"MMM YYYY",style:{width:"400px"}},null,8,["placeholder","value"])])]),e("div",U,[s(v,{loading:n.loading,class:"text-white mt-6 bg-blue-500 dark:bg-blue-500 hover:bg-blue-500 active:bg-blue-600 dark:active:bg-blue-600 focus:border-blue-600 dark:focus:border-blue-600 focus:ring focus:ring-blue-300 dark:focus:ring-blue-300"},{default:l(()=>[S(p(t.__("Export")),1)]),_:1},8,["loading"])])],32)]),e("div",T,[z,e("h3",D,[s(y,{asShow:"div"})])])])]),_:1},8,["title"])}const et=M(C,[["render",$]]);export{et as default};
