import{_ as z}from"./AppLayout.68aece36.js";import{T as G}from"./ToolTip.01b9a5b2.js";import{P as H}from"./Pagination.45fe2d72.js";import{B as J}from"./BarChart.cfa296f6.js";import{_ as K,N as Q,I as v,u as M,o as _,c as b,w as n,a as l,b as e,g as p,t as s,j as f,e as h,C as W,n as D,i as X,F as Z,v as g,V as y,r as i,S as $,U as ee}from"./app.e2158f44.js";import{_ as te}from"./Modal.a50958a8.js";import{r as ae}from"./TrashIcon.24ca370a.js";import{r as se}from"./LinkIcon.46d6ebb7.js";import{r as oe}from"./PencilSquareIcon.3f56d8d9.js";import{r as re}from"./MagnifyingGlassIcon.50c8ce78.js";import{r as le}from"./EyeIcon.c768064f.js";import"./TopBarMenu.2e81788b.js";import"./CheckCircleIcon.7023e821.js";import"./XMarkIcon.e1cec856.js";import"./WarningToast.efaf1557.js";import"./PlusCircleIcon.b7e1c640.js";import"./UserIcon.81d1f1d5.js";import"./Bars3Icon.e96342cc.js";import"./auto.4bbfcea2.js";const de={components:{AppLayout:z,ToolTip:G,TrashIcon:ae,LinkIcon:se,PencilSquareIcon:oe,Pagination:H,MagnifyingGlassIcon:re,ExportModal:te,NothingFound:Q,EyeIcon:le,BarChart:J},props:{filter_data:Object,transactions:Object,total_amount:Number,total_due_amount:Number,this_year_labels:Array,this_year_values:Array},data(){var t,o,d,u,r,c,x,k,m;return{visible:!1,update:!1,item:"",customDateFormat:"DD-MM-YYYY",date2:[this.filter_data.start_date?v(this.filter_data.start_date):null,this.filter_data.end_date?v(this.filter_data.end_date):null],filter:M({keyword:(t=this.filter_data.keyword)!=null?t:"",status:(o=this.filter_data.status)!=null?o:"",start_date:(d=this.filter_data.start_date)!=null?d:"",end_date:(u=this.filter_data.end_date)!=null?u:"",type:(r=this.filter_data.type)!=null?r:"",over_due:(c=this.filter_data.over_due)!=null?c:""}),tab:(x=this.filter_data.type)!=null?x:"all",tab2:(k=this.filter_data.status)!=null?k:"all",tab3:(m=this.filter_data.over_due)!=null?m:"all",export_data:M({type:"xlsx",month:"this_month"}),loading:!1}},watch:{date2:{deep:!0,handler(t,o){if(t!=null)if(this.date2[0]!=null&&this.date2[1]!=null){let d=v(this.date2[0]).format("YYYY-MM-DD"),u=v(this.date2[1]).format("YYYY-MM-DD");this.filter.start_date=d,this.filter.end_date=u}else this.filter.start_date="",this.filter.end_date="";else this.filter.start_date="",this.filter.end_date=""}}},methods:{destroy(t){if(confirm("Are you sure ?"))this.$inertia.delete(this.route("transaction.destroy",t));else return!1},filterData(){this.filter.get(this.route("transaction.index"),{preserveScroll:!0})},showModal(){this.$refs.modal.showModal()},showExportModal(){this.visible=!0},exportSubmit(){this.loading=!0,axios({url:this.route("report.transaction.export"),method:"POST",data:this.export_data,responseType:"blob"}).then(t=>{let o=this.export_data.type;var d=window.URL.createObjectURL(new Blob([t.data])),u=document.createElement("a");u.href=d,u.setAttribute("download","transactions-report."+o),document.body.appendChild(u),u.click(),this.loading=!1,this.visible=!1}).catch(t=>{this.loading=!1,this.visible=!1})},setTabValue(t){var u,r;let o=(u=t.filter_column_data)!=null?u:"",d=(r=t.value)!=null?r:"";this.filter[o]=d}}},ie=t=>($("data-v-d6f9454b"),t=t(),ee(),t),ne={class:"pb-12"},ue={class:"flex justify-between items-center gap-4"},_e={key:0,class:"bg-white mb-4 dark:bg-gray-800 rounded-lg"},ce={class:"mb-0 text-black/[0.85] dark:text-gray-400 md:flex items-center justify-between font-semibold text-base px-6 py-4"},pe={class:"font-bold text-gray-500"},me={class:"text-black dark:text-gray-400"},fe=ie(()=>e("hr",{class:"dark:border-gray-600"},null,-1)),be={class:"p-6"},he={class:"mb-4"},ge={class:"flex items-center col-span-2"},ye={class:"relative w-full"},xe={type:"submit",class:"absolute top-1 rtl:right-auto rtl:left-0 right-0 p-2.5 text-sm font-medium text-white bg-blue-700 rounded-r-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},ke={class:"sr-only"},ve={class:"col-span-2"},we={class:"2xl:col-span-4 flex flex-col lg:flex-row sm:gap-6 gap-1.5 lg:items-center"},Te={class:"sm:flex-row flex flex-col sm:gap-4 gap-1.5 w-full"},De={class:"col-span-2 bg-white dark:bg-gray-800 dark:text-gray-600 rounded-lg",id:"transactionTable"},Ie={class:"py-4 px-5"},Se={class:"py-4 px-5"},Ae={class:"py-4 px-5"},Me={class:"py-4 px-5",width:"30%"},Ve={class:"py-4 px-5"},Le={class:"py-4 px-5 flex justify-end"},Ce={class:"py-4 px-5 text-sm text-gray-900 whitespace-nowrap dark:text-gray-400"},Ee={class:"mb-0 font-medium"},Pe={class:"py-4 px-5 text-gray-900 whitespace-nowrap dark:text-gray-400"},Ye={class:"text-base flex gap-2 font-semibold"},Ue={class:"text-sm"},Be={class:"text-sm font-medium"},Fe={class:"py-4 px-5 text-sm text-gray-900 whitespace-nowrap dark:text-gray-400"},Ne={class:"font-medium"},je={class:"font-semibold"},Oe={class:"py-4 px-5 text-gray-900 dark:text-gray-400"},qe={class:"text-sm font-medium"},Re={class:"flex items-center gap-3 mb-1 whitespace-nowrap"},ze=["href"],Ge={class:"mb-0 whitespace-nowrap"},He={class:"py-4 px-5 text-gray-900 whitespace-nowrap dark:text-gray-400"},Je={class:"text-base font-semibold inline-flex"},Ke={class:"py-5 px-5"},Qe={class:"flex justify-end items-center gap-2"},We=["href"],Xe=["onClick","id"],Ze={class:"flex justify-center"},$e={class:"text-left"},et={class:"mb-2"},tt={class:"text-left"},at={for:"this_month",class:"w-full py-3 pb-1 text-sm font-medium text-gray-900 dark:text-gray-300"},st={class:"md:flex gap-1 items-center"},ot={class:"w-full mt-1 md:mt-0 flex items-center pl-4 border border-gray-200 rounded dark:border-gray-700"},rt={for:"this_month",class:"w-full py-3 ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},lt={class:"w-full mt-1 md:mt-0 flex items-center pl-4 border border-gray-200 rounded dark:border-gray-700"},dt={for:"last_month",class:"w-full py-3 ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},it={class:"w-full mt-1 md:mt-0 flex items-center pl-4 border border-gray-200 rounded dark:border-gray-700"},nt={for:"last_six_month",class:"w-full py-3 ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},ut={class:""},_t={class:"text-left"},ct={for:"excel",class:"w-full text-left py-3 pb-1 text-sm font-medium text-gray-900 dark:text-gray-300"},pt={class:"md:flex gap-6 items-center"},mt={class:"w-full mt-1 md:mt-0 rounded-lg cursor-pointer flex items-center pl-4 border border-gray-200 dark:border-gray-700"},ft={for:"pdf",class:"w-full mt-1 md:mt-0 cursor-pointer rounded-lg flex items-center pl-4 border border-gray-200 dark:border-gray-700"};function bt(t,o,d,u,r,c){const x=i("BreadcrumbLink"),k=i("Breadcrumb"),m=i("global-button"),V=i("page-header"),L=i("bar-chart"),C=i("global-input"),E=i("MagnifyingGlassIcon"),P=i("a-range-picker"),w=i("tab-filter"),Y=i("LinkIcon"),I=i("Link"),U=i("EyeIcon"),T=i("tool-tip"),B=i("pencil-square-icon"),F=i("TrashIcon"),N=i("NothingFound"),j=i("global-table"),O=i("pagination"),S=i("global-label"),q=i("export-modal"),R=i("AppLayout");return _(),b(R,{title:t.__("Transaction List")},{default:n(()=>{var A;return[l(k,null,{default:n(()=>[l(x,{title:t.__("All Transaction")},null,8,["title"])]),_:1}),e("div",ne,[l(V,null,{content:n(()=>[e("div",ue,[t.can("transaction.create")?(_(),b(m,{key:0,loading:!1,url:t.route("transaction.create"),id:"addNewTransaction",type:"link",theme:"primary"},{default:n(()=>[p(s(t.__("Add Transaction")),1)]),_:1},8,["url"])):f("",!0)])]),default:n(()=>[p(s(t.__("All Transaction"))+" ",1)]),_:1}),t.$page.props.auth.role=="Parent"?(_(),h("div",_e,[e("h2",ce,[e("div",null,s(t.__("This Year Transaction")),1),e("div",pe,[p(s(t.__("Total Due Amount"))+": ",1),e("span",me,s((A=t.$page.props.default_currency_symbol)!=null?A:"")+s(d.total_due_amount),1)])]),fe,e("div",be,[l(L,{labels:d.this_year_labels,data:d.this_year_values,barPercentage:.1},null,8,["labels","data"])])])):f("",!0),e("div",he,[e("form",{class:"items-center grid grid-cols-1 2xl:grid-cols-8 2xl:gap-x-4 sm:gap-y-6 gap-y-1.5",onSubmit:o[2]||(o[2]=W(a=>c.filterData(),["prevent"]))},[e("div",ge,[e("div",ye,[l(C,{modelValue:r.filter.keyword,"onUpdate:modelValue":o[0]||(o[0]=a=>r.filter.keyword=a),type:"text",class:"mt-1 block w-full placeholder:text-xs sm:placeholder:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:t.__("Insert Title, Expense/Income or Type")},null,8,["modelValue","placeholder"]),e("button",xe,[l(E,{class:"w-5 h-5"}),e("span",ke,s(t.__("Search")),1)])])]),e("div",ve,[l(P,{class:D([t.$page.props.errors.date?"border-custom":"","custom-input dark:bg-gray-700 dark:border-gray-700 dark:text-gray-400"]),name:"date","disabled-date":t.disabledDate,"disabled-time":t.disabledRangeTime,value:r.date2,"onUpdate:value":o[1]||(o[1]=a=>r.date2=a),format:r.customDateFormat},null,8,["class","disabled-date","disabled-time","value","format"])]),e("div",we,[e("div",Te,[t.$page.props.auth.role!="Parent"&&t.$page.props.auth.role!="Student"?(_(),b(w,{key:0,onSetTabData:c.setTabValue,filterData:d.filter_data?d.filter_data.type:"",filter_column:"type",tab_data:[{title:"All",id:"all3",value:"all"},{title:"Income",id:"income",value:"income"},{title:"Expense",id:"expense",value:"expense"}]},null,8,["onSetTabData","filterData"])):f("",!0),l(w,{onSetTabData:c.setTabValue,filterData:d.filter_data?d.filter_data.status:"",filter_column:"status",tab_data:[{title:"All",id:"all2",value:"all"},{title:"Paid",id:"paid",value:"paid"},{title:"Unpaid",id:"unpaid",value:"unpaid"}]},null,8,["onSetTabData","filterData"]),l(w,{onSetTabData:c.setTabValue,filterData:d.filter_data?d.filter_data.over_due:"",filter_column:"over_due",tab_data:[{title:"All",id:"all",value:"all"},{title:"Over Due",id:"over-due",value:"over-due"}]},null,8,["onSetTabData","filterData"])]),l(m,{loading:r.filter.processing,type:"submit",class:"text-white inline-flex whitespace-nowrap"},{default:n(()=>[p(s(t.__("Search")),1)]),_:1},8,["loading"])])],32)]),e("div",De,[l(j,null,{head:n(()=>[e("th",Ie,s(t.__("Invoice")),1),e("th",Se,s(t.__("Total Amount")),1),e("th",Ae,s(t.__("Paid Amount")),1),e("th",Me,s(t.__("Info")),1),e("th",Ve,s(t.__("Status")),1),e("th",Le,s(t.__("Action")),1)]),body:n(()=>[d.transactions.data.length>0?(_(!0),h(Z,{key:0},X(d.transactions.data,a=>(_(),h("tr",{key:a.id,class:"border-b dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"},[e("td",Ce,[e("div",null,s(t.__("Transaction"))+": #"+s(a.id),1),e("p",Ee,s(a.type?a.type.name:""),1)]),e("td",Pe,[e("div",Ye,[e("span",Ue,s(this.$page.props.default_currency_symbol+" "+a.amount),1),e("span",{class:D(["capitalize text-xs font-semibold mr-2 px-2.5 py-0.5 rounded",a.type.type==="income"?"bg-blue-100 text-blue-800 dark:bg-gray-700 dark:text-gray-400":"bg-red-100 text-red-800 dark:bg-red-500 dark:opacity-60 dark:text-red-100"])},s(a.type.type),3)]),e("div",Be,s(t.__("Due Date"))+": "+s(a.due_date_format),1)]),e("td",Fe,[e("div",Ne,s(this.$page.props.default_currency_symbol+" "+a.paid_amount),1),e("div",je,s(a.method),1)]),e("td",Oe,[e("div",qe,[e("p",Re,[a.document?(_(),h("a",{key:0,href:a.document,download:"",target:"_blank",class:"text-sm inline-flex gap-2 items-center text-blue-500 hover:text-blue-400 cursor-pointer"},[l(Y,{class:"w-6 h-6"}),p(" "+s(t.__("Attached File")),1)],8,ze)):f("",!0)]),e("p",Ge,s(t.__("Date of Issue"))+": "+s(t.formatTime(a.date_time)),1)])]),e("td",He,[e("div",Je,[e("span",{class:D(["capitalize text-xs font-semibold px-2.5 py-0.5 rounded",a.status=="paid"?"bg-green-400 text-white dark:opacity-60":"bg-blue-100 text-blue-800 dark:opacity-60"])},s(a.status),3)])]),e("td",Ke,[e("div",Qe,[a.status=="unpaid"&&t.can("transaction.update")?(_(),b(I,{key:0,method:"POST",href:t.route("transaction.mark.as.paid",a.id),class:"whitespace-nowrap text-blue-500 hover:text-blue-400"},{default:n(()=>[p(s(t.__("Mark as Paid")),1)]),_:2},1032,["href"])):f("",!0),e("a",{href:t.route("transaction.details",a.transaction_no),target:"_blank",class:"group relative"},[l(U,{class:"text-purple-500 w-6 h-6 hover:text-purple-400"}),l(T,{text:"View Details"})],8,We),t.can("transaction.edit")?(_(),b(I,{key:1,"preserve-scroll":"",href:t.route("transaction.edit",a.id),type:"button",class:"group relative",id:"testEditTransaction"+a.id},{default:n(()=>[l(B,{class:"text-blue-500 w-6 h-6 hover:text-blue-400"}),l(T,{text:"Edit"})]),_:2},1032,["href","id"])):f("",!0),t.can("transaction.destroy")?(_(),h("button",{key:2,type:"button",onClick:ht=>c.destroy(a.id),class:"group relative",id:"testDeleteTransaction"+a.id},[l(F,{class:"w-6 h-6 text-red-400 hover:text-red-300"}),l(T,{text:t.__("Delete")},null,8,["text"])],8,Xe)):f("",!0)])])]))),128)):(_(),b(N,{key:1,asShow:"tr"}))]),_:1}),e("div",Ze,[l(O,{class:"mt-6 mb-6",links:d.transactions.links},null,8,["links"])])])]),l(q,{show:r.visible,onClose:t.closeModal},{title:n(()=>[e("div",$e,s(t.__("Export Data")),1)]),content:n(()=>[e("div",et,[e("div",tt,[e("label",at,s(t.__("Choose Time Period")),1)]),e("div",st,[e("div",ot,[g(e("input",{"onUpdate:modelValue":o[3]||(o[3]=a=>r.export_data.month=a),id:"this_month",type:"radio",value:"this_month",name:"bordered-radio",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[y,r.export_data.month]]),e("label",rt,s(t.__("This Month")),1)]),e("div",lt,[g(e("input",{"onUpdate:modelValue":o[4]||(o[4]=a=>r.export_data.month=a),id:"last_month",type:"radio",value:"last_month",name:"bordered-radio",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[y,r.export_data.month]]),e("label",dt,s(t.__("Last Month")),1)]),e("div",it,[g(e("input",{"onUpdate:modelValue":o[5]||(o[5]=a=>r.export_data.month=a),id:"last_six_month",type:"radio",value:"last_six_month",name:"bordered-radio",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[y,r.export_data.month]]),e("label",nt,s(t.__("Last Six Month")),1)])])]),e("div",ut,[e("div",_t,[e("label",ct,s(t.__("Choose Data Format")),1)]),e("div",pt,[e("label",mt,[g(e("input",{value:"xlsx",id:"excel","onUpdate:modelValue":o[6]||(o[6]=a=>r.export_data.type=a),type:"radio",name:"export_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:text-gray-400 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[y,r.export_data.type]]),l(S,{for:"excel",class:"py-2 ml-2 mt-1 cursor-pointer w-full text-sm font-medium text-gray-900 dark:text-gray-300",value:"Excel",required:!1})]),e("label",ft,[g(e("input",{value:"pdf",id:"pdf","onUpdate:modelValue":o[7]||(o[7]=a=>r.export_data.type=a),type:"radio",name:"export_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[y,r.export_data.type]]),l(S,{for:"pdf",class:"py-2 ml-2 mt-1 w-full text-sm font-medium cursor-pointer text-gray-900 dark:text-gray-300",value:"PDF",required:!1})])])])]),footer:n(()=>[l(m,{onClick:o[8]||(o[8]=a=>c.exportSubmit()),loading:r.loading,type:"button",class:"mr-2",id:"exportTransaction"},{default:n(()=>[p(s(t.__("Export")),1)]),_:1},8,["loading"]),l(m,{loading:!1,onClick:o[9]||(o[9]=a=>r.visible=!1),type:"button",class:"mr-2",theme:"outline-danger"},{default:n(()=>[p(s(t.__("Cancel")),1)]),_:1})]),_:1},8,["show","onClose"])]}),_:1},8,["title"])}const Bt=K(de,[["render",bt],["__scopeId","data-v-d6f9454b"]]);export{Bt as default};
