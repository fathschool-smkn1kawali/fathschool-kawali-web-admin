import{_ as B}from"./AppLayout.f7869522.js";import{T as j,S as E}from"./Student.488714e8.js";import{_ as F,o as g,c as h,w as u,a as r,b as s,g as f,t as c,C as O,n as _,e as P,j as b,s as q,a4 as A,r as t,S as D,U as N}from"./app.eb4bca63.js";import"./TopBarMenu.57ba7e85.js";import"./CheckCircleIcon.c15b336b.js";import"./shepherd.esm.28e46ee4.js";import"./XMarkIcon.c835eea2.js";import"./WarningToast.ca887990.js";import"./NavLink.88c501bd.js";import"./PlusCircleIcon.b3c660e0.js";import"./UserIcon.11494925.js";import"./Bars3Icon.9d3eeab9.js";const T={components:{AppLayout:B,TeacherComponent:j,Student:E},props:{errors:Object,roles:Object,departments:Object,parents:Object,classes:Object,user:Object,plans:Object},data(){return{loading:!1,image_preview:this.user.profile_photo_url,user_type:this.user.role,options:[],form:{name:this.user.name,email:this.user.email,password:"",password_confirmation:"",user_type:this.user.role,avatar:"",phone:this.user.phone,address:this.user.address,department:this.user.department_id,roll_no:this.user.profile?this.user.profile.roll_no:"",class:this.user.profile?this.user.profile.course_id:"",parent:this.user.profile?this.user.profile.parent_id:"",session:this.user.profile?this.user.profile.session:"",plan:this.user.profile?this.user.profile.plan_id:"",_method:"PUT",teacher_edit:!1}}},mounted(){window.location.search.substring(1)&&(this.form.teacher_edit=!0)},watch:{form:{deep:!0,handler(e,o){this.roleGet(e.user_type)}}},created(){for(const[e,o]of Object.entries(this.roles))this.options.push({value:o.name,label:o.name})},methods:{submit(){this.loading=!0,this.$inertia.post(this.route("users.update",this.user.id),this.form,{preserveScroll:!0,onFinish:e=>{this.loading=!1}})},browse(){this.$refs.picker.click()},change(e){this.form.avatar=e.target.files[0];let o=new FileReader;o.readAsDataURL(this.form.avatar),o.onload=d=>{this.image_preview=d.target.result}},roleGet(e){this.user_type=e},getChildData(e){this.form.department=e.department},getStudentData(e){this.form.department=e.department,this.form.roll_no=e.roll_no,this.form.class=e.class,this.form.parent=e.parent,this.form.session=e.session,this.form.plan=e.plan}}},G=e=>(D("data-v-286ecf1b"),e=e(),N(),e),L={class:"pb-12"},I={class:"overflow-x-auto sm:rounded-lg"},z={class:"grid sm:grid-cols-1 md:grid-cols-2 sm:gap-1 md:gap-4"},M={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},R={class:"mb-3"},J={class:"mb-3"},H={class:"mb-1"},K={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},Q={class:"mb-3"},W=["src"],X={class:"mb-2 text-sm text-gray-500 dark:text-gray-400"},Y={class:"font-semibold"},Z=G(()=>s("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," SVG, PNG, JPG or GIF ",-1)),x={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},$={class:"mb-3"},ee={class:"mb-1"},re={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},oe={class:"mb-3"},se={class:"mb-1"},ae=["placeholder"];function le(e,o,d,te,a,p){const y=t("BreadcrumbLink"),k=t("Breadcrumb"),w=t("global-button"),v=t("page-header"),n=t("global-label"),m=t("global-input"),i=t("input-error"),V=t("a-select"),C=t("teacher-component"),S=t("student"),U=t("AppLayout");return g(),h(U,{title:e.__("User Edit")},{default:u(()=>[r(k,null,{default:u(()=>[r(y,{href:e.route("users.index"),title:"Users"},null,8,["href"]),r(y,{title:e.__("User Edit")},null,8,["title"])]),_:1}),s("div",L,[r(v,null,{content:u(()=>[r(w,{"preserve-scroll":"",type:"link",url:e.route("users.index"),theme:"primary"},{default:u(()=>[f(c(e.__("All User")),1)]),_:1},8,["url"])]),default:u(()=>[f(c(e.__("User Edit"))+" ",1)]),_:1}),s("div",I,[s("form",{class:"mt-2",onSubmit:o[9]||(o[9]=O(l=>p.submit(),["prevent"])),enctype:"multipart/form-data"},[s("div",z,[s("div",M,[s("div",R,[r(n,{for:"name",value:"Name",required:!1}),r(m,{type:"text",modelValue:a.form.name,"onUpdate:modelValue":o[0]||(o[0]=l=>a.form.name=l),id:"name",name:"name",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Enter Name"),error:e.$page.props.errors.name},null,8,["modelValue","placeholder","error"]),r(i,{error:e.$page.props.errors.name},null,8,["error"])]),s("div",J,[r(n,{for:"email",value:"Email",required:!1}),r(m,{type:"email",modelValue:a.form.email,"onUpdate:modelValue":o[1]||(o[1]=l=>a.form.email=l),id:"email",name:"email",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Enter Email"),error:e.$page.props.errors.email},null,8,["modelValue","placeholder","error"]),r(i,{error:e.$page.props.errors.email},null,8,["error"])]),s("div",H,[r(n,{for:"role",value:"Select User Type",required:!1}),r(V,{disabled:"",class:_([e.$page.props.errors.user_type?"border-custom ":"","width-100"]),size:"large",value:a.form.user_type,"onUpdate:value":o[2]||(o[2]=l=>a.form.user_type=l),"show-search":"",placeholder:e.__("Select a sections"),options:a.options,"filter-option":e.filterOption,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleChange},null,8,["class","value","placeholder","options","filter-option","onFocus","onBlur","onChange"]),r(i,{error:e.$page.props.errors.user_type},null,8,["error"])])]),s("div",K,[s("div",Q,[r(n,{for:"dropzone-file",value:"Avatar",required:!1}),s("div",{class:_(["w-full grid items-center gap-2",a.image_preview?"grid-cols-2":"grid-cols-1"])},[a.image_preview?(g(),P("img",{key:0,class:"w-48 h-48 rounded-full",src:a.image_preview,alt:""},null,8,W)):b("",!0),s("div",{onClick:o[3]||(o[3]=(...l)=>p.browse&&p.browse(...l)),class:"w-full cursor-pointer h-48 border-2 border-gray-300 bg-white opacity-80 flex flex-col dark:bg-gray-800 dark:border-gray-600 justify-center items-center pt-5 pb-6"},[s("p",X,[s("span",Y,c(e.__("Click to upload")),1),f(" "+c(e.__("or drag and drop")),1)]),Z]),s("input",{name:"image",type:"file",class:"hidden",ref:"picker",onChange:o[4]||(o[4]=(...l)=>p.change&&p.change(...l))},null,544)],2),r(i,{error:e.$page.props.errors.avatar},null,8,["error"])])]),s("div",x,[s("div",$,[r(n,{for:"password",value:"Password",required:!1}),r(m,{type:"password",modelValue:a.form.password,"onUpdate:modelValue":o[5]||(o[5]=l=>a.form.password=l),id:"password",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Password"),error:e.$page.props.errors.password},null,8,["modelValue","placeholder","error"]),r(i,{error:e.$page.props.errors.password},null,8,["error"])]),s("div",ee,[r(n,{for:"password_confirmation",value:"Confirm Password",required:!1}),r(m,{type:"password",modelValue:a.form.password_confirmation,"onUpdate:modelValue":o[6]||(o[6]=l=>a.form.password_confirmation=l),id:"password_confirmation",name:"password_confirmation",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Confirm Password"),error:e.$page.props.errors.password_confirmation},null,8,["modelValue","placeholder","error"]),r(i,{error:e.$page.props.errors.password_confirmation},null,8,["error"])])]),s("div",re,[s("div",oe,[r(n,{for:"phone",value:"Phone",required:!1}),r(m,{type:"number",modelValue:a.form.phone,"onUpdate:modelValue":o[7]||(o[7]=l=>a.form.phone=l),id:"phone",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Phone"),error:e.$page.props.errors.phone},null,8,["modelValue","placeholder","error"]),r(i,{error:e.$page.props.errors.phone},null,8,["error"])]),s("div",se,[r(n,{for:"address",value:"Address",required:!1}),q(s("textarea",{"onUpdate:modelValue":o[8]||(o[8]=l=>a.form.address=l),name:"",placeholder:e.__("Address"),id:"address",class:_([d.errors.address?"border-red-500 dark:border-red-500":"","pl-4 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"])},null,10,ae),[[A,a.form.address]]),r(i,{error:e.$page.props.errors.address},null,8,["error"])])]),a.user_type=="Teacher"?(g(),h(C,{key:0,user:d.user,departments:d.departments,onChildForm:p.getChildData},null,8,["user","departments","onChildForm"])):b("",!0),a.user_type=="Student"?(g(),h(S,{key:1,onStudentForm:p.getStudentData,departments:d.departments,user:d.user,classes:d.classes,parents:d.parents,plans:d.plans},null,8,["onStudentForm","departments","user","classes","parents","plans"])):b("",!0)]),r(w,{loading:a.loading,type:"submit",cssClass:"w-full mt-3",theme:"primary"},{default:u(()=>[f(c(e.__("Save")),1)]),_:1},8,["loading"])],32)])])]),_:1},8,["title"])}const ye=F(T,[["render",le],["__scopeId","data-v-286ecf1b"]]);export{ye as default};
