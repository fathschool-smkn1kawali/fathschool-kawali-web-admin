import{_ as R}from"./AppLayout.68aece36.js";import{s as E}from"./multiselect.576f90b9.js";/* empty css                */import{_ as B,I as h,o as g,c as N,w as p,a as t,b as o,g as y,t as n,C as j,e as _,i as F,F as Y,j as k,n as w,v as L,D as x,r as d}from"./app.e2158f44.js";import{r as z}from"./TrashIcon.24ca370a.js";import"./TopBarMenu.2e81788b.js";import"./CheckCircleIcon.7023e821.js";import"./XMarkIcon.e1cec856.js";import"./WarningToast.efaf1557.js";import"./PlusCircleIcon.b7e1c640.js";import"./UserIcon.81d1f1d5.js";import"./Bars3Icon.e96342cc.js";const P={components:{AppLayout:R,Multiselect:E,TrashIcon:z},props:{users:Object,invoice:Object,amounts:Array,quantity:Array,descriptions:Array,currencies:Object},data(){return{loading:!1,transaction_items:[],visible:!1,selected_user_image:this.invoice.user.profile_photo_url,date_value:h(this.invoice.date),due_date_value:h(this.invoice.due_date),form:{user:this.invoice.user.id,date:this.invoice.date,due_date:this.invoice.due_date,due_date_in:this.invoice.due_date_in,amount:this.amounts,description:this.descriptions,message:this.invoice.message,invoice_number:this.invoice.invoice_no,title:this.invoice.title,currency:this.invoice.currency,attachments:[],total_amount:0,status:this.invoice.status=="paid",recurring:this.invoice.recurring,recurring_days:this.invoice.recurring_days,_method:"PUT"},dueDate:[{value:"0",label:"No Due Date"},{value:"date",label:"On Specific Date"},{value:"10",label:"In 10 Days"},{value:"15",label:"In 15 Days"},{value:"30",label:"In 30 Days"}]}},watch:{date_value:{deep:!0,handler(e,r){if(e){let c=h(e).format("YYYY-MM-DD");this.form.date=c}else this.form.date=null}},due_date_value:{deep:!0,handler(e,r){if(e){let c=h(e).format("YYYY-MM-DD");this.form.due_date=c}else this.form.due_date=null}},form:{deep:!0,handler(e,r){this.totalSum()}}},mounted(){for(let e=0;e<this.invoice.items.length;e++){this.invoice.items[e];let r=this.transaction_items.length;this.transaction_items.push(r+1)}this.totalSum()},methods:{submit(){this.loading=!0,this.$inertia.post(this.route("invoice.update",this.invoice.id),this.form,{preserveScroll:!0,onFinish:e=>{this.loading=!1}})},addNew(){let e=this.transaction_items.length;this.transaction_items.push(e+1)},totalSum(){setInterval(()=>{let e=0;for(let r=0;r<this.form.amount.length;r++)e=parseInt(e)+parseInt(this.form.amount[r]);this.form.total_amount=this.form.amount.length>0?parseFloat(e).toFixed(2):0},1e3)},removeItem(e,r){for(var c=this.transaction_items,f=0;f<c.length;f++)c[f]===e&&c.splice(f,1);this.form.amount.splice(r,1),this.form.quantity.splice(r,1),this.form.description.splice(r,1),this.totalSum()},getImage(){setInterval(()=>{let e=this.form.user;this.users.data.forEach(r=>{r.value==e&&(this.selected_user_image=r.image)})},100)},attachment(e){for(let r=0;r<e.target.files.length;r++)this.form.attachments.push(e.target.files[r])},recurringOption(e){this.form.recurring=e,this.visible=e},hide(){this.visible=!1}}},K={class:"pb-12"},G={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},H={class:"col-span-2"},J={class:"bg-white dark:bg-gray-800 rounded-lg"},Q={class:"w-full p-6 dark:border-gray-700"},W={class:"flex justify-end items-end"},X=["onClick"],Z={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$={class:"mt-2"},ee={class:"bg-white mt-2 dark:bg-gray-800 rounded-lg"},re={class:"w-full p-6 dark:border-gray-700"},oe={class:"mt-4"},te={key:0},ae={class:"font-bold text-xs ml-1 dark:text-gray-400 mt-0.5"},le={class:"mt-4"},se={class:"bg-white mt-2 dark:bg-gray-800 rounded-lg"},ie={class:"w-full p-6 dark:border-gray-700"},de={class:"mt-2"},ne={class:"flex justify-between items-center"},ue={class:"font-extrabold text-xl dark:text-gray-400"},ce={class:"font-extrabold text-xl dark:text-gray-400"},pe={class:"col-span-1"},me={class:"bg-white dark:bg-gray-800 rounded-lg mb-2"},ge={class:"px-4 py-2 dark:border-gray-700"},_e={class:"flex items-center pl-4 rounded-lg border border-gray-200 dark:border-gray-700"},fe=["checked"],ve={for:"one_time_invoice",class:"py-2.5 ml-2 w-full text-sm font-medium text-gray-900 dark:text-gray-300"},be=["checked"],he={for:"recurring_invoice",class:"py-2.5 ml-2 w-full text-sm font-medium text-gray-900 dark:text-gray-300"},ye={class:"px-4 py-0 dark:border-gray-700"},ke={key:0,class:"mb-3"},we={class:"flex gap-3"},Ve={class:"px-4 py-0 dark:border-gray-700"},De={class:"w-full"},Ie={class:"w-full px-4 py-2 dark:border-gray-700"},Se={class:"mb-3 flex items-center gap-6"},Ce=["src"],qe={class:"w-full"},Ue={class:"bg-white dark:bg-gray-800 rounded-lg"},Te={class:"w-full p-6 dark:border-gray-700"},Ae={class:"mb-3"},Me={class:"mb-3"},Oe={class:"mb-3"},Re={for:"paid",class:"w-full flex items-center pl-4 border rounded-lg dark:bg-gray-700 border-gray-200 dark:border-gray-700"},Ee={for:"paid",class:"py-2.5 ml-2 w-full text-sm font-medium text-gray-900 dark:text-gray-300 dark:bg-gray-700"},Be={class:"grid grid-cols-2 gap-2"},Ne={class:"mb-3"},je={class:"mb-3"},Fe={key:0,class:"mb-3"},Ye={class:"dark:bg-gray-800 rounded-lg dark:text-gray-400"},Le={class:"w-full"},xe={class:"bg-white dark:bg-gray-800 rounded-lg"},ze={class:"grid grid-cols-2 gap-2 dark:border-gray-700"},Pe={class:"mb-3"},Ke={class:"mb-3"},Ge={class:"flex gap-3"};function He(e,r,c,f,a,u){const I=d("BreadcrumbLink"),q=d("Breadcrumb"),S=d("global-button"),U=d("page-header"),T=d("TrashIcon"),s=d("global-label"),C=d("global-textarea"),i=d("input-error"),v=d("global-input"),V=d("Multiselect"),D=d("a-date-picker"),A=d("a-button"),M=d("a-modal"),O=d("AppLayout");return g(),N(O,{title:e.__("Edit Invoice")},{default:p(()=>[t(q,null,{default:p(()=>[t(I,{href:e.route("invoice.index"),title:"Recurring Invoice"},null,8,["href"]),t(I,{title:e.__("Edit Invoice")},null,8,["title"])]),_:1}),o("div",K,[t(U,null,{content:p(()=>[t(S,{loading:!1,type:"link",url:e.route("invoice.index"),theme:"primary"},{default:p(()=>[y(n(e.__("Back To List")),1)]),_:1},8,["url"])]),default:p(()=>[y(n(e.__("Edit Recurring Invoice"))+" ",1)]),_:1}),o("form",{onSubmit:r[17]||(r[17]=j(l=>u.submit(),["prevent"])),enctype:"multipart/form-data"},[o("div",G,[o("div",H,[o("div",J,[o("div",Q,[(g(!0),_(Y,null,F(a.transaction_items,(l,m)=>(g(),_("div",{key:m,class:"mb-4"},[o("div",W,[m!=0?(g(),_("button",{key:0,type:"button",onClick:b=>u.removeItem(l,m),class:"bg-red-500 hover:bg-red-500 rounded-full p-1"},[t(T,{class:"w-6 h-6 text-white"})],8,X)):k("",!0)]),o("div",Z,[o("div",null,[t(s,{for:"description",value:"Description",required:!1}),t(C,{cols:"30",rows:"1",id:"description",modelValue:a.form.description[m],"onUpdate:modelValue":b=>a.form.description[m]=b,type:"text",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Description"),error:e.$page.props.errors.description},null,8,["modelValue","onUpdate:modelValue","placeholder","error"]),t(i,{error:e.$page.props.errors.description},null,8,["error"])]),o("div",null,[t(s,{for:"amount",value:"Amount",required:!0}),t(v,{onKeyup:r[0]||(r[0]=b=>u.totalSum()),id:"amount",modelValue:a.form.amount[m],"onUpdate:modelValue":b=>a.form.amount[m]=b,type:"number",class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Amount"),error:e.$page.props.errors.amount},null,8,["modelValue","onUpdate:modelValue","placeholder","error"]),t(i,{error:e.$page.props.errors.amount},null,8,["error"])])])]))),128)),o("div",$,[o("div",{onClick:r[1]||(r[1]=l=>u.addNew()),class:"cursor-pointer text-lg font-bold text-blue-500"}," + "+n(e.__("Add Item")),1)])])]),o("div",ee,[o("div",re,[o("div",oe,[t(s,{for:"document",value:"Attachments",required:!1}),e.transaction&&e.transaction.document?(g(),_("div",te,[o("button",{onClick:r[2]||(r[2]=l=>e.download(e.transaction.document)),class:"text-pink-500 border border-pink-500 hover:bg-pink-500 hover:text-white active:bg-pink-600 font-bold uppercase px-4 py-1 rounded outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button"},n(e.__("Download Old")),1)])):k("",!0),o("input",{type:"file",multiple:"",onChange:r[3]||(r[3]=(...l)=>u.attachment&&u.attachment(...l)),class:w([e.$page.props.errors.document?"border-red-500 dark:border-red-500":"","pl-4 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"]),id:"document",name:"document",accept:"image/*, pdf/*, doc/*",placeholder:""},null,34),o("div",ae,n(e.__("Supported extension"))+" .pdf, .doc, .docx, .zip, .jpeg, .png ",1),t(i,{error:e.$page.props.errors.document},null,8,["error"])]),o("div",le,[t(s,{for:"message",value:"Message To Recipient",required:!1}),t(C,{id:"message",modelValue:a.form.message,"onUpdate:modelValue":r[4]||(r[4]=l=>a.form.message=l),type:"text",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Message To Recipient"),error:e.$page.props.errors.message},null,8,["modelValue","placeholder","error"]),t(i,{error:e.$page.props.errors.message},null,8,["error"])])])]),o("div",se,[o("div",ie,[o("div",de,[o("div",ne,[o("div",ue,n(e.__("Total Amount")),1),o("div",ce,n(e.convertAmount(a.form.total_amount)),1)])])])])]),o("div",pe,[o("div",me,[o("div",ge,[t(s,{for:"recipient",value:e.__("Invoice Type"),class:"ml-1 mt-3 mb-1",required:!0},null,8,["value"]),o("div",_e,[o("input",{onClick:r[5]||(r[5]=l=>u.recurringOption(!1)),checked:!a.form.recurring,id:"one_time_invoice",type:"radio",name:"one_time_invoice",class:"text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,fe),o("label",ve,n(e.__("One Time Invoice")),1),o("input",{onClick:r[6]||(r[6]=l=>u.recurringOption(!0)),checked:a.form.recurring,id:"recurring_invoice",type:"radio",name:"recurring_invoice",class:"text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,be),o("label",he,n(e.__("Recurring Invoice")),1)])]),o("div",ye,[a.form.recurring?(g(),_("div",ke,[t(s,{for:"recurring_days",value:"Repeat Every",required:!0}),o("div",we,[t(v,{id:"recurring_days",modelValue:a.form.recurring_days,"onUpdate:modelValue":r[7]||(r[7]=l=>a.form.recurring_days=l),type:"number",class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Days"),error:e.$page.props.errors.recurring_days},null,8,["modelValue","placeholder","error"])]),t(i,{error:e.$page.props.errors.recurring_days},null,8,["error"])])):k("",!0)]),o("div",Ve,[t(s,{for:"currency",value:"Select Currency",class:"ml-1 mb-1",required:!0}),o("div",De,[t(V,{id:"currency","close-on-select":!0,"can-clear":!1,searchable:!0,modelValue:a.form.currency,"onUpdate:modelValue":r[8]||(r[8]=l=>a.form.currency=l),"create-option":!1,placeholder:e.__("Currency"),options:c.currencies.map(l=>({value:l.code,label:l.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"]),t(i,{error:e.$page.props.errors.user},null,8,["error"])])]),o("div",Ie,[t(s,{for:"recipient",value:"Select Recipient",class:"ml-1 mb-1",required:!0}),o("div",Se,[o("div",null,[o("img",{class:"h-12 w-16 rounded-lg",src:a.selected_user_image,alt:"Recipient image"},null,8,Ce)]),o("div",qe,[t(V,{onChange:r[9]||(r[9]=l=>u.getImage()),id:"recipient",modelValue:a.form.user,"onUpdate:modelValue":r[10]||(r[10]=l=>a.form.user=l),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:e.__("Select Recipient"),options:c.users.data,autocomplete:"off"},null,8,["modelValue","placeholder","options"]),t(i,{error:e.$page.props.errors.user},null,8,["error"])])])])]),o("div",Ue,[o("div",Te,[o("div",Ae,[t(s,{for:"invoice_title",value:"Invoice Title",required:!0}),t(v,{id:"invoice_title",modelValue:a.form.title,"onUpdate:modelValue":r[11]||(r[11]=l=>a.form.title=l),type:"text",class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Invoice Title"),error:e.$page.props.errors.title},null,8,["modelValue","placeholder","error"]),t(i,{error:e.$page.props.errors.title},null,8,["error"])]),o("div",Me,[t(s,{for:"invoice_number",value:"Invoice No",required:!0}),t(v,{id:"invoice_number",modelValue:a.form.invoice_number,"onUpdate:modelValue":r[12]||(r[12]=l=>a.form.invoice_number=l),type:"text",class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Invoice No"),error:e.$page.props.errors.invoice_number},null,8,["modelValue","placeholder","error"]),t(i,{error:e.$page.props.errors.invoice_number},null,8,["error"])]),o("div",Oe,[t(s,{for:"paid",value:"Status",required:!1}),o("label",Re,[L(o("input",{type:"checkbox",value:"paid","onUpdate:modelValue":r[13]||(r[13]=l=>a.form.status=l),id:"paid",name:"",class:"w-4 h-4 text-blue-600 rounded-lg bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:border-gray-600"},null,512),[[x,a.form.status]]),o("label",Ee,n(e.__("Paid")),1)])]),o("div",Be,[o("div",Ne,[t(s,{for:"invoice_date",value:"Invoice Date",required:!0}),t(D,{class:w([e.$page.props.errors.date?"ant-datepicker-custom-border":"","ant-datepicker-custom dark:bg-gray-700 dark:border-gray-700"]),name:"date",format:e.getDateTimeFormat(),value:a.date_value,"onUpdate:value":r[14]||(r[14]=l=>a.date_value=l),placeholder:e.__("Select Date")},null,8,["class","format","value","placeholder"]),t(i,{error:e.$page.props.errors.date},null,8,["error"])]),o("div",je,[t(s,{for:"due_date_in",value:"Due Date",required:!0}),t(V,{id:"due_date_in",modelValue:a.form.due_date_in,"onUpdate:modelValue":r[15]||(r[15]=l=>a.form.due_date_in=l),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!0,placeholder:e.__("Due Date"),options:a.dueDate,autocomplete:"off"},null,8,["modelValue","placeholder","options"]),t(i,{error:e.$page.props.errors.due_date_in},null,8,["error"])])]),a.form.due_date_in=="date"?(g(),_("div",Fe,[t(s,{for:"invoice_date",value:"Select Specific Date",required:!0}),t(D,{class:w([e.$page.props.errors.due_date?"ant-datepicker-custom-border":"","ant-datepicker-custom dark:bg-gray-700 dark:border-gray-700"]),name:"due_date",format:e.getDateTimeFormat(),value:a.due_date_value,"onUpdate:value":r[16]||(r[16]=l=>a.due_date_value=l),placeholder:e.__("Select Specific Date")},null,8,["class","format","value","placeholder"]),t(i,{error:e.$page.props.errors.due_date},null,8,["error"])])):k("",!0)])])])]),t(S,{loading:a.loading,type:"submit",cssClass:"w-full mt-3",theme:"primary"},{default:p(()=>[y(n(e.__("Edit Invoice")),1)]),_:1},8,["loading"])],32)]),t(M,{visible:a.visible,"onUpdate:visible":r[20]||(r[20]=l=>a.visible=l),title:e.__("Recurring Invoice Schedule"),onOk:u.hide},{footer:p(()=>[t(A,{key:"back",onClick:u.hide},{default:p(()=>[y(n(e.__("Save")),1)]),_:1},8,["onClick"])]),default:p(()=>[o("div",Ye,[o("div",Le,[o("div",xe,[o("div",ze,[o("div",Pe,[t(s,{for:"invoice_date",value:"Invoice Start Date",required:!0}),t(D,{class:w([e.$page.props.errors.date?"ant-datepicker-custom-border":"","ant-datepicker-custom dark:bg-gray-700 dark:border-gray-700"]),name:"date",format:e.getDateTimeFormat(),value:a.date_value,"onUpdate:value":r[18]||(r[18]=l=>a.date_value=l),placeholder:e.__("Select Date")},null,8,["class","format","value","placeholder"]),t(i,{error:e.$page.props.errors.date},null,8,["error"])]),o("div",Ke,[t(s,{for:"recurring_days",value:"Repeat Every",required:!0}),o("div",Ge,[t(v,{id:"recurring_days",modelValue:a.form.recurring_days,"onUpdate:modelValue":r[19]||(r[19]=l=>a.form.recurring_days=l),type:"number",class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Days"),error:e.$page.props.errors.recurring_days},null,8,["modelValue","placeholder","error"])]),t(i,{error:e.$page.props.errors.recurring_days},null,8,["error"])])])])])])]),_:1},8,["visible","title","onOk"])]),_:1},8,["title"])}const sr=B(P,[["render",He],["__scopeId","data-v-c93ee80f"]]);export{sr as default};
