import{_ as S}from"./AppLayout.8b90d46b.js";import{T as V,S as T}from"./Student.0df54601.js";import{_ as C,u as O,I as d,o as B,c as H,w as i,a as t,b as a,g as m,t as p,C as L,n as h,r as l}from"./app.9bacd1a0.js";import{s as U}from"./multiselect.5e8a11c6.js";/* empty css                */import"./TopBarMenu.978fcd11.js";import"./CheckCircleIcon.14efd96d.js";import"./shepherd.esm.8b0b6bfa.js";import"./XMarkIcon.db621c27.js";import"./WarningToast.5000d5fb.js";import"./NavLink.7e4b7702.js";import"./PlusCircleIcon.7b47160e.js";import"./UserIcon.2090e4c3.js";import"./Bars3Icon.559bf817.js";const q={components:{AppLayout:S,TeacherComponent:V,Student:T,Multiselect:U},props:{routine:Object,errors:Object,teachers:Object,courses:Object,subjects:Object,workdays:Object},data(){return{options3:[],activationOptions:[{value:1,label:"Weekday 1"},{value:2,label:"Weekday 2"}],form:O({teacher:this.routine?this.routine.teacher_id:null,class:this.routine?this.routine.course_id:null,subject:this.routine?this.routine.subject_id:null,time:[this.routine?d(this.routine.start_time,"HH:mm"):null,this.routine?d(this.routine.end_time,"HH:mm"):null],start_time:null,end_time:null,activation:this.routine?this.routine.activation:null,weekday:this.routine?this.routine.weekday:null,_method:this.routine?"PUT":"POST"}),subjects_all:[],teacher:[]}},watch:{"form.class":{deep:!0,handler(e){this.loadSubjects()}}},mounted(){this.routine&&this.loadSubjects()},created(){for(const[e,r]of Object.entries(this.workdays))this.options3.push({value:e,label:r})},methods:{async submit(){if(this.form.activation||alert("Please select activation!"),this.form.weekday||alert("Please select weekday!"),(await axios.post(route("checkweekend",this.form.weekday))).data){alert("You cannot create a routine on a weekend day.");return}this.form.start_time=d(this.form.time[0]).format("H:m"),this.form.end_time=d(this.form.time[1]).format("H:m"),this.routine?this.form.post(this.route("routine.update",this.routine.id),{preserveScroll:!0,onSuccess:()=>{this.form.reset("teacher","class","subject","time","start_time","end_time","activation","weekday")}}):this.form.post(this.route("routine.store"),{preserveScroll:!0,onSuccess:()=>{this.form.reset("teacher","class","subject","time","start_time","end_time","activation","weekday")}})},async loadSubjects(){this.subjects_all=[];let e=this.form.class,r=await axios.get(route("fetch.subjects",e));this.subjects_all=r.data},async loadTeacher(){let e=this.form.subject,r=await axios.get(route("fetch.teachers",e));r.data?(this.teacher.id=r.data.teacher.id,this.teacher.name=r.data.teacher.name):this.errors.teacher="No Teacher is assigned for this course."}}},W={class:"pb-12"},A={class:"rounded-lg"},N={class:"grid sm:grid-cols-1 md:grid-cols-2 sm:gap-1 md:gap-4"},M={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},P={class:"mb-3"},F={class:"mb-3"},R={class:"mb-3"},D={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},I={class:"mb-3"},z={class:"mb-3"},E={class:"mb-3"};function Y(e,r,f,G,s,v){const b=l("BreadcrumbLink"),g=l("Breadcrumb"),_=l("global-button"),y=l("Link"),k=l("page-header"),n=l("global-label"),c=l("Multiselect"),u=l("input-error"),j=l("a-range-picker"),w=l("AppLayout");return B(),H(w,{title:e.__("Create Routine")},{default:i(()=>[t(g,null,{default:i(()=>[t(b,{href:e.route("routine.index"),title:"Class Schedule"},null,8,["href"]),t(b,{title:"Create Routine"})]),_:1}),a("div",W,[t(k,null,{content:i(()=>[t(y,{"preserve-scroll":"",href:e.route("routine.index")},{default:i(()=>[t(_,{loading:!1,type:"button",theme:"primary"},{default:i(()=>[m(p(e.__("Back To List")),1)]),_:1})]),_:1},8,["href"])]),default:i(()=>[m(p(e.__("Create a New Schedule"))+" ",1)]),_:1}),a("div",A,[a("form",{class:"mt-2",onSubmit:r[6]||(r[6]=L(o=>v.submit(),["prevent"]))},[a("div",N,[a("div",M,[a("div",P,[t(n,{for:"teacher",value:"Select Teacher",required:!0}),t(c,{id:"class",class:"dark:text-gray-900",modelValue:s.form.teacher,"onUpdate:modelValue":r[0]||(r[0]=o=>s.form.teacher=o),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:"Select a teacher",options:f.teachers.map(o=>({value:o.id,label:o.name})),autocomplete:"off"},null,8,["modelValue","options"]),t(u,{error:e.$page.props.errors.teacher},null,8,["error"])]),a("div",F,[t(n,{for:"class",value:"Select Course",required:!0}),t(c,{id:"class",class:h(["dark:text-gray-900",e.$page.props.errors.class?"border-custom ":""]),modelValue:s.form.class,"onUpdate:modelValue":r[1]||(r[1]=o=>s.form.class=o),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:"Select a course",options:f.courses.map(o=>({value:o.id,label:o.name})),autocomplete:"off"},null,8,["class","modelValue","options"]),t(u,{error:e.$page.props.errors.class},null,8,["error"])]),a("div",R,[t(n,{for:"subject",value:"Select Subject",required:!0}),t(c,{id:"subject",class:h(["dark:text-gray-900",e.$page.props.errors.subject?"border-custom ":""]),modelValue:s.form.subject,"onUpdate:modelValue":r[2]||(r[2]=o=>s.form.subject=o),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:"Select a subject",options:s.subjects_all.map(o=>({value:o.id,label:o.name})),autocomplete:"off"},null,8,["class","modelValue","options"]),t(u,{error:e.$page.props.errors.subject},null,8,["error"])])]),a("div",D,[a("div",I,[t(n,{for:"activation",value:e.__("Select Activation"),required:!0},null,8,["value"]),t(c,{id:"activation",class:"dark:text-gray-900",modelValue:s.form.activation,"onUpdate:modelValue":r[3]||(r[3]=o=>s.form.activation=o),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:e.__("Select Activation"),options:s.activationOptions,autocomplete:"off"},null,8,["modelValue","placeholder","options"]),t(u,{error:e.$page.props.errors.activation},null,8,["error"])]),a("div",z,[t(n,{for:"weekday",value:e.__("Select Weekdays"),required:!0},null,8,["value"]),t(c,{id:"weekday",class:"dark:text-gray-900",modelValue:s.form.weekday,"onUpdate:modelValue":r[4]||(r[4]=o=>s.form.weekday=o),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:e.__("Select Weekdays"),options:s.options3,autocomplete:"off"},null,8,["modelValue","placeholder","options"]),t(u,{error:e.$page.props.errors.weekday},null,8,["error"])]),a("div",E,[t(n,{for:"time",value:e.__("Schedule Time"),required:!0},null,8,["value"]),t(j,{picker:"time",style:{},class:h([e.$page.props.errors.time?"border-custom":"","custom-input dark:bg-gray-700 dark:border-gray-700 dark:text-gray-400"]),name:"time","disabled-date":e.disabledDate,placeholder:["Start Time","End Time"],"disabled-time":e.disabledRangeTime,value:s.form.time,"onUpdate:value":r[5]||(r[5]=o=>s.form.time=o),format:"HH:mm"},null,8,["class","disabled-date","disabled-time","value"]),t(u,{error:e.$page.props.errors.time},null,8,["error"])])])]),t(_,{loading:s.form.processing,type:"submit",cssClass:"w-full mt-3",theme:"primary"},{default:i(()=>[m(p(e.__("Save")),1)]),_:1},8,["loading"])],32)])])]),_:1},8,["title"])}const ie=C(q,[["render",Y],["__scopeId","data-v-54367c79"]]);export{ie as default};
