import{_ as R,r as V}from"./AppLayout.f7869522.js";import{_ as q,N as M,o as d,c as w,w as l,a as o,b as a,g as u,t as i,e as f,F as O,i as D,r as s}from"./app.eb4bca63.js";import{s as T}from"./multiselect.bd328a4e.js";/* empty css                */import"./TopBarMenu.57ba7e85.js";import"./CheckCircleIcon.c15b336b.js";import"./shepherd.esm.28e46ee4.js";import"./XMarkIcon.c835eea2.js";import"./WarningToast.ca887990.js";import"./NavLink.88c501bd.js";import"./PlusCircleIcon.b3c660e0.js";import"./UserIcon.11494925.js";import"./Bars3Icon.9d3eeab9.js";const j={components:{AppLayout:R,EnvelopeIcon:V,NothingFound:M,Multiselect:T},props:{results:{type:Array,required:!0},exams:{type:Array,required:!0}},data(){return{visible:!1,loading:!1,update:!1,form:this.$inertia.form({exam:"",attachment:"",id:""})}},methods:{showModal(){this.visible=!0},handleOk(){this.visible=!1,this.update=!1,this.form.id="",this.form.exam="",this.form.attachment=""},onFileChange(e){const n=e.target.files[0];this.form.attachment=n},editData(e){this.update=!0,this.form.id=e.id,this.form.exam=e.exam_id,this.visible=!0},submit(){this.update?this.form.post(this.route("result.update",this.form.id),{onSuccess:e=>{this.form.exam="",this.form.attachment="",this.form.id="",this.form.reset(),this.visible=!1}}):this.form.post(this.route("result.store"),{onSuccess:e=>{this.form.exam="",this.form.attachment="",this.form.id="",this.form.reset(),this.visible=!1}})}}},I={key:0},P={class:"mt-2 ml-4 mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between"},U={class:"text-sm text-neutral-500"},z={class:"mb-1.5 text-xl font-semibold"},G={class:"flex gap-2 items-center"},H=["href"],J={class:"flex gap-2"},K={class:"dark:bg-gray-800 rounded-lg"},Q={class:"mb-3"},W={class:"flex justify-between font-bold text-xs ml-1 dark:text-gray-400 mt-0.5"},X={href:"/files/result.xlsx",download:""};function Y(e,n,c,Z,r,m){const C=s("BreadcrumbLink"),E=s("Breadcrumb"),p=s("global-button"),B=s("page-header"),F=s("NothingFound"),h=s("global-label"),N=s("Multiselect"),_=s("input-error"),S=s("global-input"),A=s("a-modal"),L=s("AppLayout");return d(),w(L,{title:e.__("Exam & Results")},{default:l(()=>[o(E,null,{default:l(()=>[o(C,{title:e.__("Exam & Results")},null,8,["title"])]),_:1}),a("div",null,[o(B,null,{content:l(()=>[o(p,{loading:!1,type:"button",onClick:n[0]||(n[0]=t=>m.showModal()),theme:"primary"},{default:l(()=>[u(i(e.__("Publish New Result")),1)]),_:1})]),default:l(()=>[u(i(e.__("Exam & Results"))+" ",1)]),_:1}),c.results&&c.results.length?(d(),f("ol",I,[(d(!0),f(O,null,D(c.results,t=>{var b,g,x,v,y,k;return d(),f("li",{class:"p-2 bg-white dark:bg-gray-800 mt-2",key:t.id},[a("div",P,[a("div",null,[a("p",U,i((g=e.formatTime((b=t==null?void 0:t.exam)==null?void 0:b.start_date))!=null?g:"")+" - "+i((v=e.formatTime((x=t==null?void 0:t.exam)==null?void 0:x.end_date))!=null?v:""),1),a("h4",z,i((k=(y=t==null?void 0:t.exam)==null?void 0:y.name)!=null?k:""),1)]),a("div",G,[a("a",{href:t.attachment_url,download:""},[o(p,{type:"submit",class:"text-white bg-gray-500 dark:bg-gray-500 hover:bg-gray-500"},{default:l(()=>[u(i(e.__("Download Sheets")),1)]),_:1})],8,H)])])])}),128))])):(d(),w(F,{key:1,asShow:"div"}))]),o(A,{visible:r.visible,"onUpdate:visible":n[2]||(n[2]=t=>r.visible=t),width:"600px",title:r.update?e.__("Edit Exam Result"):e.__("Publish Exam Result"),onOk:m.handleOk},{footer:l(()=>[a("div",J,[o(p,{loading:r.form.processing,type:"button",onClick:m.submit,theme:"primary"},{default:l(()=>[u(i(e.__("Save")),1)]),_:1},8,["loading","onClick"]),o(p,{loading:!1,type:"button",onClick:m.handleOk,theme:"outline-danger"},{default:l(()=>[u(i(e.__("Cancel")),1)]),_:1},8,["onClick"])])]),default:l(()=>[a("form",K,[a("div",Q,[o(h,{for:"class",value:"Select Exam",required:!0}),o(N,{id:"exam","close-on-select":!0,"can-clear":!1,searchable:!0,modelValue:r.form.exam,"onUpdate:modelValue":n[1]||(n[1]=t=>r.form.exam=t),"create-option":!1,placeholder:e.__("Exam"),options:c.exams.map(t=>({value:t.id,label:t.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"]),o(_,{error:e.$page.props.errors.exam},null,8,["error"])]),a("div",null,[o(h,{for:"name",value:"Attachment",required:!r.update},null,8,["required"]),o(S,{accept:".xlsx",type:"file",id:"name",name:"name",class:"mt-1 block w-full dark:bg-gray-700",onChange:m.onFileChange},null,8,["onChange"]),o(_,{error:e.$page.props.errors.attachment},null,8,["error"]),a("div",W,[a("span",null,i(e.__("Supported extension"))+" .xlsx",1),a("a",X,i(e.__("Download Example File")),1)])])])]),_:1},8,["visible","title","onOk"])]),_:1},8,["title"])}const ce=q(j,[["render",Y]]);export{ce as default};
