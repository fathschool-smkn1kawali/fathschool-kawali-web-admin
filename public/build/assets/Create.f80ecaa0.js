import{_ as Y}from"./AppLayout.f7869522.js";import{s as O}from"./multiselect.bd328a4e.js";import{_ as A,I as _,o as f,c as B,w as m,a as t,b as o,g as h,t as u,C as j,e as b,i as F,F as L,j as k,n as w,s as E,D as z,r as n}from"./app.eb4bca63.js";/* empty css                */import{r as K}from"./TrashIcon.e473cb8e.js";import"./TopBarMenu.57ba7e85.js";import"./CheckCircleIcon.c15b336b.js";import"./shepherd.esm.28e46ee4.js";import"./XMarkIcon.c835eea2.js";import"./WarningToast.ca887990.js";import"./NavLink.88c501bd.js";import"./PlusCircleIcon.b3c660e0.js";import"./UserIcon.11494925.js";import"./Bars3Icon.9d3eeab9.js";const P={components:{AppLayout:Y,Multiselect:O,TrashIcon:K},props:{invoice_no:Object,users:Object,currencies:Object},data(){return{loading:!1,visible:!1,transaction_items:[1],selected_user_image:this.users.data[0].image,date_value:_(),due_date_value:_(),form:{user:this.users.data[0].value,date:_(),due_date_in:"",due_date:_(),amount:[],description:[],message:"",invoice_number:this.invoice_no,title:"",currency:this.$page.props.setting.app_currency,attachments:[],status:"",recurring:!1,recurring_days:"",total_amount:0},dueDate:[{value:"0",label:"No Due Date"},{value:"date",label:"On Specific Date"},{value:"10",label:"In 10 Days"},{value:"15",label:"In 15 Days"},{value:"30",label:"In 30 Days"}]}},watch:{date_value:{deep:!0,handler(e,r){if(e){let s=_(e).format("YYYY-MM-DD");this.form.date=s}else this.form.date=null}},due_date_value:{deep:!0,handler(e,r){if(e){let s=_(e).format("YYYY-MM-DD");this.form.due_date=s}else this.form.due_date=null}},form:{deep:!0,handler(e,r){this.totalSum()}}},mounted(){},methods:{submit(){this.loading=!0,this.$inertia.post(this.route("invoice.store"),this.form,{onFinish:e=>{this.loading=!1}})},addNew(){let e=this.transaction_items.length;this.transaction_items.push(e+1)},totalSum(){setInterval(()=>{let e=0;for(let r=0;r<this.form.amount.length;r++)e=parseInt(e)+parseInt(this.form.amount[r]);this.form.total_amount=this.form.amount.length>0?parseFloat(e).toFixed(2):0},1e3)},removeItem(e,r){for(var s=this.transaction_items,p=0;p<s.length;p++)s[p]===e&&s.splice(p,1);this.form.item.splice(r,1),this.form.amount.splice(r,1),this.form.description.splice(r,1),this.totalSum()},getImage(){setTimeout(()=>{let e=this.form.user,r="";this.users.data.forEach(s=>{s.value==e&&(this.selected_user_image=s.image,r=s,r=s.label)}),this.generateInvoiceTitle(r)},100)},attachment(e){for(let r=0;r<e.target.files.length;r++)this.form.attachments.push(e.target.files[r])},recurringOption(e){this.form.recurring=e,this.visible=e},hide(){this.visible=!1},generateInvoiceTitle(e){if(!this.form.title.length>0){let r=this.form.recurring?"Recurring":"",s=_().format("YYYY-MM-DD"),p=e+" "+r+" "+s;this.form.title=p}}}},G={class:"pb-12"},H={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},J={class:"col-span-2"},Q={class:"bg-white dark:bg-gray-800 rounded-lg"},W={class:"w-full p-6 dark:border-gray-700"},X={class:"flex justify-end items-end"},Z=["onClick"],x={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$={class:"mt-2"},ee={class:"bg-white mt-2 dark:bg-gray-800 rounded-lg"},re={class:"w-full p-6 dark:border-gray-700"},oe={class:"mt-4"},te={key:0},le={class:"font-bold text-xs ml-1 dark:text-gray-400 mt-0.5"},ae={class:"mt-4"},se={class:"bg-white mt-2 dark:bg-gray-800 rounded-lg"},ie={class:"w-full p-6 dark:border-gray-700"},de={class:"mt-2"},ne={class:"flex justify-between items-center"},ue={class:"font-extrabold text-xl dark:text-gray-400"},ce={class:"font-extrabold text-xl dark:text-gray-400"},me={class:"col-span-1"},pe={class:"bg-white dark:bg-gray-800 rounded-lg mb-2"},ge={class:"px-4 py-2 dark:border-gray-700"},_e={class:"flex items-center pl-4 rounded-lg border border-gray-200 dark:border-gray-700"},fe=["checked"],be={for:"one_time_invoice",class:"py-2.5 ml-2 w-full text-sm font-medium text-gray-900 dark:text-gray-300"},ve=["checked"],ye={for:"recurring_invoice",class:"py-2.5 ml-2 w-full text-sm font-medium text-gray-900 dark:text-gray-300"},he={class:"px-4 py-0 dark:border-gray-700"},ke={key:0,class:"mb-3"},we={class:"flex gap-3"},Ve={class:"px-4 py-0 dark:border-gray-700"},De={class:"w-full"},Ie={class:"w-full px-4 py-2 dark:border-gray-700"},Ce={class:"mb-3 flex items-center gap-6"},Se=["src"],qe={class:"w-full"},Ue={class:"bg-white dark:bg-gray-800 rounded-lg"},Te={class:"w-full p-6 dark:border-gray-700"},Me={class:"mb-3"},Ne={class:"mb-3"},Re={class:"mb-3"},Ye={for:"paid",class:"w-full flex items-center pl-4 border rounded-lg dark:bg-gray-700 border-gray-200 dark:border-gray-700"},Oe={for:"paid",class:"py-2.5 ml-2 w-full text-sm font-medium text-gray-900 dark:text-gray-300 dark:bg-gray-700"},Ae={class:"grid grid-cols-2 gap-2"},Be={class:"mb-3"},je={class:"mb-3"},Fe={key:0,class:"mb-3"},Le={class:"dark:bg-gray-800 rounded-lg dark:text-gray-400"},Ee={class:"w-full"},ze={class:"bg-white dark:bg-gray-800 rounded-lg"},Ke={class:"grid grid-cols-2 gap-2 dark:border-gray-700"},Pe={class:"mb-3"},Ge={class:"mb-3"},He={class:"flex gap-3"};function Je(e,r,s,p,l,c){const I=n("BreadcrumbLink"),q=n("Breadcrumb"),C=n("global-button"),U=n("page-header"),T=n("trash-icon"),i=n("global-label"),S=n("global-textarea"),d=n("input-error"),v=n("global-input"),V=n("Multiselect"),D=n("a-date-picker"),M=n("a-button"),N=n("a-modal"),R=n("AppLayout");return f(),B(R,{title:e.__("New Invoice")},{default:m(()=>[t(q,null,{default:m(()=>[t(I,{href:e.route("invoice.index"),title:"Recurring Invoice"},null,8,["href"]),t(I,{title:e.__("New Invoice")},null,8,["title"])]),_:1}),o("div",G,[t(U,null,{content:m(()=>[t(C,{loading:!1,type:"link",url:e.route("invoice.index"),theme:"primary"},{default:m(()=>[h(u(e.__("Back To List")),1)]),_:1},8,["url"])]),default:m(()=>[h(u(e.__("New Invoice"))+" ",1)]),_:1}),o("form",{onSubmit:r[17]||(r[17]=j(a=>c.submit(),["prevent"])),enctype:"multipart/form-data"},[o("div",H,[o("div",J,[o("div",Q,[o("div",W,[(f(!0),b(L,null,F(l.transaction_items,(a,g)=>(f(),b("div",{key:g,class:"mb-4"},[o("div",X,[g!=0?(f(),b("button",{key:0,type:"button",onClick:y=>c.removeItem(a,g),class:"bg-red-500 hover:bg-red-500 rounded-full p-1",id:"testRemoveItem"},[t(T,{class:"w-6 h-6 text-white"})],8,Z)):k("",!0)]),o("div",x,[o("div",null,[t(i,{for:"description",value:"Description",required:!1}),t(S,{cols:"30",rows:"1",id:"description",modelValue:l.form.description[g],"onUpdate:modelValue":y=>l.form.description[g]=y,type:"text",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Description"),error:e.$page.props.errors.description},null,8,["modelValue","onUpdate:modelValue","placeholder","error"]),t(d,{error:e.$page.props.errors.description},null,8,["error"])]),o("div",null,[t(i,{for:"amount",value:"Amount",required:!0}),t(v,{onKeyup:r[0]||(r[0]=y=>c.totalSum()),id:"amount",modelValue:l.form.amount[g],"onUpdate:modelValue":y=>l.form.amount[g]=y,type:"number",class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Amount"),error:e.$page.props.errors.amount},null,8,["modelValue","onUpdate:modelValue","placeholder","error"]),t(d,{error:e.$page.props.errors.amount},null,8,["error"])])])]))),128)),o("div",$,[o("div",{onClick:r[1]||(r[1]=a=>c.addNew()),class:"cursor-pointer text-lg font-bold text-blue-500",id:"testAddItem"}," +"+u(e.__("Add Item")),1)])])]),o("div",ee,[o("div",re,[o("div",oe,[t(i,{for:"document",value:e.__("Attachments"),required:!1},null,8,["value"]),e.transaction&&e.transaction.document?(f(),b("div",te,[o("button",{onClick:r[2]||(r[2]=a=>e.download(e.transaction.document)),class:"text-pink-500 border border-pink-500 hover:bg-pink-500 hover:text-white active:bg-pink-600 font-bold uppercase px-4 py-1 rounded outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button"},u(e.__("Download Old")),1)])):k("",!0),o("input",{type:"file",multiple:"",onChange:r[3]||(r[3]=(...a)=>c.attachment&&c.attachment(...a)),class:w([e.$page.props.errors.document?"border-red-500 dark:border-red-500":"","pl-4 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"]),id:"document",name:"document",accept:"image/*, pdf/*, doc/*"},null,34),o("div",le,u(e.__("Supported extension"))+" .pdf, .doc, .docx, .zip, .jpeg, .png ",1),t(d,{error:e.$page.props.errors.document},null,8,["error"])]),o("div",ae,[t(i,{for:"message",value:e.__("Message To Recipient"),required:!1},null,8,["value"]),t(S,{id:"message",modelValue:l.form.message,"onUpdate:modelValue":r[4]||(r[4]=a=>l.form.message=a),type:"text",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Message To Recipient"),error:e.$page.props.errors.message},null,8,["modelValue","placeholder","error"]),t(d,{error:e.$page.props.errors.message},null,8,["error"])])])]),o("div",se,[o("div",ie,[o("div",de,[o("div",ne,[o("div",ue,u(e.__("Total Amount")),1),o("div",ce,u(e.convertAmount(l.form.total_amount)),1)])])])])]),o("div",me,[o("div",pe,[o("div",ge,[t(i,{for:"recipient",value:"Invoice Type",class:"ml-1 mt-3 mb-1",required:!0}),o("div",_e,[o("input",{onClick:r[5]||(r[5]=a=>c.recurringOption(!1)),checked:!l.form.recurring,id:"one_time_invoice",type:"radio",name:"one_time_invoice",class:"text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,fe),o("label",be,u(e.__("One Time Invoice")),1),o("input",{onClick:r[6]||(r[6]=a=>c.recurringOption(!0)),checked:l.form.recurring,id:"recurring_invoice",type:"radio",name:"recurring_invoice",class:"text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,ve),o("label",ye,u(e.__("Recurring Invoice")),1)])]),o("div",he,[l.form.recurring?(f(),b("div",ke,[t(i,{for:"recurring_days",value:e.__("Repeat Every"),required:!0},null,8,["value"]),o("div",we,[t(v,{id:"recurring_days",modelValue:l.form.recurring_days,"onUpdate:modelValue":r[7]||(r[7]=a=>l.form.recurring_days=a),type:"number",class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Days"),error:e.$page.props.errors.recurring_days},null,8,["modelValue","placeholder","error"])]),t(d,{error:e.$page.props.errors.recurring_days},null,8,["error"])])):k("",!0)]),o("div",Ve,[t(i,{for:"currency",value:e.__("Select Currency"),class:"ml-1 mb-1",required:!0},null,8,["value"]),o("div",De,[t(V,{id:"currency","close-on-select":!0,"can-clear":!1,searchable:!0,modelValue:l.form.currency,"onUpdate:modelValue":r[8]||(r[8]=a=>l.form.currency=a),"create-option":!1,placeholder:e.__("Currency"),options:s.currencies.map(a=>({value:a.code,label:a.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"]),t(d,{error:e.$page.props.errors.user},null,8,["error"])])]),o("div",Ie,[t(i,{for:"recipient",value:e.__("Select Recipient"),class:"ml-1 mb-1",required:!0},null,8,["value"]),o("div",Ce,[o("div",null,[o("img",{class:"h-12 w-16 rounded-lg",src:l.selected_user_image,alt:"Recipient image"},null,8,Se)]),o("div",qe,[t(V,{onChange:r[9]||(r[9]=a=>c.getImage()),id:"recipient",modelValue:l.form.user,"onUpdate:modelValue":r[10]||(r[10]=a=>l.form.user=a),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:e.__("Select Recipient"),options:s.users.data,autocomplete:"off"},null,8,["modelValue","placeholder","options"]),t(d,{error:e.$page.props.errors.user},null,8,["error"])])])])]),o("div",Ue,[o("div",Te,[o("div",Me,[t(i,{for:"invoice_title",value:e.__("Invoice Title"),required:!0},null,8,["value"]),t(v,{id:"invoice_title",modelValue:l.form.title,"onUpdate:modelValue":r[11]||(r[11]=a=>l.form.title=a),type:"text",class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Invoice Title"),error:e.$page.props.errors.title},null,8,["modelValue","placeholder","error"]),t(d,{error:e.$page.props.errors.title},null,8,["error"])]),o("div",Ne,[t(i,{for:"invoice_number",value:e.__("Invoice Number"),required:!0},null,8,["value"]),t(v,{id:"invoice_number",modelValue:l.form.invoice_number,"onUpdate:modelValue":r[12]||(r[12]=a=>l.form.invoice_number=a),type:"text",class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Invoice No"),error:e.$page.props.errors.invoice_number},null,8,["modelValue","placeholder","error"]),t(d,{error:e.$page.props.errors.invoice_number},null,8,["error"])]),o("div",Re,[t(i,{for:"paid",value:"Status",required:!1}),o("label",Ye,[E(o("input",{checked:"",type:"checkbox",value:"paid","onUpdate:modelValue":r[13]||(r[13]=a=>l.form.status=a),id:"paid",name:"",class:"w-4 h-4 text-blue-600 rounded-lg bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:border-gray-600"},null,512),[[z,l.form.status]]),o("label",Oe,u(e.__("Paid")),1)])]),o("div",Ae,[o("div",Be,[t(i,{for:"invoice_date",value:e.__("Invoice Date"),required:!0},null,8,["value"]),t(D,{class:w([e.$page.props.errors.date?"ant-datepicker-custom-border":"","ant-datepicker-custom dark:bg-gray-700 dark:border-gray-700"]),name:"date",format:e.getDateTimeFormat(),value:l.date_value,"onUpdate:value":r[14]||(r[14]=a=>l.date_value=a),placeholder:"Select Date"},null,8,["class","format","value"]),t(d,{error:e.$page.props.errors.date},null,8,["error"])]),o("div",je,[t(i,{for:"due_date_in",value:"Due Date",required:!0}),t(V,{id:"due_date_in",modelValue:l.form.due_date_in,"onUpdate:modelValue":r[15]||(r[15]=a=>l.form.due_date_in=a),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!0,placeholder:e.__("Due Date"),options:l.dueDate,autocomplete:"off"},null,8,["modelValue","placeholder","options"]),t(d,{error:e.$page.props.errors.due_date_in},null,8,["error"])])]),l.form.due_date_in=="date"?(f(),b("div",Fe,[t(i,{for:"invoice_date",value:"Select Specific Date",required:!0}),t(D,{class:w([e.$page.props.errors.due_date?"ant-datepicker-custom-border":"","ant-datepicker-custom dark:bg-gray-700 dark:border-gray-700"]),name:"due_date",format:e.getDateTimeFormat(),value:l.due_date_value,"onUpdate:value":r[16]||(r[16]=a=>l.due_date_value=a),placeholder:e.__("Select Specific Date")},null,8,["class","format","value","placeholder"]),t(d,{error:e.$page.props.errors.due_date},null,8,["error"])])):k("",!0)])])])]),t(C,{loading:l.loading,type:"submit",cssClass:"w-full mt-3",theme:"primary"},{default:m(()=>[h(u(e.__("Create New Invoice")),1)]),_:1},8,["loading"])],32)]),t(N,{visible:l.visible,"onUpdate:visible":r[20]||(r[20]=a=>l.visible=a),title:e.__("Recurring Invoice Schedule"),onOk:c.hide},{footer:m(()=>[t(M,{key:"back",onClick:c.hide},{default:m(()=>[h(u(e.__("Save")),1)]),_:1},8,["onClick"])]),default:m(()=>[o("div",Le,[o("div",Ee,[o("div",ze,[o("div",Ke,[o("div",Pe,[t(i,{for:"invoice_date",value:"Invoice Start Date",required:!0}),t(D,{class:w([e.$page.props.errors.date?"ant-datepicker-custom-border":"","ant-datepicker-custom dark:bg-gray-700 dark:border-gray-700"]),name:"date",format:e.getDateTimeFormat(),value:l.date_value,"onUpdate:value":r[18]||(r[18]=a=>l.date_value=a),placeholder:e.__("Select Date")},null,8,["class","format","value","placeholder"]),t(d,{error:e.$page.props.errors.date},null,8,["error"])]),o("div",Ge,[t(i,{for:"recurring_days",value:"Repeat Every",required:!0}),o("div",He,[t(v,{id:"recurring_days",modelValue:l.form.recurring_days,"onUpdate:modelValue":r[19]||(r[19]=a=>l.form.recurring_days=a),type:"number",class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Days"),error:e.$page.props.errors.recurring_days},null,8,["modelValue","placeholder","error"])]),t(d,{error:e.$page.props.errors.recurring_days},null,8,["error"])])])])])])]),_:1},8,["visible","title","onOk"])]),_:1},8,["title"])}const dr=A(P,[["render",Je],["__scopeId","data-v-9a391e94"]]);export{dr as default};
