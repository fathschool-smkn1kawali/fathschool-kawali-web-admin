import{o as a,e as u,b as o,_ as H,N as K,u as S,Z as X,c,w as l,a as r,i as w,F as x,g as b,t as n,j as A,C as Y,r as s,n as T}from"./app.0a62d3b4.js";import{_ as $}from"./AppLayout.770f3a27.js";import{T as J}from"./ToolTip.8e71f02f.js";import{P as Q}from"./Pagination.c0daf4d5.js";import W from"./Show.b649f045.js";import{s as ee}from"./multiselect.8c75aa1d.js";/* empty css                */import{T as te}from"./TdUserShow.938c8a75.js";import{_ as re}from"./Modal.44ca4dea.js";import{r as oe}from"./TrashIcon.83bfcc12.js";import{c as se}from"./TopBarMenu.e7daab03.js";import{r as le}from"./PencilSquareIcon.d41cd564.js";import{r as ae}from"./EyeIcon.bc260d7f.js";import{r as ie}from"./Square2StackIcon.6c59e47d.js";import{r as ne}from"./MagnifyingGlassIcon.3a63cac2.js";import"./WarningToast.122671e2.js";import"./NavLink.c2694d47.js";import"./shepherd.esm.dbe9c7a3.js";import"./PlusCircleIcon.48513466.js";import"./UserIcon.fbaec5d8.js";import"./CheckCircleIcon.1814ecfe.js";import"./Bars3Icon.f5cb8044.js";import"./XMarkIcon.7c18cf19.js";function de(e,i){return a(),u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})])}const ce={components:{AppLayout:$,ToolTip:J,TrashIcon:oe,UsersIcon:se,PencilSquareIcon:le,Pagination:Q,UserGroupIcon:de,TdUserShow:te,EyeIcon:ae,Square2StackIcon:ie,MagnifyingGlassIcon:ne,ShowModal:W,Multiselect:ee,NothingFound:K,ExportModal:re},props:{users:Object,admins:Number,parents:Number,students:Number,teachers:Number,administrations:Number,others:Number,query:Object},data(){var e,i;return{visible:!1,show_user:"",export_data:S({type:"Excel",course:"all"}),filter:S({keyword:(e=this.query.keyword)!=null?e:"",query:(i=this.query.query)!=null?i:"all"}),stats:[{data:this.admins,title:"Total Admins",query:"admin"},{data:this.parents,title:"Total Parents",query:"parent"},{data:this.students,title:"Total Students",query:"student"},{data:this.teachers,title:"Total Teachers",query:"teacher"},{data:this.administrations,title:"Total Administrations",query:"administration"},{data:this.others,title:"Others",query:"other"}]}},methods:{destroy(e){if(confirm("Are you sure ?"))this.$inertia.delete(this.route("users.destroy",e));else return!1},show(e){this.show_user=e,this.visible=!0},hide(e){this.visible=!1},filterData(){this.filter.get(this.route("users.index"),{preserveScroll:!0})},updateStatus(e,i){let p=e.target.checked;this.$inertia.post(this.route("user.status.update",i),{status:p},{preserveScroll:!0})},exportSubmit(){this.loading=!0;let e={};this.filter.query!==""&&(e.query=this.filter.query),X({url:this.route("all.user.export"),method:"POST",data:{...this.export_data,...e},headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},responseType:"blob"}).then(i=>{console.log("asdjiwfuqhiqjdqwjdoiwqjdiow"),this.export_data.type;var p=window.URL.createObjectURL(new Blob([i.data])),g=document.createElement("a");g.href=p,g.setAttribute("download","allteacher-report.xlsx"),document.body.appendChild(g),g.click(),this.loading=!1,this.visible=!1}).catch(i=>{this.loading=!1,this.visible=!1})}}},ue={class:"flex gap-6 flex-wrap lg:flex-nowrap w-full mb-3"},pe={class:"p-3 text-blue-600 bg-blue-100 dark:bg-blue-500/20 rounded-full"},he={class:"text-2xl mb-0 font-medium text-gray-900 dark:text-gray-400"},me={class:"text-sm mb-0 text-gray-400"},_e={class:"mb-3"},fe={class:"flex col-span-4"},be={class:"relative w-full"},ge={type:"submit",class:"absolute top-6 rtl:left-0 rtl:right-auto right-0 p-2.5 text-sm font-medium text-white bg-blue-700 rtl:rounded-r-0 rtl:rounded-l-lg rounded-r-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},ye={class:"col-span-4 mt-0.5"},ke={class:"col-span-1 md:mt-5"},ve={class:"py-4 px-5"},we={class:"py-4 px-5"},xe={class:"py-4 px-5"},qe={width:"10%",class:"py-4 px-5"},Se={scope:"row",class:"flex items-center py-4 px-5 text-gray-900 whitespace-nowrap dark:text-white"},Ae={class:"py-4 px-5"},Te={class:"text-xs mt-1"},Ce={class:"py-4 px-5"},Ne={key:0,class:"text-red-500 block"},Ie={key:1,class:"relative inline-flex items-center cursor-pointer"},Ue=["disabled","onChange","checked"],je={class:"py-4 px-5"},Ve={class:"flex gap-2"},Le=["onClick","id"],Be={class:"inline-flex dark:text-gray-400 absolute z-10 -top-4 -right-2 justify-center items-center w-6 h-6 text-xs font-bold text-white bg-red-500 rounded-full border-2 border-white dark:border-gray-900"},Me=["onClick","id"],Ee={class:"flex justify-center"};function Oe(e,i,p,g,d,f){const C=s("BreadcrumbLink"),N=s("Breadcrumb"),I=s("UserGroupIcon"),h=s("Link"),U=s("badge"),y=s("global-button"),j=s("page-header"),q=s("global-label"),V=s("global-input"),L=s("MagnifyingGlassIcon"),B=s("Multiselect"),M=s("td-user-show"),k=s("eye-icon"),m=s("tool-tip"),v=s("PencilSquareIcon"),E=s("Square2StackIcon"),O=s("trash-icon"),P=s("NothingFound"),F=s("global-table"),R=s("pagination"),G=s("a-button"),D=s("show-modal"),Z=s("a-modal"),z=s("AppLayout");return a(),c(z,{title:e.__("Users")},{default:l(()=>[r(N,null,{default:l(()=>[r(C,{title:e.__("Users")},null,8,["title"])]),_:1}),o("div",null,[o("div",ue,[(a(!0),u(x,null,w(d.stats,(t,_)=>(a(),c(h,{key:_,"preserve-scroll":"",href:e.route("users.index",{query:t.query}),class:"hover:bg-gray-50 shadow-sm flex items-center w-64 flex-grow gap-4 p-6 bg-white border border-gray-100 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-800 rounded-lg",id:"test_"+t.query},{default:l(()=>[o("span",pe,[r(I,{class:"w-6 h-6"})]),o("div",null,[o("h3",he,n(t.data),1),o("p",me,n(t.title),1)])]),_:2},1032,["href","id"]))),128))]),r(j,null,{content:l(()=>[e.term?(a(),c(h,{key:0,"preserve-scroll":"",href:e.route("users.index")},{default:l(()=>[r(y,{loading:!1,type:"button",class:"text-white bg-pink-500 dark:bg-pink-500 hover:bg-pink-400 active:bg-pink-600 dark:active:bg-pink-600 focus:border-pink-600 dark:focus:border-pink-600 focus:ring focus:ring-pink-300 dark:focus:ring-pink-300"},{default:l(()=>[b(n(e.__("All User")),1)]),_:1})]),_:1},8,["href"])):A("",!0),r(y,{"preserve-scroll":"",loading:!1,type:"link",cssClass:"ml-2",url:e.route("users.create"),theme:"primary"},{default:l(()=>[b(n(e.__("Create User")),1)]),_:1},8,["url"])]),default:l(()=>[b(n(e.__("All User"))+" ",1),r(U,null,{default:l(()=>[b(n(p.users.total),1)]),_:1})]),_:1}),o("div",_e,[o("form",{class:"items-center grid grid-cols-1 md:grid-cols-9 gap-6",onSubmit:i[2]||(i[2]=Y(t=>f.filterData(),["prevent"]))},[o("div",fe,[o("div",be,[r(q,{for:"name",value:"Search Here",required:!1}),r(V,{type:"search",class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Name, Email or Role"),modelValue:d.filter.keyword,"onUpdate:modelValue":i[0]||(i[0]=t=>d.filter.keyword=t)},null,8,["placeholder","modelValue"]),o("button",ge,[r(L,{class:"w-5 h-5"})])])]),o("div",ye,[r(q,{for:"name",value:"Select Role",required:!1}),r(B,{"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,modelValue:d.filter.query,"onUpdate:modelValue":i[1]||(i[1]=t=>d.filter.query=t),placeholder:e.__("Select a role"),options:[{label:"All",value:"all"},{label:"Admins",value:"Admin"},{label:"Parents",value:"Parent"},{label:"Admission",value:"Student"},{label:"Teachers",value:"Teacher"},{label:"Administrations",value:"Administration"},{label:"Accountant",value:"Other"}],autocomplete:"off"},null,8,["modelValue","placeholder"])]),o("div",ke,[r(y,{loading:d.filter.processing,type:"submit",theme:"primary"},{default:l(()=>[b(n(e.__("Search")),1)]),_:1},8,["loading"])])],32)]),r(F,null,{head:l(()=>[o("th",ve,n(e.__("Name")),1),o("th",we,n(e.__("Role")),1),o("th",xe,n(e.__("Active/Ban")),1),o("th",qe,n(e.__("Action")),1)]),body:l(()=>[p.users.data.length>0?(a(!0),u(x,{key:0},w(p.users.data,t=>(a(),u("tr",{key:t.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[o("td",Se,[r(M,{image:t.profile_photo_url,name:t.name,email:t.email},null,8,["image","name","email"])]),o("td",Ae,[o("div",null,[(a(!0),u(x,null,w(t.roles,_=>(a(),u("span",{key:_.id,class:"bg-blue-100 dark:bg-gray-700 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:text-gray-400"},n(_.name),1))),128))]),o("div",Te,n(t.join_date),1)]),o("td",Ce,[t.role=="Admin"&&t.id==e.$page.props.auth.id?(a(),u("small",Ne,n(e.__("You cant ban yourself")),1)):(a(),u("label",Ie,[o("input",{disabled:t.role=="Admin"&&t.id==e.$page.props.auth.id,onChange:_=>f.updateStatus(_,t.id),checked:t.status,type:"checkbox",class:T(["sr-only peer",t.role=="Admin"&&t.id==e.$page.props.auth.id?"cursor-not-allowed":""])},null,42,Ue),o("div",{class:T([t.role=="Admin"&&t.id==e.$page.props.auth.id?"opacity-50":"","w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"])},null,2)]))]),o("td",je,[o("div",Ve,[t.role=="Student"?(a(),c(h,{key:0,"preserve-scroll":"",href:e.route("student.show",t.username),class:"group relative",id:"show"+t.id},{default:l(()=>[r(k,{class:"w-6 h-6 text-pink-400 hover:text-pink-300"}),r(m,{text:e.__("View")},null,8,["text"])]),_:2},1032,["href","id"])):t.role=="Teacher"?(a(),c(h,{key:1,"preserve-scroll":"",href:e.route("teacher.show",t.id),class:"group relative",id:"show"+t.id},{default:l(()=>[r(k,{class:"w-6 h-6 text-pink-400 hover:text-pink-300"}),r(m,{text:e.__("View")},null,8,["text"])]),_:2},1032,["href","id"])):(a(),u("button",{key:2,type:"button",onClick:_=>f.show(t),class:"group relative",id:"show"+t.id},[r(k,{class:"w-6 h-6 text-pink-400 hover:text-pink-300"}),r(m,{text:e.__("View")},null,8,["text"])],8,Le)),t.role=="Student"?(a(),c(h,{key:3,"preserve-scroll":"",href:e.route("student.admission.edit",t.id),class:"group relative",id:"edit"+t.id},{default:l(()=>[r(v,{class:"text-blue-400 w-6 h-6 hover:text-blue-300"}),r(m,{text:e.__("Edit")},null,8,["text"])]),_:2},1032,["href","id"])):t.role=="Teacher"?(a(),c(h,{key:4,"preserve-scroll":"",href:e.route("teachers.edit",t.id),class:"group relative",id:"edit"+t.id},{default:l(()=>[r(v,{class:"text-blue-400 w-6 h-6 hover:text-blue-300"}),r(m,{text:e.__("Edit")},null,8,["text"])]),_:2},1032,["href","id"])):(a(),c(h,{key:5,"preserve-scroll":"",href:e.route("users.edit",t.id),class:"group relative",id:"edit"+t.id},{default:l(()=>[r(v,{class:"text-blue-400 w-6 h-6 hover:text-blue-300"}),r(m,{text:e.__("Edit")},null,8,["text"])]),_:2},1032,["href","id"])),t.role=="Teacher"?(a(),c(h,{key:6,"preserve-scroll":"",href:e.route("teacher.classes",t.id),class:"group relative cursor-pointer",id:"teacherSubject"+t.id},{default:l(()=>[r(E,{class:"w-6 h-6 text-purple-400 hover:text-purple-300"}),r(m,{text:e.__("Subjects")},null,8,["text"]),o("div",Be,n(t.subjects_count),1)]),_:2},1032,["href","id"])):A("",!0),o("button",{type:"button",onClick:_=>f.destroy(t.id),class:"group relative",id:"delete"+t.id},[r(O,{class:"w-6 h-6 text-red-400 hover:text-red-300"}),r(m,{text:e.__("Delete")},null,8,["text"])],8,Me)])])]))),128)):(a(),c(P,{key:1,asShow:"tr"}))]),_:1}),o("div",Ee,[r(R,{class:"mt-6 mb-6",links:p.users.links},null,8,["links"])])]),r(Z,{visible:d.visible,"onUpdate:visible":i[3]||(i[3]=t=>d.visible=t),title:d.show_user.name,onOk:f.hide},{footer:l(()=>[r(G,{key:"back",onClick:f.hide},{default:l(()=>[b(n(e.__("Close")),1)]),_:1},8,["onClick"])]),default:l(()=>[r(D,{user:d.show_user},null,8,["user"])]),_:1},8,["visible","title","onOk"])]),_:1},8,["title"])}const nt=H(ce,[["render",Oe]]);export{nt as default};
