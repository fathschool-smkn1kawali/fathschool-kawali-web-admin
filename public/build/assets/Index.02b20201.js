import{_ as A}from"./AppLayout.0e98d2d6.js";import{_ as D,N as q,o as u,c as V,w as d,a as n,b as e,t,C as O,e as _,i as x,F as C,g,j as S,r as c,s as m,X as p}from"./app.30f46569.js";import{s as R}from"./multiselect.5ef4c075.js";/* empty css                */import"./TopBarMenu.3a03db1e.js";import"./CheckCircleIcon.ee8053f3.js";import"./shepherd.esm.89869ab1.js";import"./XMarkIcon.5ead3895.js";import"./WarningToast.58f45431.js";import"./NavLink.bac2c302.js";import"./PlusCircleIcon.1cbea38a.js";import"./UserIcon.70e37609.js";import"./Bars3Icon.7193af16.js";const Y={components:{AppLayout:A,NothingFound:q,Multiselect:R},props:{errors:Object,classes:Object},data(){return{loading:!1,old_data:{id:null,course:null},form:{from_course:"",to_course:"",is_passed:[],next_course_status:[]},from_courses:this.classes,to_courses:[],students:[],promote_data:[]}},watch:{"form.from_course":{deep:!0,async handler(o){if(this.to_courses=[],this.form.to_course=null,this.to_courses=this.classes.filter(i=>i.id!=o),this.form.to_course&&o==this.form.to_course&&(this.form.to_course=null,alert("You can't promote to same course")),o){let i=await axios.get(route("fetch.students",o));this.students=i.data}}},"form.to_course":{deep:!0,handler(o){this.form.from_course&&o==this.form.from_course&&(this.form.to_course=null,alert("You can't promote to same course"))}}},methods:{promoteStudent(){if(!this.form.from_course){alert("Please select from course");return}if(!this.form.to_course){alert("Please select promote to course");return}this.loading=!0;const o=this.students.map((i,f)=>({user_id:i.user_id,is_passed:this.form.is_passed[f]?1:0,next_course_status:this.form.next_course_status[f]?1:0,from_course_id:this.form.from_course,to_course_id:this.form.to_course}));this.$inertia.post(this.route("student.promotion.update"),{data:o},{preserveScroll:!0,onSuccess:i=>{this.loading=!1,setTimeout(()=>{window.location.reload()},1e3)}})}}},E={class:"my-2"},I={class:"dark:text-gray-400 font-semibold"},X={class:"grid sm:grid-cols-1 md:grid-cols-2 sm:gap-1 md:gap-4"},z={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},G={class:"text-gray-900 dark:text-gray-400 text-lg font-bold mb-2"},H={class:"mb-3"},J={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},K={class:"text-gray-900 dark:text-gray-400 text-lg font-bold mb-2"},Q={class:"mb-3"},W={class:"py-4 px-5"},Z={class:"py-4 px-5"},$={class:"py-4 px-5"},ee={class:"py-4 px-5"},oe={class:"py-4 px-5"},se={class:"py-4 px-5 whitespace-nowrap"},re={key:0},te={class:"py-4 px-5"},ae={class:"whitespace-nowrap"},le={class:"py-4 px-5 whitespace-nowrap"},ie={class:"py-4 px-5"},ne={class:"flex items-center mb-4 gap-3"},ce={class:"flex gap-1 items-center"},ue=["onUpdate:modelValue","checked","id"],de=["for"],_e={class:"flex gap-1 items-center"},me=["onUpdate:modelValue","checked","id"],pe=["for"],fe={class:"py-4 px-5"},ge={class:"flex items-center mb-4 gap-3"},he={class:"flex gap-1 items-center"},be=["onUpdate:modelValue","id"],ye=["for"],ke={class:"flex gap-1 items-center"},ve=["onUpdate:modelValue","id"],we=["for"],Ve={key:1},xe={colspan:"20",class:"text-center p-4"};function Ce(o,i,f,Se,r,P){const U=c("BreadcrumbLink"),B=c("Breadcrumb"),L=c("page-header"),h=c("global-label"),b=c("Multiselect"),y=c("input-error"),N=c("Link"),F=c("NothingFound"),M=c("global-table"),T=c("global-button"),j=c("AppLayout");return u(),V(j,{title:o.__("Student Promotion")},{default:d(()=>[n(B,null,{default:d(()=>[n(U,{title:o.__("Student Promotion")},null,8,["title"])]),_:1}),e("div",E,[n(L,null,{default:d(()=>[e("div",I,t(o.__("Student Promotion")),1)]),_:1}),e("form",{class:"mt-2",onSubmit:i[2]||(i[2]=O(s=>o.submit(),["prevent"]))},[e("div",X,[e("div",z,[e("div",G,t(o.__("Promotion From")),1),e("div",H,[n(h,{for:"class",value:"Select Course",required:!1}),n(b,{id:"from_course","close-on-select":!0,"can-clear":!1,searchable:!0,modelValue:r.form.from_course,"onUpdate:modelValue":i[0]||(i[0]=s=>r.form.from_course=s),"create-option":!1,placeholder:o.__("From Course"),options:r.from_courses.map(s=>({value:s.id,label:s.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"]),n(y,{error:o.$page.props.errors.from_course},null,8,["error"])])]),e("div",J,[e("div",K,t(o.__("Promoting To")),1),e("div",Q,[n(h,{for:"class",value:"Select Course",required:!0}),n(b,{id:"to_course","close-on-select":!0,"can-clear":!1,searchable:!0,modelValue:r.form.to_course,"onUpdate:modelValue":i[1]||(i[1]=s=>r.form.to_course=s),"create-option":!1,placeholder:o.__("To Course"),options:r.to_courses.map(s=>({value:s.id,label:s.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"]),n(y,{error:o.$page.props.errors.to_course},null,8,["error"])])])])],32)]),n(M,null,{head:d(()=>[e("th",W,t(o.__("Student")),1),e("th",Z,t(o.__("Parent")),1),e("th",$,t(o.__("Date of Birth")),1),e("th",ee,t(o.__("Current Result")),1),e("th",oe,t(o.__("Next Course Status")),1)]),body:d(()=>[r.students&&r.students.length?(u(!0),_(C,{key:0},x(r.students,(s,a)=>{var k;return u(),_("tr",{key:a,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[e("td",se,[n(N,{href:o.route("student.show",s.user.username)},{default:d(()=>{var l,v,w;return[g(t((l=s==null?void 0:s.user)==null?void 0:l.name)+" ",1),(w=(v=s==null?void 0:s.user)==null?void 0:v.profile)!=null&&w.student_id?(u(),_("span",re,"("+t(s.user.profile.student_id)+")",1)):S("",!0)]}),_:2},1032,["href"])]),e("td",te,[(u(!0),_(C,null,x(s.user.parents,l=>(u(),_("span",{key:l.id,class:"block"},[e("span",ae,t(l.name),1),g(" ("+t(l.phone)+") ",1)]))),128))]),e("td",le,t((k=s==null?void 0:s.user)!=null&&k.date_of_birth?o.formatTime(s.user.date_of_birth):""),1),e("td",ie,[e("div",ne,[e("div",ce,[m(e("input",{"onUpdate:modelValue":l=>r.form.is_passed[a]=l,checked:s.is_passed,value:"1",id:"result_pass_"+a,type:"radio",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,ue),[[p,r.form.is_passed[a]]]),e("label",{for:"result_pass_"+a,class:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},t(o.__("Pass")),9,de)]),e("div",_e,[m(e("input",{"onUpdate:modelValue":l=>r.form.is_passed[a]=l,checked:!s.is_passed,value:"0",id:"result_fail"+a,type:"radio",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,me),[[p,r.form.is_passed[a]]]),e("label",{for:"result_fail"+a,class:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},t(o.__("Fail")),9,pe)])])]),e("td",fe,[e("div",ge,[e("div",he,[m(e("input",{"onUpdate:modelValue":l=>r.form.next_course_status[a]=l,checked:"",value:"0",id:"session_continue"+a,type:"radio",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,be),[[p,r.form.next_course_status[a]]]),e("label",{for:"session_continue"+a,class:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},t(o.__("Continue")),9,ye)]),e("div",ke,[m(e("input",{"onUpdate:modelValue":l=>r.form.next_course_status[a]=l,value:"1",id:"session_leave"+a,type:"radio",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,ve),[[p,r.form.next_course_status[a]]]),e("label",{for:"session_leave"+a,class:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},t(o.__("Leave")),9,we)])])])])}),128)):(u(),_("tr",Ve,[e("td",xe,[n(F,{asShow:"div"})])]))]),_:1}),r.students&&r.students.length?(u(),V(T,{key:0,loading:r.loading,type:"button",cssClass:"mt-3 w-full",theme:"primary",onClick:P.promoteStudent},{default:d(()=>[g(t(o.__("Promote")),1)]),_:1},8,["loading","onClick"])):S("",!0)]),_:1},8,["title"])}const Re=D(Y,[["render",Ce]]);export{Re as default};
