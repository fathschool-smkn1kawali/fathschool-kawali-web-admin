import{_ as A}from"./AppLayout.68aece36.js";import{T as E}from"./ToolTip.01b9a5b2.js";import{P as L}from"./Pagination.45fe2d72.js";import{_ as N,I as m,N as B,u as D,o as _,c as F,w as c,a,b as t,t as i,C as I,g as h,e as g,F as U,i as P,j as R,v as k,V as M,r as u,n as T}from"./app.e2158f44.js";import{P as z}from"./PieChart.01ad9047.js";import{_ as O}from"./Modal.a50958a8.js";import{s as q}from"./multiselect.576f90b9.js";/* empty css                                                         */import{r as H}from"./TrashIcon.24ca370a.js";import{r as G}from"./PencilSquareIcon.3f56d8d9.js";import{r as J}from"./EyeIcon.c768064f.js";import{r as K}from"./ArrowRightIcon.c9b35f94.js";import"./TopBarMenu.2e81788b.js";import"./CheckCircleIcon.7023e821.js";import"./XMarkIcon.e1cec856.js";import"./WarningToast.efaf1557.js";import"./PlusCircleIcon.b7e1c640.js";import"./UserIcon.81d1f1d5.js";import"./Bars3Icon.e96342cc.js";import"./auto.4bbfcea2.js";const Q={components:{AppLayout:A,ToolTip:E,TrashIcon:H,PencilSquareIcon:G,Pagination:L,EyeIcon:J,ArrowRightIcon:K,dayjs:m,PieChart:z,ExportModal:O,Multiselect:q,NothingFound:B},props:{courses:Array,subjects:Array,students:Array,filter_data:Object,attendances:Object},data(){var e,s,l,d,o;return{filter:D({course_id:(e=this.filter_data.course_id)!=null?e:"",subject_id:(s=this.filter_data.subject_id)!=null?s:"",student_id:(l=this.filter_data.student_id)!=null?l:"",month:(d=this.filter_data.month)!=null?d:"",year:(o=this.filter_data.year)!=null?o:""}),customDateFormat:"YYYY-MM-DD",customMonthFormat:"YYYY-MM",month_value:this.filter_data.month?m(m(this.filter_data.month).format("MMM")+this.filter_data.year,this.customMonthFormat):null,subjects:this.subjects,students:this.students,selected_month:this.filter_data.month,selected_year:this.filter_data.year,visible:!1,loading:!1,export_data:{type:"xlsx",student:"",month:"",year:""}}},watch:{month_value:function(e){e?(this.filter.month=m(e).format("MM"),this.filter.year=m(e).format("YYYY")):(this.filter.month=null,this.filter.year=null)},course_id:function(e){e?(this.filter.month=m(e).format("MM"),this.filter.year=m(e).format("YYYY")):(this.filter.month=null,this.filter.year=null)}},methods:{filterData(){this.filter.get(this.route("report.attendance"))},showExportModal(){this.visible=!0},exportSubmit(){this.loading=!0,this.export_data.student=this.filter.student_id,this.export_data.year=this.filter.year,this.export_data.month=this.filter.month,axios({url:this.route("report.attendance.export"),method:"POST",data:this.export_data,responseType:"blob"}).then(e=>{let s=this.export_data.type;var l=window.URL.createObjectURL(new Blob([e.data])),d=document.createElement("a");d.href=l,d.setAttribute("download","attendance-report."+s),document.body.appendChild(d),d.click(),this.loading=!1,this.visible=!1}).catch(e=>{this.loading=!1,this.visible=!1})},attendanceStatus(e,s){const l=e<10?`0${e}`:e,d=`${this.selected_year}-${this.selected_month}-${l}`;let o=null;return this.attendances.forEach(n=>{n.date==d&&(o=n.status)}),o},getMonthName(e){return m(`${this.selected_year}-${e}`).format("MMMM")}},computed:{daysInMonth(){return this.selected_year==""||this.selected_month==""?!1:m(`${this.selected_year}-${this.selected_month}`).daysInMonth()}},mounted(){}},W={class:"py-12"},X={class:"mb-3 rounded-lg py-4 font-semibold text-left rtl:text-right text-gray-900 bg-white dark:text-white dark:bg-gray-800"},Z={class:"dark:text-gray-400 mb-0 text-2xl"},$={class:"col-span-2"},ee={class:"col-span-2"},te={class:"col-span-2"},oe={class:"col-span-2"},re={class:"flex gap-3"},se={class:"col-span-2"},ae={key:0},le={class:"bg-white dark:bg-gray-800 rounded-sm"},ne={class:"flex justify-between items-center"},ie={class:"mb-0 text-black/[0.85] dark:text-gray-400 font-semibold text-base px-6 py-4"},de={class:"mr-1"},ce=t("hr",{class:"dark:border-gray-600"},null,-1),ue={class:"grid grid-cols-8 gap-3 p-4"},me={class:"mb-1 text-xl font-medium mt-6"},fe={class:"text-md capitalize"},he={key:1,class:"text-center mt-52"},pe=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[t("path",{"vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),_e={class:"mt-2 text-sm font-medium text-gray-900"},be={class:"mt-1 text-sm text-gray-500"},ge={class:"flex gap-6"},ye={class:"w-full rounded-lg cursor-pointer flex items-center pl-4 border border-gray-200 dark:border-gray-700"},xe={for:"pdf",class:"w-full cursor-pointer rounded-lg flex items-center pl-4 border border-gray-200 dark:border-gray-700"};function ve(e,s,l,d,o,n){const x=u("BreadcrumbLink"),w=u("Breadcrumb"),S=u("page-header"),f=u("global-label"),y=u("Multiselect"),j=u("a-date-picker"),b=u("global-button"),Y=u("NothingFound"),V=u("export-modal"),C=u("AppLayout");return _(),F(C,{title:e.__("Attendance Report")},{default:c(()=>[a(w,null,{default:c(()=>[a(x,{href:e.route("reports.index"),title:"Report"},null,8,["href"]),a(x,{title:e.__("Attendance List")},null,8,["title"])]),_:1}),t("div",W,[t("div",X,[a(S,{class:"flex justify-between items-center"},{default:c(()=>[t("div",null,[t("h1",Z,i(e.__("Student Attendance")),1)])]),_:1}),t("form",{class:"grid grid-cols-1 md:grid-cols-8 gap-2 items-center px-6",onSubmit:s[4]||(s[4]=I(r=>n.filterData(),["prevent"]))},[t("div",$,[a(f,{for:"student",value:"Student"}),a(y,{id:"student",class:"dark:text-gray-900",modelValue:o.filter.student_id,"onUpdate:modelValue":s[0]||(s[0]=r=>o.filter.student_id=r),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:e.__("Select Student"),options:o.students.map(r=>({value:r.id,label:r.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),t("div",ee,[a(f,{for:"class",value:"Course"}),a(y,{id:"class",class:"dark:text-gray-900",modelValue:o.filter.course_id,"onUpdate:modelValue":s[1]||(s[1]=r=>o.filter.course_id=r),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:e.__("Select Course"),options:l.courses.map(r=>({value:r.id,label:r.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),t("div",te,[a(f,{for:"subject",value:"Subject"}),a(y,{id:"subject",class:"dark:text-gray-900",modelValue:o.filter.subject_id,"onUpdate:modelValue":s[2]||(s[2]=r=>o.filter.subject_id=r),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:e.__("Select Subjects"),options:o.subjects.map(r=>({value:r.id,label:r.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),t("div",oe,[a(f,{for:"month",value:"Month"}),t("div",re,[a(j,{size:"large",placeholder:e.__("Select Month"),picker:"month",value:o.month_value,"onUpdate:value":s[3]||(s[3]=r=>o.month_value=r),format:"MMM YYYY",style:{width:"400px"}},null,8,["placeholder","value"])])]),t("div",se,[a(b,{loading:o.filter.processing,class:"text-white mt-6 bg-blue-500 dark:bg-blue-500 hover:bg-blue-500 active:bg-blue-600 dark:active:bg-blue-600 focus:border-blue-600 dark:focus:border-blue-600 focus:ring focus:ring-blue-300 dark:focus:ring-blue-300"},{default:c(()=>[h(i(e.__("Search")),1)]),_:1},8,["loading"])])],32)]),l.attendances.length&&o.selected_month&&o.selected_year?(_(),g("div",ae,[t("div",le,[t("div",ne,[t("h2",ie,[t("span",null,[h(i(e.__("Attendance Sheet of"))+" ",1),t("b",de,i(n.getMonthName(o.selected_month))+" "+i(o.selected_year),1)]),t("span",null,i(e.__("Attendance Sheet")),1)]),a(b,{onClick:s[5]||(s[5]=r=>n.showExportModal()),loading:!1,type:"button",class:"text-white bg-blue-500 dark:bg-blue-500 hover:bg-blue-500 active:bg-blue-600 dark:active:bg-blue-600 focus:border-blue-600 dark:focus:border-blue-600 focus:ring focus:ring-blue-300 dark:focus:ring-blue-300 mr-6"},{default:c(()=>[h(i(e.__("Export")),1)]),_:1})]),ce,t("div",ue,[n.daysInMonth&&o.selected_month&&o.selected_year?(_(!0),g(U,{key:0},P(n.daysInMonth,(r,p)=>{var v;return _(),g("div",{key:p},[t("div",{class:T(["flex flex-col items-center pb-10 w-full max-w-sm border border-gray-200 rounded-lg shadow-md dark:border-gray-700 dark:text-black",n.attendanceStatus(r,l.attendances[p])=="present"?"bg-green-200 dark:bg-green-200":n.attendanceStatus(r,l.attendances[p])=="absent"?"bg-red-200 dark:bg-red-200":n.attendanceStatus(r,l.attendances[p])=="late"?"bg-yellow-200 dark:bg-yellow-200":"bg-gray-200 dark:bg-gray-200"])},[t("h5",me,i(r),1),t("span",fe,i((v=n.attendanceStatus(r,l.attendances[p+1]))!=null?v:"Not Entry"),1)],2)])}),128)):R("",!0)])])])):(_(),g("div",he,[pe,t("h3",_e,[a(Y,{asShow:"div"})]),t("p",be,i(e.__("Please choose the month, student, class, and subject")),1)]))]),a(V,{show:o.visible,onClose:e.closeModal},{title:c(()=>[h(i(e.__("Export Data")),1)]),content:c(()=>[t("div",ge,[t("div",ye,[k(t("input",{value:"xlsx",id:"excel","onUpdate:modelValue":s[6]||(s[6]=r=>o.export_data.type=r),type:"radio",name:"export_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[M,o.export_data.type]]),a(f,{for:"excel",class:"py-3 ml-2 cursor-pointer w-full text-sm font-medium text-gray-900 dark:text-gray-300",value:"Excel",required:!1})]),t("label",xe,[k(t("input",{value:"pdf",id:"pdf","onUpdate:modelValue":s[7]||(s[7]=r=>o.export_data.type=r),type:"radio",name:"export_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[M,o.export_data.type]]),a(f,{for:"pdf",class:"py-3 ml-2 w-full text-sm font-medium cursor-pointer text-gray-900 dark:text-gray-300",value:"PDF",required:!1})])])]),footer:c(()=>[a(b,{onClick:s[8]||(s[8]=r=>n.exportSubmit()),loading:o.loading,type:"button",class:"mr-2"},{default:c(()=>[h(i(e.__("Export")),1)]),_:1},8,["loading"]),a(b,{loading:!1,onClick:s[9]||(s[9]=r=>o.visible=!1),type:"button",theme:"outline-danger"},{default:c(()=>[h(i(e.__("Cancel")),1)]),_:1})]),_:1},8,["show","onClose"])]),_:1},8,["title"])}const ze=N(Q,[["render",ve]]);export{ze as default};
