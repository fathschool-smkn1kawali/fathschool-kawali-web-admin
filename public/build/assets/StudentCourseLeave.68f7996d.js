import{_ as B}from"./AppLayout.f610d606.js";import{_ as N,a5 as A,a6 as M,N as D,X as f,o as d,c as F,w as n,g as h,t as s,a as _,b as t,C as U,s as m,a4 as y,a7 as V,e as p,i as b,F as g,r as i,S as I,U as T}from"./app.ad8851c7.js";import"./TopBarMenu.0c9cd799.js";import"./CheckCircleIcon.1421b345.js";import"./shepherd.esm.144b1404.js";import"./XMarkIcon.df2c45af.js";import"./WarningToast.4f298cab.js";import"./NavLink.766b2307.js";import"./PlusCircleIcon.7af7ca61.js";import"./UserIcon.ab10622d.js";import"./Bars3Icon.d392f9b5.js";const E={components:{AppLayout:B,Breadcrumb:A,BreadcrumbLink:M,NothingFound:D},props:{studentLeaves:{type:Array,required:!0},courses:{type:Array,required:!0}},data(){return{loading:!1,filter:{name:"",month:"",course_name:""}}},computed:{filteredLeave(){return this.studentLeaves.filter(e=>{let r=!0,l=!0,u=this.filter.course_name?e.course_name===this.filter.course_name:!0;return this.filter.name.trim()!==""&&(r=e.student_name.toLowerCase().includes(this.filter.name.trim().toLowerCase())),this.filter.month!==""&&(l=new Date(e.created_date).toISOString().slice(0,7)===this.filter.month),r&&l&&u})}},methods:{filterData(){f.get(this.route("student.leave"),{params:this.filter}).then(e=>{this.studentLeaves=e.data}).catch(e=>{console.error(e)})},exportSubmit(){this.loading=!0;let e={course_name:this.filter.course_name};this.filter.name.trim()!==""&&(e.name=this.filter.name.trim()),this.filter.month!==""&&(e.month=this.filter.month),f.post(this.route("student.leave.export"),e,{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},responseType:"blob"}).then(r=>{let l=this.export_data.type;var u=window.URL.createObjectURL(new Blob([r.data])),a=document.createElement("a");a.href=u,a.setAttribute("download","leavestudent-report."+l),document.body.appendChild(a),a.click(),this.loading=!1,this.export_visible=!1}).catch(()=>{this.loading=!1,this.export_visible=!1})}}},R=e=>(I("data-v-bc6df0af"),e=e(),T(),e),q={class:"flex flex-col sm:flex-row gap-4"},O={class:"mb-4"},j={class:"flex items-center"},X={for:"month",class:"ml-4 mr-2"},K={for:"course",class:"ml-4 mr-2"},P={value:""},z=["value"],G={type:"submit",class:"ml-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},H={class:"py-4 px-5"},J={class:"py-4 px-5"},Q={class:"py-4 px-5"},W={class:"py-4 px-5"},Y={class:"py-4 px-5"},Z={class:"py-4 px-5"},$={class:"py-4 px-5"},ee={class:"py-4 px-5 text-gray-900 dark:text-white"},te={class:"py-4 px-5 text-gray-900 dark:text-white"},se={class:"py-4 px-5 text-gray-900 dark:text-white"},oe={class:"py-4 px-5 text-gray-900 dark:text-white"},re={class:"py-4 px-5 text-gray-900 dark:text-white"},ae={class:"py-4 px-5 text-gray-900 dark:text-white"},ne={class:"py-4 px-5 text-gray-900 dark:text-white"},ie={key:1},le={colspan:"7",class:"text-center p-4"},de=R(()=>t("div",{class:"flex justify-center"},null,-1));function _e(e,r,l,u,a,c){const x=i("BreadcrumbLink"),v=i("Breadcrumb"),L=i("global-button"),k=i("page-header"),w=i("NothingFound"),S=i("global-table"),C=i("AppLayout");return d(),F(C,{title:e.__("Student Leave")},{header:n(()=>[h(s(e.__("Student Leave")),1)]),default:n(()=>[_(v,null,{default:n(()=>[_(x,{title:e.__("Student Leave"),href:e.route("student.leave")},null,8,["title","href"])]),_:1}),t("div",null,[_(k,{class:"flex-col sm:flex-row"},{content:n(()=>[t("div",q,[_(L,{loading:a.loading,onClick:c.exportSubmit,type:"button",theme:"sky"},{default:n(()=>[h(s(e.__("Export")),1)]),_:1},8,["loading","onClick"])])]),default:n(()=>[h(s(e.__("Student Leave"))+" ",1)]),_:1}),t("div",O,[t("form",{onSubmit:r[3]||(r[3]=U((...o)=>c.filterData&&c.filterData(...o),["prevent"]))},[t("div",j,[m(t("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=o=>a.filter.name=o),id:"name",placeholder:"Name",class:"p-2 border rounded"},null,512),[[y,a.filter.name]]),t("label",X,s(e.__("Month"))+":",1),m(t("input",{type:"month","onUpdate:modelValue":r[1]||(r[1]=o=>a.filter.month=o),id:"month",class:"p-2 border rounded"},null,512),[[y,a.filter.month]]),t("label",K,s(e.__("Course"))+":",1),m(t("select",{"onUpdate:modelValue":r[2]||(r[2]=o=>a.filter.course_name=o),id:"course",class:"p-2 border rounded"},[t("option",P,s(e.__("All Courses")),1),(d(!0),p(g,null,b(l.courses,o=>(d(),p("option",{key:o.id,value:o.name},s(o.name),9,z))),128))],512),[[V,a.filter.course_name]]),t("button",G,s(e.__("Filter")),1)])],32)]),_(S,null,{head:n(()=>[t("th",H,s(e.__("Name")),1),t("th",J,s(e.__("Class")),1),t("th",Q,s(e.__("Leave Period")),1),t("th",W,s(e.__("Leave Type")),1),t("th",Y,s(e.__("Status")),1),t("th",Z,s(e.__("Description")),1),t("th",$,s(e.__("Created At")),1)]),body:n(()=>[c.filteredLeave.length>0?(d(!0),p(g,{key:0},b(c.filteredLeave,o=>(d(),p("tr",{key:o.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[t("td",ee,s(o.student_name),1),t("td",te,s(o.course_name),1),t("td",se,s(o.leave_period),1),t("td",oe,s(o.type_name),1),t("td",re,s(o.status),1),t("td",ae,s(o.description),1),t("td",ne,s(o.created_date),1)]))),128)):(d(),p("tr",ie,[t("td",le,[_(w,{asShow:"div"})])]))]),_:1}),de])]),_:1},8,["title"])}const Le=N(E,[["render",_e],["__scopeId","data-v-bc6df0af"]]);export{Le as default};
