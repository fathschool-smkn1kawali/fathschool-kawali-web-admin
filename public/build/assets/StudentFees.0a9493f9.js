import{_ as M}from"./AppLayout.8b90d46b.js";import{T as k}from"./ToolTip.90a7442a.js";import{P as w}from"./Pagination.7c6055c2.js";import{_ as Y,I as d,N as S,u as F,o as V,c as I,w as u,a as r,b as e,t as p,C as B,g as L,r as l}from"./app.9bacd1a0.js";import{P as N}from"./PieChart.d9a1a523.js";import{_ as C}from"./Modal.d266a93d.js";import{s as A}from"./multiselect.5e8a11c6.js";/* empty css                                                         */import{r as D}from"./TrashIcon.5ff165f8.js";import{r as P}from"./PencilSquareIcon.1e81501b.js";import{r as T}from"./EyeIcon.6f597e55.js";import{r as R}from"./ArrowRightIcon.7cd4c706.js";import"./TopBarMenu.978fcd11.js";import"./CheckCircleIcon.14efd96d.js";import"./shepherd.esm.8b0b6bfa.js";import"./XMarkIcon.db621c27.js";import"./WarningToast.5000d5fb.js";import"./NavLink.7e4b7702.js";import"./PlusCircleIcon.7b47160e.js";import"./UserIcon.2090e4c3.js";import"./Bars3Icon.559bf817.js";import"./auto.4bbfcea2.js";const U={components:{AppLayout:M,ToolTip:k,TrashIcon:D,PencilSquareIcon:P,Pagination:w,EyeIcon:T,ArrowRightIcon:R,dayjs:d,PieChart:N,ExportModal:C,Multiselect:A,NothingFound:S},props:{courses:Array,students:Array,filter_data:Object},data(){var t,o,i,n;return{filter:F({course_id:(t=this.filter_data.course_id)!=null?t:"",student_id:(o=this.filter_data.student_id)!=null?o:"",month:(i=this.filter_data.month)!=null?i:"",year:(n=this.filter_data.year)!=null?n:""}),customDateFormat:"YYYY-MM-DD",customMonthFormat:"YYYY-MM",month_value:this.filter_data.month?d(d(this.filter_data.month).format("MMM")+this.filter_data.year,this.customMonthFormat):null,students:this.students,selected_month:this.filter_data.month,selected_year:this.filter_data.year,visible:!1,loading:!1,export_data:{student:"",month:"",year:"",course:""}}},watch:{month_value:function(t){t?(this.filter.month=d(t).format("MM"),this.filter.year=d(t).format("YYYY")):(this.filter.month=null,this.filter.year=null)},"filter.course_id":function(t,o){t&&this.filterData()}},methods:{filterData(){this.filter.get(this.route("report.student.fees"))},exportSubmit(){this.loading=!0,this.export_data.course=this.filter.course_id,this.export_data.student=this.filter.student_id,this.export_data.month=this.filter.month,this.export_data.year=this.filter.year,axios({url:this.route("report.studentFee.export"),method:"POST",data:this.export_data,responseType:"blob"}).then(t=>{var o=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=o;const n=t.headers["content-disposition"],a=n.indexOf('"')+1,m=n.lastIndexOf('"'),c=n.substring(a,m);i.setAttribute("download",c),document.body.appendChild(i),i.click(),this.loading=!1,this.visible=!1}).catch(t=>{this.loading=!1,this.visible=!1})},getMonthName(t){return d(`${this.selected_year}-${t}`).format("MMMM")}},computed:{daysInMonth(){return this.selected_year==""||this.selected_month==""?!1:d(`${this.selected_year}-${this.selected_month}`).daysInMonth()}},mounted(){}},j={class:"py-12"},E={class:"mb-3 rounded-lg py-4 font-semibold text-left rtl:text-right text-gray-900 bg-white dark:text-white dark:bg-gray-800"},O={class:"dark:text-gray-400 mb-0 text-2xl"},$={class:"col-span-2"},z={class:"col-span-2"},q={class:"col-span-2"},H={class:"flex gap-3"},G={class:"col-span-1"},J={class:"text-center mt-52"},K=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),Q={class:"mt-2 text-sm font-medium text-gray-900"},W={class:"mt-1 text-sm text-gray-500"};function X(t,o,i,n,a,m){const c=l("BreadcrumbLink"),f=l("Breadcrumb"),b=l("page-header"),h=l("global-label"),_=l("Multiselect"),g=l("a-date-picker"),y=l("global-button"),v=l("NothingFound"),x=l("AppLayout");return V(),I(x,{title:t.__("Fees Report")},{default:u(()=>[r(f,null,{default:u(()=>[r(c,{href:t.route("reports.index"),title:"Report"},null,8,["href"]),r(c,{title:t.__("Export Fees")},null,8,["title"])]),_:1}),e("div",j,[e("div",E,[r(b,{class:"flex justify-between items-center"},{default:u(()=>[e("div",null,[e("h1",O,p(t.__("Student Fees")),1)])]),_:1}),e("form",{class:"grid grid-cols-1 md:grid-cols-9 gap-2 items-center px-6",onSubmit:o[3]||(o[3]=B(s=>m.exportSubmit(),["prevent"]))},[e("div",$,[r(h,{for:"class",value:"Course"}),r(_,{id:"class",class:"dark:text-gray-900",modelValue:a.filter.course_id,"onUpdate:modelValue":o[0]||(o[0]=s=>a.filter.course_id=s),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:t.__("Select Course"),options:i.courses.map(s=>({value:s.id,label:s.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),e("div",z,[r(h,{for:"student",value:"Student"}),r(_,{id:"student",class:"dark:text-gray-900",modelValue:a.filter.student_id,"onUpdate:modelValue":o[1]||(o[1]=s=>a.filter.student_id=s),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:t.__("Select Student"),options:a.students.map(s=>({value:s.id,label:s.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),e("div",q,[r(h,{for:"month",value:"Month"}),e("div",H,[r(g,{size:"large",placeholder:t.__("Select Month"),picker:"month",value:a.month_value,"onUpdate:value":o[2]||(o[2]=s=>a.month_value=s),format:"MMM YYYY",style:{width:"400px"}},null,8,["placeholder","value"])])]),e("div",G,[r(y,{loading:a.loading,class:"text-white mt-6 bg-blue-500 dark:bg-blue-500 hover:bg-blue-500 active:bg-blue-600 dark:active:bg-blue-600 focus:border-blue-600 dark:focus:border-blue-600 focus:ring focus:ring-blue-300 dark:focus:ring-blue-300"},{default:u(()=>[L(p(t.__("Export Fees")),1)]),_:1},8,["loading"])])],32)]),e("div",J,[K,e("h3",Q,[r(v,{asShow:"div"})]),e("p",W,p(t.__("Please choose the course student and month")),1)])])]),_:1},8,["title"])}const xt=Y(U,[["render",X]]);export{xt as default};
