import{_ as B}from"./AppLayout.ae55cab5.js";import{_ as M,a7 as N,a8 as A,N as D,u as F,Z as f,o as _,c as V,w as i,g as m,t as s,a as c,b as t,C as E,s as h,a3 as y,a9 as T,e as p,i as b,F as x,r as d,V as U,W as I}from"./app.8123fe3b.js";import{_ as O}from"./Modal.a8b4c637.js";import"./TopBarMenu.831e8367.js";import"./CheckCircleIcon.1ab93f1e.js";import"./shepherd.esm.6ceab578.js";import"./XMarkIcon.842ecca4.js";import"./WarningToast.eff4882a.js";import"./NavLink.9e4c6fb6.js";import"./PlusCircleIcon.9cc6e4a0.js";import"./UserIcon.53552b9e.js";import"./Bars3Icon.d71deab9.js";const R={components:{AppLayout:B,Breadcrumb:N,BreadcrumbLink:A,NothingFound:D,ExportModal:O},props:{studentLeaves:{type:Array,required:!0},courses:{type:Array,required:!0}},data(){return{loading:!1,filter:{name:"",month:"",course_name:""},export_options:[],visible:!1,export_visible:!1,show_user:"",export_data:F({type:"Excel",course:"all",course_id:""})}},computed:{filteredLeave(){return this.studentLeaves.filter(e=>{let r=!0,a=!0,l=this.filter.course_name?e.course_name===this.filter.course_name:!0;return this.filter.name.trim()!==""&&(r=e.student_name.toLowerCase().includes(this.filter.name.trim().toLowerCase())),this.filter.month!==""&&(a=new Date(e.created_date).toISOString().slice(0,7)===this.filter.month),r&&a&&l})}},methods:{filterData(){f.get(this.route("student.leave"),{params:this.filter}).then(e=>{this.studentLeaves=e.data}).catch(e=>{console.error(e)})},exportSubmit(){this.loading=!0;let e={};if(this.filter.name.trim()!==""&&(e.name=this.filter.name.trim()),this.filter.month!==""&&(e.month=this.filter.month),this.filter.course_name!==""){let r=this.courses.find(a=>a.name===this.filter.course_name);r&&(e.course_id=r.id)}f({url:this.route("student.leave.export"),method:"POST",data:{...this.export_data,...e},headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},responseType:"blob"}).then(r=>{this.export_data.type;var a=window.URL.createObjectURL(new Blob([r.data])),l=document.createElement("a");l.href=a,l.setAttribute("download","teacherattendance-report.xlsx"),document.body.appendChild(l),l.click(),this.loading=!1,this.visible=!1}).catch(r=>{this.loading=!1,this.visible=!1})}}},q=e=>(U("data-v-98d91829"),e=e(),I(),e),j={class:"flex flex-col sm:flex-row gap-4"},P={class:"mb-4"},K={class:"flex items-center"},W={for:"month",class:"ml-4 mr-2"},X={for:"course",class:"ml-4 mr-2"},Z={value:""},z=["value"],G={type:"submit",class:"ml-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},H={class:"py-4 px-5"},J={class:"py-4 px-5"},Q={class:"py-4 px-5"},Y={class:"py-4 px-5"},$={class:"py-4 px-5"},ee={class:"py-4 px-5"},te={class:"py-4 px-5"},se={class:"py-4 px-5 text-gray-900 dark:text-white"},oe={class:"py-4 px-5 text-gray-900 dark:text-white"},re={class:"py-4 px-5 text-gray-900 dark:text-white"},ae={class:"py-4 px-5 text-gray-900 dark:text-white"},ne={class:"py-4 px-5 text-gray-900 dark:text-white"},ie={class:"py-4 px-5 text-gray-900 dark:text-white"},le={class:"py-4 px-5 text-gray-900 dark:text-white"},de={key:1},_e={colspan:"7",class:"text-center p-4"},ce=q(()=>t("div",{class:"flex justify-center"},null,-1));function ue(e,r,a,l,n,u){const g=d("BreadcrumbLink"),v=d("Breadcrumb"),L=d("global-button"),k=d("page-header"),w=d("NothingFound"),S=d("global-table"),C=d("AppLayout");return _(),V(C,{title:e.__("Student Leave")},{header:i(()=>[m(s(e.__("Student Leave")),1)]),default:i(()=>[c(v,null,{default:i(()=>[c(g,{title:e.__("Student Leave"),href:e.route("student.leave")},null,8,["title","href"])]),_:1}),t("div",null,[c(k,{class:"flex-col sm:flex-row"},{content:i(()=>[t("div",j,[c(L,{loading:n.loading,onClick:r[0]||(r[0]=o=>u.exportSubmit()),type:"button",theme:"sky"},{default:i(()=>[m(s(e.__("Export")),1)]),_:1},8,["loading"])])]),default:i(()=>[m(s(e.__("Student Leave"))+" ",1)]),_:1}),t("div",P,[t("form",{onSubmit:r[4]||(r[4]=E((...o)=>u.filterData&&u.filterData(...o),["prevent"]))},[t("div",K,[h(t("input",{type:"text","onUpdate:modelValue":r[1]||(r[1]=o=>n.filter.name=o),id:"name",placeholder:"Name",class:"p-2 border rounded"},null,512),[[y,n.filter.name]]),t("label",W,s(e.__("Month"))+":",1),h(t("input",{type:"month","onUpdate:modelValue":r[2]||(r[2]=o=>n.filter.month=o),id:"month",class:"p-2 border rounded"},null,512),[[y,n.filter.month]]),t("label",X,s(e.__("Course"))+":",1),h(t("select",{"onUpdate:modelValue":r[3]||(r[3]=o=>n.filter.course_name=o),id:"course",class:"p-2 border rounded"},[t("option",Z,s(e.__("All Courses")),1),(_(!0),p(x,null,b(a.courses,o=>(_(),p("option",{key:o.id,value:o.name},s(o.name),9,z))),128))],512),[[T,n.filter.course_name]]),t("button",G,s(e.__("Filter")),1)])],32)]),c(S,null,{head:i(()=>[t("th",H,s(e.__("Name")),1),t("th",J,s(e.__("Class")),1),t("th",Q,s(e.__("Leave Period")),1),t("th",Y,s(e.__("Leave Type")),1),t("th",$,s(e.__("Status")),1),t("th",ee,s(e.__("Description")),1),t("th",te,s(e.__("Created At")),1)]),body:i(()=>[u.filteredLeave.length>0?(_(!0),p(x,{key:0},b(u.filteredLeave,o=>(_(),p("tr",{key:o.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[t("td",se,s(o.student_name),1),t("td",oe,s(o.course_name),1),t("td",re,s(o.leave_period),1),t("td",ae,s(o.type_name),1),t("td",ne,s(o.status),1),t("td",ie,s(o.description),1),t("td",le,s(o.created_date),1)]))),128)):(_(),p("tr",de,[t("td",_e,[c(w,{asShow:"div"})])]))]),_:1}),ce])]),_:1},8,["title"])}const Se=M(R,[["render",ue],["__scopeId","data-v-98d91829"]]);export{Se as default};
