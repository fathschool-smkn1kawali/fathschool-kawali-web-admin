import{_ as G}from"./AppLayout.8b90d46b.js";import{T as q}from"./ToolTip.90a7442a.js";import{P as H}from"./Pagination.7c6055c2.js";import{T as R}from"./TdUserShow.11f3adc8.js";import{_ as z,N as K,u as J,o as p,c as Q,w as n,g as c,t as a,a as s,b as t,C as W,e as _,i as k,F as b,r,j as X}from"./app.9bacd1a0.js";import{_ as Y}from"./Modal.d266a93d.js";import{s as Z}from"./multiselect.5e8a11c6.js";/* empty css                */import{r as $}from"./PencilSquareIcon.1e81501b.js";import{r as ee}from"./TrashIcon.5ff165f8.js";import{r as te}from"./EyeIcon.6f597e55.js";import{r as oe}from"./MagnifyingGlassIcon.a62df564.js";import"./TopBarMenu.978fcd11.js";import"./CheckCircleIcon.14efd96d.js";import"./shepherd.esm.8b0b6bfa.js";import"./XMarkIcon.db621c27.js";import"./WarningToast.5000d5fb.js";import"./NavLink.7e4b7702.js";import"./PlusCircleIcon.7b47160e.js";import"./UserIcon.2090e4c3.js";import"./Bars3Icon.559bf817.js";const se={components:{AppLayout:G,ToolTip:q,Multiselect:Z,TdUserShow:R,PencilSquareIcon:$,TrashIcon:ee,Pagination:H,EyeIcon:te,MagnifyingGlassIcon:oe,NothingFound:K,ExportModal:Y},props:{users:Object,filter_data:Object,classes:Object},data(){var e,o;return{loading:!1,options:[],options2:[],export_options:[],visible:!1,export_visible:!1,show_user:"",filter:{keyword:(e=this.filter_data.keyword)!=null?e:null,course:(o=this.filter_data.course)!=null?o:null},export_data:J({type:"Excel",course:"all"})}},created(){this.export_options.push({value:"all",label:"All"});for(const[e,o]of Object.entries(this.classes))this.export_options.push({value:o.id,label:o.name});this.options.push({value:"",label:"All"});for(const[e,o]of Object.entries(this.classes))this.options.push({value:o.slug,label:o.name})},methods:{accountHold(e,o){let u=e.target.checked;console.log("Sending status:",u),this.$inertia.post(this.route("user.account.hold",o),{status:u},{preserveScroll:!0})},accountManual(e,o){let u=e.target.checked;this.$inertia.post(this.route("user.account.manual",o),{status:u},{preserveScroll:!0})},destroy(e){if(confirm("Are you sure ?"))this.$inertia.delete(this.route("users.destroy",e));else return!1},show(e){this.show_user=e,this.visible=!0},hide(e){this.visible=!1},exportStudent(){this.export_visible=!0},filterData(){this.loading=!0,this.$inertia.get(this.route("student.admission.all"),this.filter,{preserveScroll:!0,onFinish:e=>{this.loading=!1}})},filterOption(e,o){return o.label.toLowerCase().indexOf(e.toLowerCase())>=0},sendMail(e){this.$inertia.post(this.route("student.send.mail"),{user:e})},exportSubmit(){this.loading=!0,axios({url:this.route("student.export"),method:"POST",data:this.export_data,responseType:"blob"}).then(e=>{this.export_data.type;var o=window.URL.createObjectURL(new Blob([e.data])),u=document.createElement("a");u.href=o,u.setAttribute("download","student-report.xlsx"),document.body.appendChild(u),u.click(),this.loading=!1,this.visible=!1}).catch(e=>{this.loading=!1,this.visible=!1})}}},le={class:"flex flex-col sm:flex-row gap-4"},re={class:"mb-4"},ne={class:"flex col-span-2"},ae={class:"relative w-full"},ie={type:"submit",class:"absolute top-1 right-0 p-2.5 text-sm font-medium text-white bg-blue-700 rounded-r-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},de={class:"sr-only"},ce={class:"col-span-2"},ue={class:"col-span-1"},pe={class:"py-4 px-5"},he={class:"py-4 px-5"},_e={class:"py-4 px-5"},fe={class:"py-4 px-5"},be={class:"py-4 px-5"},me={width:"10%",class:"py-4 px-5"},ge={scope:"row",class:"flex items-center py-4 px-5 text-gray-900 whitespace-nowrap dark:text-white"},ke={class:"py-4 px-5"},ye={class:"py-4 px-5"},ve={key:0,class:"flex flex-wrap items-center gap-0.5"},we={class:"py-4 px-5"},xe={class:"relative inline-flex items-center cursor-pointer"},Ce=["onChange","checked"],Se=t("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1),Ae={class:"py-4 px-5"},Me={class:"relative inline-flex items-center cursor-pointer"},Le=["onChange","checked"],Be=t("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1),Oe={class:"py-4 px-5"},Ee={class:"flex gap-2"},Ne=["onClick"],Ve=["onClick","id"],Fe={key:1},Ie={colspan:"4",class:"text-center p-4"},Te={class:"flex justify-center"},je={class:"col-span-2"};function Ue(e,o,u,Pe,i,h){const y=r("BreadcrumbLink"),v=r("Breadcrumb"),f=r("global-button"),w=r("page-header"),x=r("global-input"),C=r("MagnifyingGlassIcon"),S=r("a-select"),A=r("td-user-show"),g=r("Link"),M=r("envelope"),m=r("tool-tip"),L=r("EyeIcon"),B=r("PencilSquareIcon"),O=r("trash-icon"),E=r("NothingFound"),N=r("global-table"),V=r("pagination"),F=r("a-button"),I=r("show-modal"),T=r("a-modal"),j=r("Multiselect"),U=r("export-modal"),P=r("AppLayout");return p(),Q(P,{title:e.__("Student Admission")},{header:n(()=>[c(a(e.__("Student Admission")),1)]),default:n(()=>[s(v,null,{default:n(()=>[s(y,{title:e.__("All Student"),href:e.route("student.admission.all")},null,8,["title","href"])]),_:1}),t("div",null,[s(w,{class:"flex-col sm:flex-row"},{content:n(()=>[t("div",le,[s(f,{loading:!1,onClick:o[0]||(o[0]=l=>h.exportStudent()),type:"button",theme:"sky"},{default:n(()=>[c(a(e.__("Export")),1)]),_:1}),s(f,{"preserve-scroll":"",loading:!1,url:e.route("student.bulk.admission"),type:"link",theme:"secondary"},{default:n(()=>[c(a(e.__("Bulk Admission")),1)]),_:1},8,["url"]),s(f,{loading:!1,"preserve-scroll":"",type:"link",url:e.route("student.admission.create"),theme:"primary"},{default:n(()=>[c(a(e.__("New Admission")),1)]),_:1},8,["url"])])]),default:n(()=>[c(a(e.__("All Student"))+" ",1)]),_:1}),t("div",re,[t("form",{class:"items-center grid grid-cols-1 md:grid-cols-7 gap-6",onSubmit:o[3]||(o[3]=W(l=>h.filterData(),["prevent"]))},[t("div",ne,[t("div",ae,[s(x,{type:"search",modelValue:i.filter.keyword,"onUpdate:modelValue":o[1]||(o[1]=l=>i.filter.keyword=l),class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Keyword")},null,8,["modelValue","placeholder"]),t("button",ie,[s(C,{class:"w-5 h-5"}),t("span",de,a(e.__("Search")),1)])])]),t("div",ce,[s(S,{class:"width-100",size:"large",value:i.filter.course,"onUpdate:value":o[2]||(o[2]=l=>i.filter.course=l),"show-search":"",placeholder:e.__("Select a course"),options:i.options,"filter-option":h.filterOption,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleChange},null,8,["value","placeholder","options","filter-option","onFocus","onBlur","onChange"])]),t("div",ue,[s(f,{loading:i.loading,type:"submit",theme:"primary"},{default:n(()=>[c(a(e.__("Search")),1)]),_:1},8,["loading"])])],32)]),s(N,null,{head:n(()=>[t("th",pe,a(e.__("Name")),1),t("th",he,a(e.__("Guardian Name")),1),t("th",_e,a(e.__("Course")),1),t("th",fe,a(e.__("Account Hold")),1),t("th",be,a(e.__("Manual Attendance")),1),t("th",me,a(e.__("Action")),1)]),body:n(()=>[u.users.data.length>0?(p(!0),_(b,{key:0},k(u.users.data,l=>(p(),_("tr",{key:l.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[t("td",ge,[s(A,{image:l.profile_photo_url,name:l.name,email:l.email},null,8,["image","name","email"])]),t("td",ke,[(p(!0),_(b,null,k(l.parents,d=>(p(),_("div",{key:d,class:"flex"},[s(g,{href:e.route("parent.show",d.id),class:"bg-blue-100 text-blue-800 whitespace-nowrap text-xs font-bold mr-2 px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300 mb-1"},{default:n(()=>[c(a(d?d.name:""),1)]),_:2},1032,["href"])]))),128))]),t("td",ye,[l.courses.length>0?(p(),_("div",ve,[(p(!0),_(b,null,k(l.courses,(d,D)=>(p(),_("div",{key:d.id,class:"font-bold ml-0.5"},[c(a(d.course?d.course.name:"")+" ",1),l.courses.length!=D+1?(p(),_(b,{key:0},[c(",")],64)):X("",!0)]))),128))])):(p(),_(b,{key:1},[c(" - ")],64))]),t("td",we,[t("label",xe,[t("input",{onChange:d=>h.accountHold(d,l.id),checked:l.account_hold,type:"checkbox",class:"sr-only peer"},null,40,Ce),Se])]),t("td",Ae,[t("label",Me,[t("input",{onChange:d=>h.accountManual(d,l.id),checked:l.manual,type:"checkbox",class:"sr-only peer"},null,40,Le),Be])]),t("td",Oe,[t("div",Ee,[t("button",{onClick:d=>h.sendMail(l.id),type:"button",class:"group relative"},[s(M,{class:"text-purple-400 hover:text-purple-300"}),s(m,{text:e.__("Send Mail")},null,8,["text"])],8,Ne),s(g,{"preserve-scroll":"",href:e.route("student.show",l.username),class:"group relative",id:"show"+l.id},{default:n(()=>[s(L,{class:"w-6 h-6 text-pink-400 hover:text-pink-300"}),s(m,{text:e.__("View")},null,8,["text"])]),_:2},1032,["href","id"]),s(g,{"preserve-scroll":"",href:e.route("student.admission.edit",l.id),class:"group relative",id:"edit"+l.id},{default:n(()=>[s(B,{class:"text-blue-400 w-6 h-6 hover:text-blue-300"}),s(m,{text:e.__("Edit")},null,8,["text"])]),_:2},1032,["href","id"]),t("button",{type:"button",onClick:d=>h.destroy(l.id),class:"group relative",id:"delete"+l.id},[s(O,{class:"w-6 h-6 text-red-400 hover:text-red-300"}),s(m,{text:e.__("Delete")},null,8,["text"])],8,Ve)])])]))),128)):(p(),_("tr",Fe,[t("td",Ie,[s(E,{asShow:"div"})])]))]),_:1}),t("div",Te,[s(V,{class:"mt-6 mb-6",links:u.users.links},null,8,["links"])])]),s(T,{visible:i.visible,"onUpdate:visible":o[4]||(o[4]=l=>i.visible=l),title:i.show_user.name,onOk:h.hide},{footer:n(()=>[s(F,{key:"back",onClick:h.hide},{default:n(()=>[c(a(e.__("Close")),1)]),_:1},8,["onClick"])]),default:n(()=>[s(I,{user:i.show_user},null,8,["user"])]),_:1},8,["visible","title","onOk"]),s(U,{show:i.export_visible,onClose:e.closeModal},{title:n(()=>[c(a(e.__("Export Data")),1)]),content:n(()=>[t("div",je,[s(j,{id:"course","close-on-select":!0,"can-clear":!1,searchable:!0,modelValue:i.export_data.course,"onUpdate:modelValue":o[5]||(o[5]=l=>i.export_data.course=l),"create-option":!1,placeholder:e.__("Select Course"),options:i.export_options,autocomplete:"off"},null,8,["modelValue","placeholder","options"])])]),footer:n(()=>[s(f,{onClick:o[6]||(o[6]=l=>h.exportSubmit()),loading:i.loading,type:"button",class:"text-white bg-blue-500 dark:bg-blue-500 hover:bg-blue-500 active:bg-blue-600 dark:active:bg-blue-600 focus:border-blue-600 dark:focus:border-blue-600 focus:ring focus:ring-blue-300 mr-2 mb-2 dark:focus:ring-blue-300"},{default:n(()=>[c(a(e.__("Export")),1)]),_:1},8,["loading"]),s(f,{loading:!1,onClick:o[7]||(o[7]=l=>i.export_visible=!1),type:"button",class:"text-white bg-red-500 dark:bg-red-500 hover:bg-red-500 active:bg-red-600 dark:active:bg-red-600 focus:border-red-600 dark:focus:border-red-600 focus:ring focus:ring-red-300 mr-2 mb-2 dark:focus:ring-red-300"},{default:n(()=>[c(a(e.__("Cancel")),1)]),_:1})]),_:1},8,["show","onClose"])]),_:1},8,["title"])}const at=z(se,[["render",Ue]]);export{at as default};
