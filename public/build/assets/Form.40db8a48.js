import{_ as U}from"./AppLayout.0e98d2d6.js";import{_ as N,u as j,o as f,c as q,w as u,a as r,b as s,g as h,t as m,e as g,i as L,F as P,n as k,C as S,r as n,j as T}from"./app.30f46569.js";import{s as F}from"./multiselect.5ef4c075.js";/* empty css                */import"./TopBarMenu.3a03db1e.js";import"./CheckCircleIcon.ee8053f3.js";import"./shepherd.esm.89869ab1.js";import"./XMarkIcon.5ead3895.js";import"./WarningToast.58f45431.js";import"./NavLink.bac2c302.js";import"./PlusCircleIcon.1cbea38a.js";import"./UserIcon.70e37609.js";import"./Bars3Icon.7193af16.js";const M={components:{Multiselect:F,AppLayout:U},props:{courses:Object,plan:Object,benefits:Array,amounts:Array,plan_courses:Array,currencies:Array},data(){var e,t;return{benefit_amount:[1],form:j({title:this.plan?this.plan.title:"",description:this.plan?this.plan.description:"",course:this.plan?this.plan.course_id:"",benefits:(e=this.benefits)!=null?e:[],amounts:(t=this.amounts)!=null?t:[],currency:this.plan?this.plan.currency:"",_method:this.plan?"PUT":"POST"})}},mounted(){if(this.plan)for(let e=1;e<this.benefits.length;e++){let t=this.benefit_amount.length;this.benefit_amount.push(t+1)}},methods:{submit(){this.plan?this.form.post(this.route("plan.update",this.plan.id),{onSuccess:()=>{this.$emit("update"),this.form.reset("title","price","description","courses","currency")}}):this.form.post(this.route("plan.store"),{onSuccess:()=>{this.form.reset("title","price","description","courses","currency")}})},addBenefit(){let e=this.benefit_amount.length;this.benefit_amount.push(e+1)},removeBenefit(e){this.form.benefits.splice(e,1),this.form.amounts.splice(e,1),this.benefit_amount.splice(e,1)}}},D={class:"max-w-2xl flex flex-col gap-5 mx-auto px-4 rounded bg-white dark:bg-gray-800 p-5 dark:border-gray-700"},O={class:"mt-3"},z={class:"mt-3"},E={class:"mt-3"},R=s("div",{class:"mt-4"},null,-1),G={class:"flex items-left justify-between"},H={class:"flex items-left justify-between -mt-1"},I=["onClick"],J={type:"button",class:"text-blue-500 hover:text-blue-600"},K={class:"flex justify-center items-center -mt-2"};function Q(e,t,b,W,l,d){const V=n("BreadcrumbLink"),w=n("Breadcrumb"),y=n("global-button"),B=n("page-header"),i=n("global-label"),_=n("global-input"),p=n("input-error"),v=n("Multiselect"),A=n("global-textarea"),C=n("AppLayout");return f(),q(C,{title:e.__("Add New Plan")},{default:u(()=>[r(w,null,{default:u(()=>[r(V,{title:e.__("Add New Plan")},null,8,["title"])]),_:1}),s("div",null,[r(B,null,{content:u(()=>[r(y,{url:e.route("plan.index"),loading:!1,type:"link",theme:"primary"},{default:u(()=>[h(m(e.__("All Plan")),1)]),_:1},8,["url"])]),default:u(()=>[h(m(e.__("Add New Plan"))+" ",1)]),_:1})]),s("form",{onSubmit:t[5]||(t[5]=S((...o)=>d.submit&&d.submit(...o),["prevent"]))},[s("div",D,[s("div",null,[s("div",null,[r(i,{for:"title",value:"Title",required:!0}),r(_,{type:"text",id:"title",modelValue:l.form.title,"onUpdate:modelValue":t[0]||(t[0]=o=>l.form.title=o),name:"title",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Title"),error:e.$page.props.errors.title},null,8,["modelValue","placeholder","error"]),r(p,{error:e.$page.props.errors.title},null,8,["error"])]),s("div",O,[r(i,{for:"course",value:"Course",required:!0}),r(v,{id:"course","close-on-select":!0,"can-clear":!0,searchable:!0,modelValue:l.form.course,"onUpdate:modelValue":t[1]||(t[1]=o=>l.form.course=o),"create-option":!1,placeholder:"Course",options:b.courses.map(o=>({value:o.id,label:o.name})),autocomplete:"off"},null,8,["modelValue","options"]),r(p,{error:e.$page.props.errors.course},null,8,["error"])]),s("div",z,[r(i,{for:"currency",value:"Currency",required:!0}),r(v,{id:"currency","close-on-select":!0,"can-clear":!0,searchable:!0,modelValue:l.form.currency,"onUpdate:modelValue":t[2]||(t[2]=o=>l.form.currency=o),"create-option":!1,placeholder:"Currency",options:b.currencies.map(o=>({value:o.code,label:o.name})),autocomplete:"off"},null,8,["modelValue","options"]),r(p,{error:e.$page.props.errors.currency},null,8,["error"])]),s("div",E,[r(i,{for:"description",value:"Description",required:!1}),r(A,{id:"description",modelValue:l.form.description,"onUpdate:modelValue":t[3]||(t[3]=o=>l.form.description=o),name:"description",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Description"),error:e.$page.props.errors.description},null,8,["modelValue","placeholder","error"]),r(p,{error:e.$page.props.errors.description},null,8,["error"])]),R,(f(!0),g(P,null,L(l.benefit_amount,(o,a)=>(f(),g("div",{key:a,class:k(a!=0?"mt-3":"")},[s("div",G,[r(i,{for:"title",class:"w-full",value:"Benefit",required:!0}),r(i,{for:"title",class:"w-4/12",value:"Amount",required:!0})]),s("div",H,[r(_,{type:"text",id:"title",modelValue:l.form.benefits[a],"onUpdate:modelValue":c=>l.form.benefits[a]=c,name:"title",class:"mt-1 block w-full rounded-r-none dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400 testBenefits",placeholder:e.__("Benefit"),error:e.$page.props.errors.benefits},null,8,["modelValue","onUpdate:modelValue","placeholder","error"]),r(_,{type:"number",id:"title",modelValue:l.form.amounts[a],"onUpdate:modelValue":c=>l.form.amounts[a]=c,name:"title",class:"mt-1 block w-4/12 dark:bg-gray-700 dark:border-gray-600 rounded-l-none dark:text-gray-400 testAmounts",placeholder:e.__("Amount"),error:e.$page.props.errors.amounts},null,8,["modelValue","onUpdate:modelValue","placeholder","error"])]),r(p,{error:e.$page.props.errors.benefits},null,8,["error"]),a!=0?(f(),g("button",{key:0,onClick:c=>d.removeBenefit(a),type:"button",class:"text-red-500 mt-1 hover:text-red-600"},m(e.__("Remove Benefit")),9,I)):T("",!0)],2))),128)),s("div",{onClick:t[4]||(t[4]=o=>d.addBenefit()),class:k(["flex justify-end",l.benefit_amount.length>1?"-mt-[22px]":"mt-1"])},[s("button",J,m(e.__("Add New Benefit")),1)],2)]),s("div",K,[r(y,{loading:l.form.processing,type:"submit",cssClass:"w-full mb-4",theme:"primary"},{default:u(()=>[h(m(b.plan?e.__("Update"):e.__("Submit")),1)]),_:1},8,["loading"])])])],32)]),_:1},8,["title"])}const ie=N(M,[["render",Q]]);export{ie as default};
