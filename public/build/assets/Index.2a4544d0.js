import{o as n,e as h,b as o,_ as H,N as K,u as q,Z as X,c as p,w as l,a as r,i as w,F as x,g as b,t as i,j as A,C as Y,r as a,n as C}from"./app.9bacd1a0.js";import{_ as $}from"./AppLayout.8b90d46b.js";import{T as J}from"./ToolTip.90a7442a.js";import{P as Q}from"./Pagination.7c6055c2.js";import W from"./Show.cbb7f888.js";import{s as ee}from"./multiselect.5e8a11c6.js";/* empty css                */import{T as te}from"./TdUserShow.11f3adc8.js";import{_ as re}from"./Modal.d266a93d.js";import{r as oe}from"./TrashIcon.5ff165f8.js";import{c as ae}from"./TopBarMenu.978fcd11.js";import{r as le}from"./PencilSquareIcon.1e81501b.js";import{r as se}from"./EyeIcon.6f597e55.js";import{r as ne}from"./Square2StackIcon.c70ac094.js";import{r as ie}from"./MagnifyingGlassIcon.a62df564.js";import"./WarningToast.5000d5fb.js";import"./NavLink.7e4b7702.js";import"./shepherd.esm.8b0b6bfa.js";import"./PlusCircleIcon.7b47160e.js";import"./UserIcon.2090e4c3.js";import"./CheckCircleIcon.14efd96d.js";import"./Bars3Icon.559bf817.js";import"./XMarkIcon.db621c27.js";function de(e,s){return n(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})])}const ce={components:{AppLayout:$,ToolTip:J,TrashIcon:oe,UsersIcon:ae,PencilSquareIcon:le,Pagination:Q,UserGroupIcon:de,TdUserShow:te,EyeIcon:se,Square2StackIcon:ne,MagnifyingGlassIcon:ie,ShowModal:W,Multiselect:ee,NothingFound:K,ExportModal:re},props:{users:Object,admins:Number,parents:Number,students:Number,teachers:Number,administrations:Number,others:Number,query:Object},data(){var e,s;return{visible:!1,show_user:"",export_data:q({type:"Excel",course:"all"}),filter:q({keyword:(e=this.query.keyword)!=null?e:"",query:(s=this.query.query)!=null?s:"all"}),stats:[{data:this.admins,title:"Total Admins",query:"admin"},{data:this.parents,title:"Total Parents",query:"parent"},{data:this.students,title:"Total Students",query:"student"},{data:this.teachers,title:"Total Teachers",query:"teacher"},{data:this.administrations,title:"Total Administrations",query:"administration"},{data:this.others,title:"Others",query:"other"}]}},methods:{accountManual(e,s){let d=e.target.checked;this.$inertia.post(this.route("user.account.manual",s),{status:d},{preserveScroll:!0})},destroy(e){if(confirm("Are you sure ?"))this.$inertia.delete(this.route("users.destroy",e));else return!1},show(e){this.show_user=e,this.visible=!0},hide(e){this.visible=!1},filterData(){this.filter.get(this.route("users.index"),{preserveScroll:!0})},updateStatus(e,s){let d=e.target.checked;this.$inertia.post(this.route("user.status.update",s),{status:d},{preserveScroll:!0})},exportSubmit(){this.loading=!0;let e={};this.filter.query!==""&&(e.query=this.filter.query),X({url:this.route("all.user.export"),method:"POST",data:{...this.export_data,...e},headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},responseType:"blob"}).then(s=>{console.log("asdjiwfuqhiqjdqwjdoiwqjdiow"),this.export_data.type;var d=window.URL.createObjectURL(new Blob([s.data])),g=document.createElement("a");g.href=d,g.setAttribute("download","allteacher-report.xlsx"),document.body.appendChild(g),g.click(),this.loading=!1,this.visible=!1}).catch(s=>{this.loading=!1,this.visible=!1})}}},ue={class:"flex gap-6 flex-wrap lg:flex-nowrap w-full mb-3"},pe={class:"p-3 text-blue-600 bg-blue-100 dark:bg-blue-500/20 rounded-full"},he={class:"text-2xl mb-0 font-medium text-gray-900 dark:text-gray-400"},me={class:"text-sm mb-0 text-gray-400"},fe={class:"mb-3"},_e={class:"flex col-span-4"},be={class:"relative w-full"},ge={type:"submit",class:"absolute top-6 rtl:left-0 rtl:right-auto right-0 p-2.5 text-sm font-medium text-white bg-blue-700 rtl:rounded-r-0 rtl:rounded-l-lg rounded-r-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},ye={class:"col-span-4 mt-0.5"},ke={class:"col-span-1 md:mt-5"},ve={class:"py-4 px-5"},we={class:"py-4 px-5"},xe={class:"py-4 px-5"},Se={class:"py-4 px-5"},qe={width:"10%",class:"py-4 px-5"},Ae={scope:"row",class:"flex items-center py-4 px-5 text-gray-900 whitespace-nowrap dark:text-white"},Ce={class:"py-4 px-5"},Te={class:"text-xs mt-1"},Ne={class:"py-4 px-5"},Ie={key:0,class:"text-red-500 block"},Ue={key:1,class:"relative inline-flex items-center cursor-pointer"},je=["disabled","onChange","checked"],Me={class:"py-4 px-5"},Ve={class:"relative inline-flex items-center cursor-pointer"},Le=["onChange","checked"],Be=o("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1),Ee={class:"py-4 px-5"},Oe={class:"flex gap-2"},Pe=["onClick","id"],Fe={class:"inline-flex dark:text-gray-400 absolute z-10 -top-4 -right-2 justify-center items-center w-6 h-6 text-xs font-bold text-white bg-red-500 rounded-full border-2 border-white dark:border-gray-900"},Re=["onClick","id"],Ge={class:"flex justify-center"};function De(e,s,d,g,c,_){const T=a("BreadcrumbLink"),N=a("Breadcrumb"),I=a("UserGroupIcon"),m=a("Link"),U=a("badge"),y=a("global-button"),j=a("page-header"),S=a("global-label"),M=a("global-input"),V=a("MagnifyingGlassIcon"),L=a("Multiselect"),B=a("td-user-show"),k=a("eye-icon"),f=a("tool-tip"),v=a("PencilSquareIcon"),E=a("Square2StackIcon"),O=a("trash-icon"),P=a("NothingFound"),F=a("global-table"),R=a("pagination"),G=a("a-button"),D=a("show-modal"),Z=a("a-modal"),z=a("AppLayout");return n(),p(z,{title:e.__("Users")},{default:l(()=>[r(N,null,{default:l(()=>[r(T,{title:e.__("Users")},null,8,["title"])]),_:1}),o("div",null,[o("div",ue,[(n(!0),h(x,null,w(c.stats,(t,u)=>(n(),p(m,{key:u,"preserve-scroll":"",href:e.route("users.index",{query:t.query}),class:"hover:bg-gray-50 shadow-sm flex items-center w-64 flex-grow gap-4 p-6 bg-white border border-gray-100 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-800 rounded-lg",id:"test_"+t.query},{default:l(()=>[o("span",pe,[r(I,{class:"w-6 h-6"})]),o("div",null,[o("h3",he,i(t.data),1),o("p",me,i(t.title),1)])]),_:2},1032,["href","id"]))),128))]),r(j,null,{content:l(()=>[e.term?(n(),p(m,{key:0,"preserve-scroll":"",href:e.route("users.index")},{default:l(()=>[r(y,{loading:!1,type:"button",class:"text-white bg-pink-500 dark:bg-pink-500 hover:bg-pink-400 active:bg-pink-600 dark:active:bg-pink-600 focus:border-pink-600 dark:focus:border-pink-600 focus:ring focus:ring-pink-300 dark:focus:ring-pink-300"},{default:l(()=>[b(i(e.__("All User")),1)]),_:1})]),_:1},8,["href"])):A("",!0),r(y,{"preserve-scroll":"",loading:!1,type:"link",cssClass:"ml-2",url:e.route("users.create"),theme:"primary"},{default:l(()=>[b(i(e.__("Create User")),1)]),_:1},8,["url"])]),default:l(()=>[b(i(e.__("All User"))+" ",1),r(U,null,{default:l(()=>[b(i(d.users.total),1)]),_:1})]),_:1}),o("div",fe,[o("form",{class:"items-center grid grid-cols-1 md:grid-cols-9 gap-6",onSubmit:s[2]||(s[2]=Y(t=>_.filterData(),["prevent"]))},[o("div",_e,[o("div",be,[r(S,{for:"name",value:"Search Here",required:!1}),r(M,{type:"search",class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Name, Email or Role"),modelValue:c.filter.keyword,"onUpdate:modelValue":s[0]||(s[0]=t=>c.filter.keyword=t)},null,8,["placeholder","modelValue"]),o("button",ge,[r(V,{class:"w-5 h-5"})])])]),o("div",ye,[r(S,{for:"name",value:"Select Role",required:!1}),r(L,{"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,modelValue:c.filter.query,"onUpdate:modelValue":s[1]||(s[1]=t=>c.filter.query=t),placeholder:e.__("Select a role"),options:[{label:"All",value:"all"},{label:"Admins",value:"Admin"},{label:"Parents",value:"Parent"},{label:"Admission",value:"Student"},{label:"Teachers",value:"Teacher"},{label:"Administrations",value:"Administration"},{label:"Accountant",value:"Other"}],autocomplete:"off"},null,8,["modelValue","placeholder"])]),o("div",ke,[r(y,{loading:c.filter.processing,type:"submit",theme:"primary"},{default:l(()=>[b(i(e.__("Search")),1)]),_:1},8,["loading"])])],32)]),r(F,null,{head:l(()=>[o("th",ve,i(e.__("Name")),1),o("th",we,i(e.__("Role")),1),o("th",xe,i(e.__("Active/Ban")),1),o("th",Se,i(e.__("Manual Attendance")),1),o("th",qe,i(e.__("Action")),1)]),body:l(()=>[d.users.data.length>0?(n(!0),h(x,{key:0},w(d.users.data,t=>(n(),h("tr",{key:t.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[o("td",Ae,[r(B,{image:t.profile_photo_url,name:t.name,email:t.email},null,8,["image","name","email"])]),o("td",Ce,[o("div",null,[(n(!0),h(x,null,w(t.roles,u=>(n(),h("span",{key:u.id,class:"bg-blue-100 dark:bg-gray-700 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:text-gray-400"},i(u.name),1))),128))]),o("div",Te,i(t.join_date),1)]),o("td",Ne,[t.role=="Admin"&&t.id==e.$page.props.auth.id?(n(),h("small",Ie,i(e.__("You cant ban yourself")),1)):(n(),h("label",Ue,[o("input",{disabled:t.role=="Admin"&&t.id==e.$page.props.auth.id,onChange:u=>_.updateStatus(u,t.id),checked:t.status,type:"checkbox",class:C(["sr-only peer",t.role=="Admin"&&t.id==e.$page.props.auth.id?"cursor-not-allowed":""])},null,42,je),o("div",{class:C([t.role=="Admin"&&t.id==e.$page.props.auth.id?"opacity-50":"","w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"])},null,2)]))]),o("td",Me,[o("label",Ve,[o("input",{onChange:u=>_.accountManual(u,t.id),checked:t.manual,type:"checkbox",class:"sr-only peer"},null,40,Le),Be])]),o("td",Ee,[o("div",Oe,[t.role=="Student"?(n(),p(m,{key:0,"preserve-scroll":"",href:e.route("student.show",t.username),class:"group relative",id:"show"+t.id},{default:l(()=>[r(k,{class:"w-6 h-6 text-pink-400 hover:text-pink-300"}),r(f,{text:e.__("View")},null,8,["text"])]),_:2},1032,["href","id"])):t.role=="Teacher"?(n(),p(m,{key:1,"preserve-scroll":"",href:e.route("teacher.show",t.id),class:"group relative",id:"show"+t.id},{default:l(()=>[r(k,{class:"w-6 h-6 text-pink-400 hover:text-pink-300"}),r(f,{text:e.__("View")},null,8,["text"])]),_:2},1032,["href","id"])):(n(),h("button",{key:2,type:"button",onClick:u=>_.show(t),class:"group relative",id:"show"+t.id},[r(k,{class:"w-6 h-6 text-pink-400 hover:text-pink-300"}),r(f,{text:e.__("View")},null,8,["text"])],8,Pe)),t.role=="Student"?(n(),p(m,{key:3,"preserve-scroll":"",href:e.route("student.admission.edit",t.id),class:"group relative",id:"edit"+t.id},{default:l(()=>[r(v,{class:"text-blue-400 w-6 h-6 hover:text-blue-300"}),r(f,{text:e.__("Edit")},null,8,["text"])]),_:2},1032,["href","id"])):t.role=="Teacher"?(n(),p(m,{key:4,"preserve-scroll":"",href:e.route("teachers.edit",t.id),class:"group relative",id:"edit"+t.id},{default:l(()=>[r(v,{class:"text-blue-400 w-6 h-6 hover:text-blue-300"}),r(f,{text:e.__("Edit")},null,8,["text"])]),_:2},1032,["href","id"])):(n(),p(m,{key:5,"preserve-scroll":"",href:e.route("users.edit",t.id),class:"group relative",id:"edit"+t.id},{default:l(()=>[r(v,{class:"text-blue-400 w-6 h-6 hover:text-blue-300"}),r(f,{text:e.__("Edit")},null,8,["text"])]),_:2},1032,["href","id"])),t.role=="Teacher"?(n(),p(m,{key:6,"preserve-scroll":"",href:e.route("teacher.classes",t.id),class:"group relative cursor-pointer",id:"teacherSubject"+t.id},{default:l(()=>[r(E,{class:"w-6 h-6 text-purple-400 hover:text-purple-300"}),r(f,{text:e.__("Subjects")},null,8,["text"]),o("div",Fe,i(t.subjects_count),1)]),_:2},1032,["href","id"])):A("",!0),o("button",{type:"button",onClick:u=>_.destroy(t.id),class:"group relative",id:"delete"+t.id},[r(O,{class:"w-6 h-6 text-red-400 hover:text-red-300"}),r(f,{text:e.__("Delete")},null,8,["text"])],8,Re)])])]))),128)):(n(),p(P,{key:1,asShow:"tr"}))]),_:1}),o("div",Ge,[r(R,{class:"mt-6 mb-6",links:d.users.links},null,8,["links"])])]),r(Z,{visible:c.visible,"onUpdate:visible":s[3]||(s[3]=t=>c.visible=t),title:c.show_user.name,onOk:_.hide},{footer:l(()=>[r(G,{key:"back",onClick:_.hide},{default:l(()=>[b(i(e.__("Close")),1)]),_:1},8,["onClick"])]),default:l(()=>[r(D,{user:c.show_user},null,8,["user"])]),_:1},8,["visible","title","onOk"])]),_:1},8,["title"])}const ht=H(ce,[["render",De]]);export{ht as default};
