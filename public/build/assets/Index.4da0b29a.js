import{_ as L}from"./AppLayout.ae55cab5.js";import{_ as A,a7 as S,a8 as B,N as T,u as N,f as I,Z as C,o as h,c as D,w as r,g as _,t as o,a as l,b as e,C as F,s as u,a3 as f,e as m,i as M,F as E,r as n,V as O,W as V}from"./app.8123fe3b.js";import{_ as U}from"./Modal.a8b4c637.js";import"./TopBarMenu.831e8367.js";import"./CheckCircleIcon.1ab93f1e.js";import"./shepherd.esm.6ceab578.js";import"./XMarkIcon.842ecca4.js";import"./WarningToast.eff4882a.js";import"./NavLink.9e4c6fb6.js";import"./PlusCircleIcon.9cc6e4a0.js";import"./UserIcon.53552b9e.js";import"./Bars3Icon.d71deab9.js";const R={components:{AppLayout:L,Breadcrumb:S,BreadcrumbLink:B,NothingFound:T,ExportModal:U},props:{attendanceteacher:{type:Array,required:!0}},data(){return{loading:!1,options:[],options2:[],export_options:[],visible:!1,export_visible:!1,show_user:"",export_data:N({type:"Excel",course:"all"}),filter:{name:"",month:""}}},setup(t){return{attendanceteacher:I(t.attendanceteacher)}},computed:{filteredAttendance(){return this.attendanceteacher.filter(t=>{let a=!0,d=!0;return this.filter.name.trim()!==""&&(a=t.user.name.toLowerCase().includes(this.filter.name.trim().toLowerCase())),this.filter.month!==""&&(d=new Date(t.date).toISOString().slice(0,7)===this.filter.month),a&&d})}},methods:{filterData(){this.attendanceteacher=this.filteredAttendance},exportSubmit(){this.loading=!0;let t={};this.filter.name.trim()!==""&&(t.name=this.filter.name.trim()),this.filter.month!==""&&(t.month=this.filter.month),C({url:this.route("teacherattendance.export"),method:"POST",data:{...this.export_data,...t},headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},responseType:"blob"}).then(a=>{this.export_data.type;var d=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");i.href=d,i.setAttribute("download","teacherattendance-report.xlsx"),document.body.appendChild(i),i.click(),this.loading=!1,this.visible=!1}).catch(a=>{this.loading=!1,this.visible=!1})}}},j=t=>(O("data-v-734c9e05"),t=t(),V(),t),q={class:"flex flex-col sm:flex-row gap-4"},K={class:"mb-4"},P={class:"flex items-center"},W={for:"month",class:"ml-4 mr-2"},X={type:"submit",class:"ml-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},Z={class:"py-4 px-5"},z={class:"py-4 px-5"},G={class:"py-4 px-5"},H={class:"py-4 px-5"},J={class:"py-4 px-5"},Q={class:"py-4 px-5"},Y={class:"py-4 px-5 text-gray-900 dark:text-white"},$={class:"py-4 px-5 text-gray-900 dark:text-white"},tt={class:"py-4 px-5 text-gray-900 dark:text-white"},et={class:"py-4 px-5 text-gray-900 dark:text-white"},ot={class:"py-4 px-5 text-gray-900 dark:text-white"},at={class:"py-4 px-5 text-gray-900 dark:text-white"},st={key:1},rt={colspan:"6",class:"text-center p-4"},nt=j(()=>e("div",{class:"flex justify-center"},null,-1));function it(t,a,d,i,p,c){const b=n("BreadcrumbLink"),x=n("Breadcrumb"),y=n("global-button"),g=n("page-header"),v=n("NothingFound"),w=n("global-table"),k=n("AppLayout");return h(),D(k,{title:t.__("Teacher Attendance")},{header:r(()=>[_(o(t.__("Teacher Attendance")),1)]),default:r(()=>[l(x,null,{default:r(()=>[l(b,{title:t.__("Teacher Attendance"),href:t.route("teacher.class")},null,8,["title","href"])]),_:1}),e("div",null,[l(g,{class:"flex-col sm:flex-row"},{content:r(()=>[e("div",q,[l(y,{loading:!1,onClick:a[0]||(a[0]=s=>c.exportSubmit()),type:"button",theme:"sky"},{default:r(()=>[_(o(t.__("Export")),1)]),_:1})])]),default:r(()=>[_(o(t.__("Teacher Attendance"))+" ",1)]),_:1}),e("div",K,[e("form",{onSubmit:a[3]||(a[3]=F((...s)=>c.filterData&&c.filterData(...s),["prevent"]))},[e("div",P,[u(e("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=s=>p.filter.name=s),id:"name",placeholder:"Name",class:"p-2 border rounded"},null,512),[[f,p.filter.name]]),e("label",W,o(t.__("Month"))+":",1),u(e("input",{type:"month","onUpdate:modelValue":a[2]||(a[2]=s=>p.filter.month=s),id:"month",class:"p-2 border rounded"},null,512),[[f,p.filter.month]]),e("button",X,o(t.__("Filter")),1)])],32)]),l(w,null,{head:r(()=>[e("th",Z,o(t.__("Name")),1),e("th",z,o(t.__("Date")),1),e("th",G,o(t.__("Time In")),1),e("th",H,o(t.__("Time Out")),1),e("th",J,o(t.__("Latlon In")),1),e("th",Q,o(t.__("Latlon Out")),1)]),body:r(()=>[c.filteredAttendance.length>0?(h(!0),m(E,{key:0},M(c.filteredAttendance,s=>(h(),m("tr",{key:s.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[e("td",Y,o(s.user.name),1),e("td",$,o(s.date),1),e("td",tt,o(s.time_in),1),e("td",et,o(s.time_out),1),e("td",ot,o(s.latlon_in),1),e("td",at,o(s.latlon_out),1)]))),128)):(h(),m("tr",st,[e("td",rt,[l(v,{asShow:"div"})])]))]),_:1}),nt])]),_:1},8,["title"])}const gt=A(R,[["render",it],["__scopeId","data-v-734c9e05"]]);export{gt as default};
