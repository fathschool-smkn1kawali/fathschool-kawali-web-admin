import{_ as A}from"./AppLayout.f7869522.js";import{P as B}from"./Pagination.141e6051.js";import{_ as F,I as k,o as i,e as u,a,w as c,b as l,n as _,g,t as o,F as y,i as x,j as h,r as n}from"./app.eb4bca63.js";import{F as H}from"./FullCalendar.430fb743.js";import{_ as N}from"./StatCard.9bc66697.js";import{s as M}from"./multiselect.bd328a4e.js";/* empty css                */import"./TopBarMenu.57ba7e85.js";import"./CheckCircleIcon.c15b336b.js";import"./shepherd.esm.28e46ee4.js";import"./XMarkIcon.c835eea2.js";import"./WarningToast.ca887990.js";import"./NavLink.88c501bd.js";import"./PlusCircleIcon.b3c660e0.js";import"./UserIcon.11494925.js";import"./Bars3Icon.9d3eeab9.js";import"./main.37f83fe2.js";import"./main.3ea356f7.js";import"./main.fd3fb458.js";const I={props:{leaves:Object,leave_types:Array,total_submit:String,total_approved:String,total_rejected:String,total_pending:String},data(){return{customDateFormat:"DD-MM-YYYY HH:mm",loading:!1,form:{date:"",date2:"",description:"",leave_type_id:this.leave_types[0]?this.leave_types[0].id:""},filter:{keyword:"",status:""},leave:"",tab:this.leave_types[0]?this.leave_types[0].id:"",newLeaveRequest:!1}},components:{AppLayout:A,FullCalendar:H,Pagination:B,StatCard:N,Multiselect:M},methods:{selectType(e){this.tab=e,this.form.leave_type_id=e},disabledDate(e){const s=new Date;return s.setHours(0,0,0,0),e&&e.valueOf()<s.valueOf()},submit(){this.loading=!0;let e=k(this.form.date[0]),s=k(this.form.date[1]);this.form.date2=[e,s],this.$inertia.post(this.route("leave.store"),this.form,{preserveScroll:!0,onSuccess:d=>{this.form.date=null,this.form.description=""},onFinish:d=>{this.loading=!1}})}}},Y={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-6 mb-4 mt-6"},z={class:"grid grid-cols-1 xl:grid-cols-3 gap-6 mt-6"},O={class:"dark:text-gray-400 flex items-center"},P={class:"bg-blue-500 text-white rounded ml-2 rtl:ml-0 rtl:mr-2 px-1 text-xs py-0.5"},U={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},E={class:"flex justify-between items-center"},G={class:"flex items-center gap-2"},J=["src","alt"],K={class:"text-lg font-bold dark:text-gray-400"},Q={class:"text-sm text-gray-400"},W={class:"py-2 dark:opacity-70 px-5 text-sm font-medium text-blue-500 focus:outline-none bg-blue-100 rounded-lg border border-gray-200"},X={class:"mb-3 mt-3 font-normal text-gray-500 dark:text-gray-400"},Z={class:"text-md text-gray-700 dark:text-gray-400 mb-2"},$={class:"flex justify-between items-center"},ee={class:"bg-blue-100 text-blue-800 text-sm font-medium mr-2 rtl:mr-0 rtl:ml-2 px-2.5 py-0.5 rounded dark:bg-blue-200 dark:text-blue-800 capitalize"},te={key:1,class:"col-span-1 md:col-span-6 text-center text-gray-400"},le={class:"flex justify-center"},ae={key:0,class:"w-full p-6 bg-white dark:bg-gray-800 dark:border-gray-700 rounded-lg"},se={class:"mb-3 text-lg font-bold dark:text-gray-400"},oe={key:0,class:"mb-3"},re={class:"rounded-lg bg-gray-50 dark:bg-gray-700"},ne={class:"flex items-center text-center gap-2"},de=["onClick","for"],ie=["value","id"],ue={class:"mb-3"},ce={key:1,class:"mb-3"},pe={class:"mb-1"},me={class:"mt-6 flex gap-4"},_e={class:"mt-4 overflow-x-auto rounded-md bg-white dark:bg-gray-800"};function ge(e,s,d,ve,r,v){const w=n("Head"),L=n("BreadcrumbLink"),D=n("Breadcrumb"),p=n("stat-card"),b=n("global-button"),T=n("page-header"),q=n("pagination"),m=n("input-error"),f=n("global-label"),C=n("a-range-picker"),R=n("Multiselect"),S=n("global-textarea"),j=n("full-calendar"),V=n("AppLayout");return i(),u(y,null,[a(w,{title:e.__("Leave Request")},null,8,["title"]),a(V,null,{default:c(()=>[a(D,null,{default:c(()=>[a(L,{title:e.__("Leave Request")},null,8,["title"])]),_:1}),l("div",null,[l("div",Y,[a(p,{title:e.__("Total Leave Apply"),value:d.total_submit,label:e.__("Days")},null,8,["title","value","label"]),a(p,{title:e.__("Total Pending Leave"),value:d.total_pending,label:e.__("Days")},null,8,["title","value","label"]),a(p,{title:e.__("Total Approved Leave"),value:d.total_approved,label:e.__("Days")},null,8,["title","value","label"]),a(p,{title:e.__("Total Rejected Leave"),value:d.total_rejected,label:e.__("Days")},null,8,["title","value","label"])]),l("div",z,[l("div",{class:_(["lg:col-span-2 overflow-x-auto rounded-lg",r.newLeaveRequest?"xl:col-span-2":"xl:col-span-3"])},[a(T,null,{content:c(()=>[a(b,{onClick:s[0]||(s[0]=t=>r.newLeaveRequest=!r.newLeaveRequest),type:"button",css:"",theme:"primary"},{default:c(()=>[g(o(e.__("New Leave Request")),1)]),_:1})]),default:c(()=>[l("div",O,[l("span",null,o(e.__("Leaves")),1),l("span",P,o(d.leaves.total),1)])]),_:1}),l("div",U,[d.leaves.data.length>0?(i(!0),u(y,{key:0},x(d.leaves.data,t=>(i(),u("div",{class:"p-6 mb-6 bg-white rounded-lg dark:bg-gray-800 dark:border-gray-700",key:t.id},[l("div",E,[l("div",G,[l("div",null,[l("img",{class:"w-12 h-12 rounded-full",src:t.user.profile_photo_url,alt:t.user.name},null,8,J)]),l("div",null,[l("div",K,o(t.user.name),1),l("div",Q,o(t.user.role),1)])]),l("div",null,[l("div",W,o(t.days),1)])]),l("p",X,o(t.description),1),l("div",Z,o(e.formatTime(t.start,""))+" - "+o(e.formatTime(t.start,"")),1),l("div",$,[l("div",null,[l("span",ee,o(t.type?t.type.name:""),1)]),l("div",null,[l("div",{class:_(["capitalize",t.status=="accepted"?"text-green-500":t.status=="pending"?"text-purple-500":t.status=="rejected"?"text-red-500":""])},o(t.status),3)])])]))),128)):(i(),u("div",te,o(e.__("No Leave Request")),1))]),l("div",le,[a(q,{class:"mt-6",links:d.leaves.links},null,8,["links"])])],2),r.newLeaveRequest?(i(),u("div",ae,[l("div",se,o(e.__("Request for leave")),1),e.$page.props.auth.role=="Accountant"||e.$page.props.auth.role=="Teacher"?(i(),u("div",oe,[l("div",re,[l("nav",ne,[(i(!0),u(y,null,x(d.leave_types,t=>(i(),u("label",{key:t.id,onClick:be=>v.selectType(t.id),for:t.slug,class:_([r.tab==t.id?"bg-blue-500 text-white":"text-gray-700 dark:text-gray-400","cursor-pointer whitespace-nowrap text-md rounded-md py-2 px-6 font-bold"])},[g(o(t.name)+" ",1),l("input",{value:t.id,type:"checkbox",id:t.slug,class:"sr-only hidden"},null,8,ie)],10,de))),128))])]),a(m,{error:e.$page.props.errors.leave_type_id},null,8,["error"])])):h("",!0),l("div",ue,[a(f,{for:"end_date",value:e.__("Leave Duration"),required:!0},null,8,["value"]),a(C,{"show-time":{format:"HH:mm"},placeholder:["Start Time","End Time"],class:_([e.$page.props.errors.date?"border-custom":"","custom-input dark:bg-gray-700 dark:border-gray-700 dark:text-gray-400"]),name:"date","disabled-date":v.disabledDate,"disabled-time":e.disabledRangeTime,value:r.form.date,"onUpdate:value":s[1]||(s[1]=t=>r.form.date=t),format:r.customDateFormat},null,8,["class","disabled-date","disabled-time","value","format"]),a(m,{error:e.$page.props.errors.date},null,8,["error"])]),e.$page.props.auth.role=="Student"?(i(),u("div",ce,[a(f,{for:"type",value:e.__("Type"),required:!0},null,8,["value"]),a(R,{id:"type","close-on-select":!0,"can-clear":!0,searchable:!1,modelValue:r.form.status,"onUpdate:modelValue":s[2]||(s[2]=t=>r.form.status=t),"create-option":!1,placeholder:e.__("Select Type"),options:d.leave_types.map(t=>({value:t.id,label:t.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"]),a(m,{error:e.$page.props.errors.leave_type_id},null,8,["error"])])):h("",!0),l("div",pe,[a(f,{for:"description",value:e.__("Description"),required:!0},null,8,["value"]),a(S,{placeholder:e.__("Description"),id:"name",error:e.$page.props.errors.description,modelValue:r.form.description,"onUpdate:modelValue":s[3]||(s[3]=t=>r.form.description=t),class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400"},null,8,["placeholder","error","modelValue"]),a(m,{error:e.$page.props.errors.description},null,8,["error"])]),l("div",me,[a(b,{loading:r.loading,onClick:s[4]||(s[4]=t=>v.submit()),type:"button",cssClass:"mt-2",theme:"primary"},{default:c(()=>[g(o(e.__("Save")),1)]),_:1},8,["loading"]),a(b,{loading:!1,type:"button",onClick:s[5]||(s[5]=t=>r.newLeaveRequest=!1),cssClass:"mt-2",theme:"danger"},{default:c(()=>[g(o(e.__("Cancel")),1)]),_:1})])])):h("",!0)]),l("div",_e,[a(j,{data:d.leaves.data},null,8,["data"])])])]),_:1})],64)}const Ne=F(I,[["render",ge],["__scopeId","data-v-c4a7de33"]]);export{Ne as default};
