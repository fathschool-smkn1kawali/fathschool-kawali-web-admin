import{_ as z}from"./AppLayout.ae55cab5.js";import{P as H}from"./Pagination.65c430be.js";import K from"./Form.08478039.js";import{T as J}from"./ToolTip.1835e2a8.js";import W from"./Show.7515a796.js";import{_ as Y}from"./Modal.a8b4c637.js";import{F as Z}from"./FullCalendar.29d8d9d7.js";import{T as $}from"./TdUserShow.2d3785a6.js";import{_ as ee,u as te,N as oe,o as _,e as h,a as s,w as d,b as t,g as p,t as l,C as se,F as f,i as ae,c as le,r as a,j as k,n as re}from"./app.8123fe3b.js";import{r as ne}from"./PencilSquareIcon.1e366d76.js";import{r as ie}from"./TrashIcon.dc73b1e6.js";import{r as de}from"./MagnifyingGlassIcon.ae118601.js";import{r as ce}from"./EyeIcon.66b0a80a.js";import{r as ue}from"./CheckIcon.b977d0cf.js";import{r as _e}from"./XMarkIcon.842ecca4.js";import"./TopBarMenu.831e8367.js";import"./CheckCircleIcon.1ab93f1e.js";import"./shepherd.esm.6ceab578.js";import"./WarningToast.eff4882a.js";import"./NavLink.9e4c6fb6.js";import"./PlusCircleIcon.9cc6e4a0.js";import"./UserIcon.53552b9e.js";import"./Bars3Icon.d71deab9.js";import"./main.df2cf2f0.js";import"./main.a5a90600.js";import"./main.dd4bfc63.js";const pe={props:{leaves:Object,filter_data:Object,users:Object},data(){var e,r,n,u;return{loading:!1,causeModal:!1,filter:{keyword:(e=this.filter_data.keyword)!=null?e:"",status:(r=this.filter_data.status)!=null?r:"",role:(n=this.filter_data.role)!=null?n:""},searchQuery:(u=this.filter_data.keyword)!=null?u:"",leave:"",visible:!1,show_leave:"",reject:te({id:"",cause_description:""})}},components:{AppLayout:z,Pagination:H,PencilSquareIcon:ne,TrashIcon:ie,RejectModal:Y,MagnifyingGlassIcon:de,EditForm:K,EyeIcon:ce,CheckIcon:ue,XMarkIcon:_e,TdUserShow:$,ToolTip:J,ShowModal:W,FullCalendar:Z,NothingFound:oe},watch:{searchQuery(e){this.filter.keyword=e,this.filterData()}},methods:{filterData(){this.loading=!0,this.$inertia.get(this.route("manage-leave.index"),this.filter,{preserveScroll:!0,onFinish:e=>{this.loading=!1}})},statusChange(e,r){this.loading=!0,this.$inertia.post(this.route("leave.status.change",e),{status:r,cause:this.reject.cause_description},{preserveScroll:!0,onSuccess:n=>{this.closeModal()},onFinish:n=>{this.loading=!1}})},rejectStatus(e){this.reject.id=e,this.causeModal=!0},closeModal(){this.reject.cause_description="",this.reject.id="",this.causeModal=!1},destroy(e){if(confirm("Are you sure ?"))this.$inertia.delete(this.route("manage-leave.destroy",e),{preserveScroll:!0});else return!1},edit(e){this.leave=e,this.$refs.editModal.showModal()},show(e){this.show_leave=e,this.visible=!0},hide(){this.visible=!1},setTabValue(e){var u,i;let r=(u=e.filter_column_data)!=null?u:"",n=(i=e.value)!=null?i:"";this.filter[r]=n}}},me={class:"pb-12 overflow-x-auto"},he={class:"dark:text-gray-400 flex items-center"},ge={class:"bg-blue-500 text-white rounded ml-2 px-1 text-xs py-0.5"},be={class:"mb-4"},fe={class:"flex xl:col-span-2"},ye={class:"relative w-full"},ke={type:"submit",class:"absolute top-1 right-0 p-2.5 text-sm font-medium text-white bg-blue-700 rounded-r-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},ve={class:"sr-only"},we={class:"xl:col-span-2"},xe={class:"xl:col-span-2"},Ce={class:"overflow-hidden"},je={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Se={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Te={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Me={scope:"col",class:"py-4 px-5 whitespace-nowrap"},De={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Ie={scope:"row",class:"flex items-center py-4 px-5 text-gray-900 whitespace-nowrap dark:text-white"},Ae={class:"py-4 px-5"},Ve={class:"inline-block mb-2 bg-blue-100 dark:bg-gray-700 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:text-gray-400"},Le={key:0},Fe={class:"py-4 px-5 whitespace-nowrap"},Ne={class:"mb-2"},Be={class:"py-4 px-5"},Pe={class:"py-4 px-5"},Re={class:"flex gap-1 items-center"},Ee=["onClick","id"],Oe=["onClick","id"],qe=["onClick","id"],Qe=["onClick","id"],Ue=["onClick","id"],Ge={class:"flex justify-center"},Xe={class:"bg-white rounded-lg overflow-x-auto dark:bg-gray-800"},ze={class:"mb-1"};function He(e,r,n,u,i,c){const v=a("Head"),w=a("BreadcrumbLink"),x=a("Breadcrumb"),g=a("global-button"),C=a("page-header"),j=a("global-input"),S=a("MagnifyingGlassIcon"),y=a("tab-filter"),T=a("td-user-show"),M=a("CheckIcon"),m=a("tool-tip"),D=a("XMarkIcon"),I=a("PencilSquareIcon"),A=a("eye-icon"),V=a("trash-icon"),L=a("NothingFound"),F=a("global-table"),N=a("pagination"),B=a("full-calendar"),P=a("edit-form"),R=a("a-button"),E=a("show-modal"),O=a("a-modal"),q=a("global-label"),Q=a("global-textarea"),U=a("input-error"),G=a("reject-modal"),X=a("AppLayout");return _(),h(f,null,[s(v,{title:e.__("Leave List")},null,8,["title"]),s(X,null,{default:d(()=>[s(x,null,{default:d(()=>[s(w,{title:e.__("Leave")},null,8,["title"])]),_:1}),t("div",me,[s(C,null,{content:d(()=>[s(g,{loading:!1,type:"link",url:e.route("leave-type.index"),theme:"primary",id:"testLeaveType"},{default:d(()=>[p(l(e.__("Leave Type")),1)]),_:1},8,["url"])]),default:d(()=>[t("div",he,[t("span",null,l(e.__("Leave List")),1),t("span",ge,l(n.leaves.total),1)])]),_:1}),t("div",null,[t("div",be,[t("form",{class:"items-center grid grid-cols-1 xl:grid-cols-7 gap-6",onSubmit:r[1]||(r[1]=se(o=>c.filterData(),["prevent"]))},[t("div",fe,[t("div",ye,[s(j,{modelValue:i.searchQuery,"onUpdate:modelValue":r[0]||(r[0]=o=>i.searchQuery=o),type:"text",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Keyword")},null,8,["modelValue","placeholder"]),t("button",ke,[s(S,{class:"w-5 h-5"}),t("span",ve,l(e.__("Search")),1)])])]),t("div",we,[s(y,{onSetTabData:c.setTabValue,filterData:n.filter_data?n.filter_data.role:"",filter_column:"role",tab_data:[{title:"All",id:"all",value:"all"},{title:"Student",id:"student",value:"Student"},{title:"Teacher",id:"teacher",value:"Teacher"},{title:"Accountant",id:"accountant",value:"Accountant"},{title:"Admin",id:"admin",value:"Admin"}]},null,8,["onSetTabData","filterData"])]),t("div",xe,[s(y,{onSetTabData:c.setTabValue,filterData:n.filter_data?n.filter_data.status:"",filter_column:"status",tab_data:[{title:"All",id:"all",value:"all"},{title:"Pending",id:"pending",value:"pending"},{title:"Accepted",id:"accepted",value:"accepted"},{title:"Rejected",id:"rejected",value:"rejected"}]},null,8,["onSetTabData","filterData"])]),t("div",null,[s(g,{loading:i.loading,type:"submit",theme:"primary",class:"whitespace-nowrap"},{default:d(()=>[p(l(e.__("Search")),1)]),_:1},8,["loading"])])],32)]),t("div",Ce,[s(F,null,{head:d(()=>[t("th",je,l(e.__("Name")),1),t("th",Se,l(e.__("Role")),1),t("th",Te,l(e.__("Date")),1),t("th",Me,l(e.__("Status")),1),t("th",De,l(e.__("Action")),1)]),body:d(()=>[n.leaves.data.length>0?(_(!0),h(f,{key:0},ae(n.leaves.data,o=>(_(),h("tr",{key:o.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[t("td",Ie,[s(T,{image:o.user.profile_photo_url,name:o.user.name,email:o.user.email},null,8,["image","name","email"])]),t("td",Ae,[t("div",Ve,l(o.user.role),1),o.user.department&&o.user.role=="Teacher"?(_(),h("div",Le,l(o.user.department.name),1)):k("",!0)]),t("td",Fe,[t("div",Ne,l(o.days),1),t("div",null,l(e.formatTime(o.start,""))+" - "+l(e.formatTime(o.end,"")),1)]),t("td",Be,[t("span",{class:re([o.status=="pending"?"bg-purple-100 text-purple-800 dark:bg-purple-200 dark:text-purple-900 dark:opacity-60":o.status=="accepted"?"bg-green-100 text-green-800 dark:bg-green-200 dark:text-green-900 dark:opacity-60":o.status=="rejected"?"bg-red-100 text-red-800 dark:bg-red-200 dark:text-red-900 dark:opacity-60":"","capitalize text-xs font-semibold mr-2 px-2.5 py-0.5 rounded"])},l(o.status),3)]),t("td",Pe,[t("div",Re,[o.status=="pending"?(_(),h(f,{key:0},[t("button",{type:"button",onClick:b=>c.statusChange(o.id,"accepted"),class:"group relative",id:"testAccept"+o.id},[s(M,{class:"text-green-500 w-6 h-6"}),s(m,{text:e.__("Accept")},null,8,["text"])],8,Ee),t("button",{type:"button",onClick:b=>c.rejectStatus(o.id),class:"group relative",id:"testReject"+o.id},[s(D,{class:"text-red-500 w-6 h-6"}),s(m,{text:e.__("Reject")},null,8,["text"])],8,Oe),t("button",{onClick:b=>c.edit(o),type:"button",class:"group relative",id:"testEdit"+o.id},[s(I,{class:"text-blue-400 hover:text-blue-300 w-6 h-6"}),s(m,{text:e.__("Edit")},null,8,["text"])],8,qe)],64)):k("",!0),t("button",{onClick:b=>c.show(o),type:"button",class:"group relative",id:"testShow"+o.id},[s(A,{class:"w-6 h-6 text-pink-400 hover:text-pink-300"}),s(m,{text:e.__("View")},null,8,["text"])],8,Qe),t("button",{type:"button",onClick:b=>c.destroy(o.id),class:"group relative",id:"testDelete"+o.id},[s(V,{class:"w-6 h-6 text-red-400 hover:text-red-300"}),s(m,{text:e.__("Delete")},null,8,["text"])],8,Ue)])])]))),128)):(_(),le(L,{key:1,asShow:"tr",cssClass:"text-center"}))]),_:1}),t("div",Ge,[s(N,{class:"mt-6",links:n.leaves.links},null,8,["links"])])])])]),t("div",Xe,[s(B,{data:n.leaves.data},null,8,["data"])]),s(P,{ref:"editModal",users:n.users,leave:i.leave},null,8,["users","leave"]),s(O,{visible:i.visible,"onUpdate:visible":r[2]||(r[2]=o=>i.visible=o),title:i.show_leave&&i.show_leave.user.name,onOk:c.hide},{footer:d(()=>[s(R,{key:"back",onClick:c.hide},{default:d(()=>[p(l(e.__("Close")),1)]),_:1},8,["onClick"])]),default:d(()=>[s(E,{leave:i.show_leave},null,8,["leave"])]),_:1},8,["visible","title","onOk"]),s(G,{show:i.causeModal,onClose:c.closeModal},{title:d(()=>[p(l(e.__("Insert Reject Cause")),1)]),content:d(()=>[t("div",ze,[s(q,{for:"description",value:"Cause",required:!0}),s(Q,{placeholder:e.__("Description"),id:"name",error:e.$page.props.errors.cause,modelValue:i.reject.cause_description,"onUpdate:modelValue":r[3]||(r[3]=o=>i.reject.cause_description=o),class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400"},null,8,["placeholder","error","modelValue"]),s(U,{error:e.$page.props.errors.cause},null,8,["error"])])]),footer:d(()=>[s(g,{loading:!1,type:"button",onClick:r[4]||(r[4]=o=>c.closeModal()),class:"mr-2",theme:"outline-danger"},{default:d(()=>[p(l(e.__("Cancel")),1)]),_:1}),s(g,{loading:i.reject.processing,type:"button",onClick:r[5]||(r[5]=o=>c.statusChange(i.reject.id,"rejected"))},{default:d(()=>[p(l(e.__("Save")),1)]),_:1},8,["loading"])]),_:1},8,["show","onClose"])]),_:1})],64)}const kt=ee(pe,[["render",He]]);export{kt as default};
