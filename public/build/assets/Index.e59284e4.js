import{_ as U,N as V,u as P,Z as R,o as f,c as Y,w as n,a as o,b as t,g as u,t as l,C as G,e as g,i as H,F as z,r as a}from"./app.9bacd1a0.js";import{_ as K,r as J}from"./AppLayout.8b90d46b.js";import{T as X}from"./ToolTip.90a7442a.js";import{P as Z}from"./Pagination.7c6055c2.js";import{T as Q}from"./TdUserShow.11f3adc8.js";import{_ as W}from"./Modal.d266a93d.js";import{r as $}from"./TrashIcon.5ff165f8.js";import{r as ee}from"./PencilSquareIcon.1e81501b.js";import{r as te}from"./EyeIcon.6f597e55.js";import{r as oe}from"./Square2StackIcon.c70ac094.js";import{r as re}from"./MagnifyingGlassIcon.a62df564.js";import"./TopBarMenu.978fcd11.js";import"./CheckCircleIcon.14efd96d.js";import"./shepherd.esm.8b0b6bfa.js";import"./XMarkIcon.db621c27.js";import"./WarningToast.5000d5fb.js";import"./NavLink.7e4b7702.js";import"./PlusCircleIcon.7b47160e.js";import"./UserIcon.2090e4c3.js";import"./Bars3Icon.559bf817.js";const se={components:{AppLayout:K,ToolTip:X,TdUserShow:Q,TrashIcon:$,PencilSquareIcon:ee,Pagination:Z,EyeIcon:te,Square2StackIcon:oe,MagnifyingGlassIcon:re,EnvelopeIcon:J,NothingFound:V,ExportModal:W},props:{users:Object,filter_data:Object,departments:Object},data(){var e,s,i;return{loading:!1,options:[],options2:[],visible:!1,show_user:"",filter:{keyword:(e=this.filter_data.keyword)!=null?e:null,course:(s=this.filter_data.course)!=null?s:null,department:(i=this.filter_data.department)!=null?i:null},export_data:P({type:"Excel",course:"all"})}},created(){this.options2.push({value:"",label:"All"});for(const[e,s]of Object.entries(this.departments))this.options2.push({value:s.slug,label:s.name})},methods:{accountHold(e,s){let i=e.target.checked;this.$inertia.post(this.route("user.account.hold",s),{status:i},{preserveScroll:!0})},accountManual(e,s){let i=e.target.checked;this.$inertia.post(this.route("user.account.manual",s),{status:i},{preserveScroll:!0})},destroy(e){if(confirm("Are you sure ?"))this.$inertia.delete(this.route("users.destroy",e));else return!1},show(e){this.show_user=e,this.visible=!0},hide(e){this.visible=!1},filterData(){this.loading=!0,this.$inertia.get(this.route("teachers.index"),this.filter,{preserveScroll:!0,onSuccess:()=>{},onFinish:e=>{this.loading=!1}})},filterOption(e,s){return s.label.toLowerCase().indexOf(e.toLowerCase())>=0},sendMail(e){this.$inertia.post(this.route("teacher.send.mail"),{user:e})},exportSubmit(){this.loading=!0;let e={};this.filter.department!==""&&(e.departement=this.filter.department),R({url:this.route("all.teacher.export"),method:"POST",data:{...this.export_data,...e},headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},responseType:"blob"}).then(s=>{this.export_data.type;var i=window.URL.createObjectURL(new Blob([s.data])),p=document.createElement("a");p.href=i,p.setAttribute("download","allteacher-report.xlsx"),document.body.appendChild(p),p.click(),this.loading=!1,this.visible=!1}).catch(s=>{this.loading=!1,this.visible=!1})}}},ae={class:"mb-4"},ne={class:"md:col-span-3"},le={class:"relative w-full"},ie={type:"submit",class:"absolute top-0 right-0 p-2.5 text-sm font-medium text-white bg-blue-700 rounded-r-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},ce={class:"md:col-span-3"},de={class:"md:col-span-1"},ue={class:"py-4 px-5"},pe={class:"py-4 px-5"},he={class:"py-4 px-5"},_e={class:"py-4 px-5"},fe={class:"py-4 px-5"},me={width:"10%",class:"py-4 px-5"},be={scope:"row",class:"flex items-center py-4 px-5 text-gray-900 whitespace-nowrap dark:text-white"},ge={class:"py-4 px-5"},ye={class:"py-4 px-5"},ke={class:"py-4 px-5"},ve={class:"relative inline-flex items-center cursor-pointer"},we=["onChange","checked"],xe=t("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1),Se={class:"py-4 px-5"},Ce={class:"relative inline-flex items-center cursor-pointer"},Le=["onChange","checked"],Ie=t("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1),Me={class:"py-4 px-5"},Te={class:"flex gap-2"},Ae=["onClick"],Be={class:"inline-flex dark:text-gray-400 absolute z-10 -top-4 -right-2 justify-center items-center w-6 h-6 text-xs font-bold text-white bg-red-500 rounded-full border-2 border-white dark:border-gray-900"},Oe=["onClick","id"],Ee={key:1},Fe={colspan:"4",class:"text-center p-4"},je={class:"flex justify-center"};function Ne(e,s,i,p,c,d){const y=a("BreadcrumbLink"),k=a("Breadcrumb"),v=a("badge"),m=a("global-button"),w=a("page-header"),x=a("global-input"),S=a("MagnifyingGlassIcon"),C=a("a-select"),L=a("td-user-show"),I=a("EnvelopeIcon"),h=a("tool-tip"),M=a("Square2StackIcon"),b=a("Link"),T=a("eye-icon"),A=a("PencilSquareIcon"),B=a("trash-icon"),O=a("NothingFound"),E=a("global-table"),F=a("pagination"),j=a("a-button"),N=a("show-modal"),q=a("a-modal"),D=a("AppLayout");return f(),Y(D,{title:e.__("Teacher List")},{default:n(()=>[o(k,null,{default:n(()=>[o(y,{title:e.__("Teacher List")},null,8,["title"])]),_:1}),t("div",null,[o(w,null,{content:n(()=>[o(m,{loading:!1,onClick:s[0]||(s[0]=r=>d.exportSubmit()),type:"button",theme:"sky"},{default:n(()=>[u(l(e.__("Export")),1)]),_:1}),o(m,{url:e.route("teachers.create"),type:"link",theme:"primary"},{default:n(()=>[u(l(e.__("Add Teachers")),1)]),_:1},8,["url"])]),default:n(()=>[u(l(e.__("All Teachers"))+" ",1),o(v,null,{default:n(()=>[u(l(i.users.total),1)]),_:1})]),_:1}),t("div",ae,[t("form",{class:"items-center grid grid-cols-1 md:grid-cols-7 md:gap-6 gap-1.5",onSubmit:s[3]||(s[3]=G(r=>d.filterData(),["prevent"]))},[t("div",ne,[t("div",le,[o(x,{type:"search",modelValue:c.filter.keyword,"onUpdate:modelValue":s[1]||(s[1]=r=>c.filter.keyword=r),class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Keyword")},null,8,["modelValue","placeholder"]),t("button",ie,[o(S,{class:"w-5 h-5"})])])]),t("div",ce,[o(C,{size:"large",class:"width-100",value:c.filter.department,"onUpdate:value":s[2]||(s[2]=r=>c.filter.department=r),"show-search":"",placeholder:e.__("Select a department"),options:c.options2,"filter-option":d.filterOption,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleChange},null,8,["value","placeholder","options","filter-option","onFocus","onBlur","onChange"])]),t("div",de,[o(m,{loading:c.loading,type:"submit",theme:"primary",class:"w-full"},{default:n(()=>[u(l(e.__("Search")),1)]),_:1},8,["loading"])])],32)]),o(E,null,{head:n(()=>[t("th",ue,l(e.__("Name")),1),t("th",pe,l(e.__("Department")),1),t("th",he,l(e.__("Joined at")),1),t("th",_e,l(e.__("Account Hold")),1),t("th",fe,l(e.__("Manual Attendance")),1),t("th",me,l(e.__("Action")),1)]),body:n(()=>[i.users.data.length>0?(f(!0),g(z,{key:0},H(i.users.data,r=>(f(),g("tr",{key:r.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[t("td",be,[o(L,{image:r.profile_photo_url,name:r.name,email:r.email},null,8,["image","name","email"])]),t("td",ge,l(r.department?r.department.name:"-"),1),t("td",ye,l(e.formatTime(r.created_at,"MMMM D, YYYY")),1),t("td",ke,[t("label",ve,[t("input",{onChange:_=>d.accountHold(_,r.id),checked:r.account_hold,type:"checkbox",class:"sr-only peer"},null,40,we),xe])]),t("td",Se,[t("label",Ce,[t("input",{onChange:_=>d.accountManual(_,r.id),checked:r.manual,type:"checkbox",class:"sr-only peer"},null,40,Le),Ie])]),t("td",Me,[t("div",Te,[t("button",{onClick:_=>d.sendMail(r.id),type:"button",class:"group relative"},[o(I,{class:"text-purple-400 hover:text-purple-300"}),o(h,{text:e.__("Send Mail")},null,8,["text"])],8,Ae),o(b,{"preserve-scroll":"",href:e.route("teacher.classes",r.id),class:"group relative cursor-pointer"},{default:n(()=>[o(M,{class:"w-6 h-6 text-purple-400 hover:text-purple-300"}),o(h,{text:e.__("Subjects")},null,8,["text"]),t("div",Be,l(r.subjects_count),1)]),_:2},1032,["href"]),o(b,{"preserve-scroll":"",href:e.route("teacher.show",r.id),class:"group relative"},{default:n(()=>[o(T,{class:"w-6 h-6 text-pink-400 hover:text-pink-300"}),o(h,{text:e.__("View")},null,8,["text"])]),_:2},1032,["href"]),o(b,{"preserve-scroll":"",href:e.route("teachers.edit",r.id),class:"group relative",id:"edit"+r.id},{default:n(()=>[o(A,{class:"text-blue-400 w-6 h-6 hover:text-blue-300"}),o(h,{text:e.__("Edit")},null,8,["text"])]),_:2},1032,["href","id"]),t("button",{type:"button",onClick:_=>d.destroy(r.id),class:"group relative",id:"delete"+r.id},[o(B,{class:"w-6 h-6 text-red-400 hover:text-red-300"}),o(h,{text:e.__("Delete")},null,8,["text"])],8,Oe)])])]))),128)):(f(),g("tr",Ee,[t("td",Fe,[o(O,{asShow:"div"})])]))]),_:1}),t("div",je,[o(F,{class:"mt-6",links:i.users.links},null,8,["links"])])]),o(q,{visible:c.visible,"onUpdate:visible":s[4]||(s[4]=r=>c.visible=r),title:c.show_user.name,onOk:d.hide},{footer:n(()=>[o(j,{key:"back",onClick:d.hide},{default:n(()=>[u(l(e.__("Close")),1)]),_:1},8,["onClick"])]),default:n(()=>[o(N,{user:c.show_user},null,8,["user"])]),_:1},8,["visible","title","onOk"])]),_:1},8,["title"])}const rt=U(se,[["render",Ne]]);export{rt as default};
