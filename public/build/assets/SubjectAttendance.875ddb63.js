import{_ as j}from"./AppLayout.f7869522.js";import{_ as k,N as w,I as c,u as M,X as S,o as V,c as A,w as u,a,b as o,t as f,C as L,g as Y,r as i}from"./app.eb4bca63.js";import{s as B}from"./multiselect.bd328a4e.js";/* empty css                                                         */import"./TopBarMenu.57ba7e85.js";import"./CheckCircleIcon.c15b336b.js";import"./shepherd.esm.28e46ee4.js";import"./XMarkIcon.c835eea2.js";import"./WarningToast.ca887990.js";import"./NavLink.88c501bd.js";import"./PlusCircleIcon.b3c660e0.js";import"./UserIcon.11494925.js";import"./Bars3Icon.9d3eeab9.js";const N={components:{AppLayout:j,Multiselect:B,NothingFound:w,dayjs:c},props:{courses:Array,subjects:Array,filter_data:Object},data(){var e,t,l,n;return{filter:M({course_id:(e=this.filter_data.course_id)!=null?e:"",subject_id:(t=this.filter_data.subject_id)!=null?t:"",month:(l=this.filter_data.month)!=null?l:"",year:(n=this.filter_data.year)!=null?n:""}),visible:!1,loading:!1,month_value:this.filter_data.month?c(c(this.filter_data.month).format("MMM")+this.filter_data.year,this.customMonthFormat):null,export_data:{course:"",subject:"",month:"",year:""}}},watch:{month_value:function(e){e?(this.filter.month=c(e).format("MM"),this.filter.year=c(e).format("YYYY")):(this.filter.month=null,this.filter.year=null)},"filter.course_id":function(e,t){e&&this.filterData()}},methods:{filterData(){this.filter.get(this.route("report.subject.attendance"))},exportSubmit(){this.loading=!0,this.export_data.course=this.filter.course_id,this.export_data.subject=this.filter.subject_id,this.export_data.month=this.filter.month,this.export_data.year=this.filter.year,S({url:this.route("report.subject.attendance.export"),method:"POST",data:this.export_data,responseType:"blob"}).then(e=>{var t=window.URL.createObjectURL(new Blob([e.data])),l=document.createElement("a");l.href=t;const n=e.headers["content-disposition"],r=n.indexOf('"')+1,h=n.lastIndexOf('"'),d=n.substring(r,h);l.setAttribute("download",d),document.body.appendChild(l),l.click(),l.remove(),this.loading=!1,this.visible=!1}).catch(e=>{this.loading=!1,this.visible=!1})},handleYearSelection(){const e=this.year.$y;this.filter.year=e}}},C={class:"py-12"},U={class:"mb-3 rounded-lg py-4 font-semibold text-left rtl:text-right text-gray-900 bg-white dark:text-white dark:bg-gray-800"},F={class:"dark:text-gray-400 mb-0 text-2xl"},O={class:"col-span-2"},R={class:"col-span-2"},D={class:"col-span-2"},I={class:"flex gap-3"},T={class:"col-span-2"},z={class:"text-center mt-52"},E=o("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[o("path",{"vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),H={class:"mt-2 text-sm font-medium text-gray-900"};function P(e,t,l,n,r,h){const d=i("BreadcrumbLink"),_=i("Breadcrumb"),b=i("page-header"),p=i("global-label"),m=i("Multiselect"),g=i("a-date-picker"),v=i("global-button"),x=i("NothingFound"),y=i("AppLayout");return V(),A(y,{title:e.__("Subject Attendance Report")},{default:u(()=>[a(_,null,{default:u(()=>[a(d,{href:e.route("reports.index"),title:"Report"},null,8,["href"]),a(d,{title:e.__("Subject Attendance List")},null,8,["title"])]),_:1}),o("div",C,[o("div",U,[a(b,{class:"flex justify-between items-center"},{default:u(()=>[o("div",null,[o("h1",F,f(e.__("Subject Attendance")),1)])]),_:1}),o("form",{class:"grid grid-cols-1 md:grid-cols-8 gap-2 items-center px-6",onSubmit:t[3]||(t[3]=L(s=>h.exportSubmit(),["prevent"]))},[o("div",O,[a(p,{for:"class",value:"Course"}),a(m,{id:"class",class:"dark:text-gray-900",modelValue:r.filter.course_id,"onUpdate:modelValue":t[0]||(t[0]=s=>r.filter.course_id=s),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:e.__("Select Course"),options:l.courses.map(s=>({value:s.id,label:s.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),o("div",R,[a(p,{for:"subject",value:"Subject"}),a(m,{id:"subject",class:"dark:text-gray-900",modelValue:r.filter.subject_id,"onUpdate:modelValue":t[1]||(t[1]=s=>r.filter.subject_id=s),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:e.__("Select Subjects"),options:l.subjects.map(s=>({value:s.id,label:s.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),o("div",D,[a(p,{for:"month",value:"Month"}),o("div",I,[a(g,{size:"large",placeholder:e.__("Select Month"),picker:"month",value:r.month_value,"onUpdate:value":t[2]||(t[2]=s=>r.month_value=s),format:"MMM YYYY",style:{width:"400px"}},null,8,["placeholder","value"])])]),o("div",T,[a(v,{loading:r.loading,class:"text-white mt-6 bg-blue-500 dark:bg-blue-500 hover:bg-blue-500 active:bg-blue-600 dark:active:bg-blue-600 focus:border-blue-600 dark:focus:border-blue-600 focus:ring focus:ring-blue-300 dark:focus:ring-blue-300"},{default:u(()=>[Y(f(e.__("Export")),1)]),_:1},8,["loading"])])],32)]),o("div",z,[E,o("h3",H,[a(x,{asShow:"div"})])])])]),_:1},8,["title"])}const ae=k(N,[["render",P]]);export{ae as default};
