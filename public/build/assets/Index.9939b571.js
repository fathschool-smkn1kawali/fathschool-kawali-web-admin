import{_ as P,r as O}from"./AppLayout.0e98d2d6.js";import{T as Z}from"./ToolTip.eb11e53b.js";import{T as H}from"./TdUserShow.8f951834.js";import{P as q}from"./Pagination.c2d460ea.js";import{o as c,e as u,b as t,_ as G,I as m,c as w,w as d,a as r,g as f,t as s,C as U,n as $,i as z,F as W,r as o,V as J,W as K}from"./app.30f46569.js";import{r as Q}from"./TrashIcon.528ba17f.js";import{r as X}from"./PencilSquareIcon.e1647e51.js";import{r as ee}from"./ExclamationCircleIcon.8879ecd4.js";import{r as te}from"./MagnifyingGlassIcon.4e247429.js";import{r as ae}from"./ArrowDownTrayIcon.60b413d8.js";import{r as re}from"./EyeIcon.c644849d.js";import"./TopBarMenu.3a03db1e.js";import"./CheckCircleIcon.ee8053f3.js";import"./shepherd.esm.89869ab1.js";import"./XMarkIcon.5ead3895.js";import"./WarningToast.58f45431.js";import"./NavLink.bac2c302.js";import"./PlusCircleIcon.1cbea38a.js";import"./UserIcon.70e37609.js";import"./Bars3Icon.7193af16.js";function se(e,n){return c(),u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"})])}const oe={components:{AppLayout:P,ToolTip:Z,TrashIcon:Q,PencilSquareIcon:X,Pagination:q,ExclamationCircleIcon:ee,MagnifyingGlassIcon:te,PrinterIcon:se,ArrowDownTrayIcon:ae,EnvelopeIcon:O,TdUserShow:H,EyeIcon:re},props:{invoices:Object,filter_data:Object,users:Object,all_invoices:Object},data(){var e,n,i,_,l;return{loading:!1,mail_sending:"",customDateFormat:"DD-MM-YYYY",date2:[this.filter_data.start_date?m(this.filter_data.start_date):null,this.filter_data.end_date?m(this.filter_data.end_date):null],filter:{keyword:(e=this.filter_data.keyword)!=null?e:"",start_date:(n=this.filter_data.start_date)!=null?n:"",end_date:(i=this.filter_data.end_date)!=null?i:"",recurring:(_=this.filter_data.recurring)!=null?_:""},tab:(l=this.filter_data.recurring)!=null?l:"all"}},watch:{date2:{deep:!0,handler(e,n){if(e!=null)if(this.date2[0]!=null&&this.date2[1]!=null){let i=m(this.date2[0]).format("YYYY-MM-DD"),_=m(this.date2[1]).format("YYYY-MM-DD");this.filter.start_date=i,this.filter.end_date=_}else this.filter.start_date="",this.filter.end_date="";else this.filter.start_date="",this.filter.end_date=""}}},methods:{destroy(e){if(confirm("Are you sure ?"))this.$inertia.delete(this.route("invoice.destroy",e));else return!1},filterData(){this.loading=!0,this.$inertia.get(this.route("invoice.index"),this.filter,{onFinish:e=>{this.loading=!1}})},sendInvoiceViaEmail(e){this.mail_sending=e,this.$inertia.get(route("invoice.send.email",e),{preserveScroll:!0},{onFinish:n=>{this.mail_sending=!1}})},setTabValue(e){var _,l;let n=(_=e.filter_column_data)!=null?_:"",i=(l=e.value)!=null?l:"";this.filter[n]=i},status(e,n){let i=e.target.checked;this.$inertia.post(this.route("invoice.recurring.status",n),{status:i},{preserveScroll:!0})}}},v=e=>(J("data-v-9d34e1a0"),e=e(),K(),e),ne={class:"pb-12"},ie={class:"flex items-center gap-2"},le={class:"text-[10px] sm:text-sm"},de={class:"group relative"},ce={class:"sm:mb-4 mb-1.5"},_e={class:"relative flex-grow"},ue={type:"submit",class:"absolute top-0 right-0 p-2.5 text-sm font-medium text-white bg-blue-700 rounded-r-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},pe={class:"flex-grow"},he={class:"flex-grow-0"},me={class:"col-span-2 bg-white dark:bg-gray-800 dark:text-gray-600 rounded-lg",id:"testInvoiceDataTable"},ge={class:"py-4 px-5 whitespace-nowrap"},fe={class:"py-4 px-5 whitespace-nowrap"},be={class:"py-4 px-5 whitespace-nowrap"},ye={class:"py-4 px-5 whitespace-nowrap"},we={class:"py-4 px-5 whitespace-nowrap"},ve={class:"py-4 px-5 whitespace-nowrap"},xe={class:"py-4 px-5 whitespace-nowrap flex justify-end"},ke={class:"py-4 px-5 text-gray-900 whitespace-nowrap dark:text-gray-400"},Ie={class:"font-semibold"},De={class:"text-white inline-flex bg-gray-400 dark:bg-gray-600 dark:text-gray-400 capitalize rounded px-2"},Ae={class:"py-4 px-5 text-gray-900 whitespace-nowrap dark:text-gray-400"},Te={class:"font-semibold"},Ve={class:"text-sm"},Ce={class:"py-4 px-5 text-gray-900 whitespace-nowrap dark:text-gray-400"},Se={class:"py-4 text-gray-900 whitespace-nowrap dark:text-gray-400"},Ee={class:"text-base font-semibold"},Me={class:"font-normal text-sm"},Ye={class:"py-4 px-5 text-gray-900 whitespace-nowrap dark:text-gray-400"},Le={key:0,class:"text-base font-semibold"},Be={class:"relative inline-flex items-center cursor-pointer"},je=["onChange","checked"],Re=v(()=>t("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1)),Fe={key:1},Ne={class:"py-4 px-5 text-gray-900 whitespace-nowrap dark:text-gray-400"},Pe={class:"py-4 px-5"},Oe={class:"flex gap-2 items-center justify-end"},Ze=["onClick","id"],He={key:0,class:"h-6 w-6"},qe=v(()=>t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z",opacity:".25"}),t("path",{d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z",class:"spinner_ajPY"})],-1)),Ge=[qe],Ue=["href"],$e=["onClick","id"],ze={key:1},We={colspan:"7",class:"text-center p-4"},Je={class:"flex justify-center mb-3"};function Ke(e,n,i,_,l,h){const x=o("BreadcrumbLink"),k=o("Breadcrumb"),I=o("badge"),D=o("ExclamationCircleIcon"),p=o("tool-tip"),b=o("global-button"),A=o("page-header"),T=o("global-input"),V=o("MagnifyingGlassIcon"),C=o("a-range-picker"),S=o("tab-filter"),E=o("td-user-show"),M=o("eye-icon"),y=o("Link"),Y=o("PencilSquareIcon"),L=o("envelope-icon"),B=o("ArrowDownTrayIcon"),j=o("trash-icon"),R=o("global-table"),F=o("pagination"),N=o("AppLayout");return c(),w(N,{title:e.__("Invoice List")},{default:d(()=>[r(k,null,{default:d(()=>[r(x,{title:e.__("Recurring Invoice")},null,8,["title"])]),_:1}),t("div",ne,[r(A,null,{content:d(()=>[r(b,{loading:!1,url:e.route("invoice.create"),type:"link",theme:"primary",id:"testInvoiceButton"},{default:d(()=>[f(s(e.__("Create Invoice")),1)]),_:1},8,["url"])]),default:d(()=>[t("div",ie,[t("span",le,s(e.__("Recurring Invoice")),1),r(I,null,{default:d(()=>[f(s(i.invoices.total),1)]),_:1}),t("div",de,[r(D,{class:"sm:w-6 sm:h-6 w-4 h-4 text-red-500 hover:text-red-400"}),r(p,{text:e.__("One time invoices can be found on the transaction page.")},null,8,["text"])])])]),_:1}),t("div",ce,[t("form",{class:"flex sm:flex-wrap sm:flex-row flex-col sm:gap-4 gap-1.5",onSubmit:n[2]||(n[2]=U(a=>h.filterData(),["prevent"]))},[t("div",_e,[r(T,{type:"search",modelValue:l.filter.keyword,"onUpdate:modelValue":n[0]||(n[0]=a=>l.filter.keyword=a),class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Invoice No or Recipient Email")},null,8,["modelValue","placeholder"]),t("button",ue,[r(V,{class:"w-5 h-5"})])]),t("div",pe,[r(C,{class:$([e.$page.props.errors.date?"border-custom":"","custom-input dark:bg-gray-700 dark:border-gray-700 dark:text-gray-400"]),name:"date","disabled-date":e.disabledDate,placeholder:[e.__("From Invoice Date"),e.__("End Invoice Date")],"disabled-time":e.disabledRangeTime,value:l.date2,"onUpdate:value":n[1]||(n[1]=a=>l.date2=a),format:l.customDateFormat},null,8,["class","disabled-date","placeholder","disabled-time","value","format"])]),t("div",he,[r(S,{onSetTabData:h.setTabValue,filterData:i.filter_data?i.filter_data.recurring:"",filter_column:"recurring",tab_data:[{title:"All",id:"all",value:"all"},{title:"Recurring",id:"recurring_status_true",value:"recurring_status_true"},{title:"Cancelled",id:"recurring_status_false",value:"recurring_status_false"}]},null,8,["onSetTabData","filterData"])]),t("div",null,[r(b,{loading:l.loading,type:"submit",class:"whitespace-nowrap",theme:"primary"},{default:d(()=>[f(s(e.__("Search")),1)]),_:1},8,["loading"])])],32)]),t("div",me,[r(R,null,{head:d(()=>[t("th",ge,s(e.__("Invoice No")),1),t("th",fe,s(e.__("Title"))+" ("+s(e.__("Create Date"))+")",1),t("th",be,s(e.__("Recipient Email")),1),t("th",ye,s(e.__("Total Amount"))+" ("+s(e.__("Due Date"))+")",1),t("th",we,s(e.__("Recurring")),1),t("th",ve,s(e.__("Next Recurring Date")),1),t("th",xe,s(e.__("Action")),1)]),body:d(()=>[i.invoices.data.length>0?(c(!0),u(W,{key:0},z(i.invoices.data,a=>(c(),u("tr",{key:a.id,class:"border-b dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"},[t("td",ke,[t("div",Ie," #"+s(a.invoice_no),1),t("div",De,s(a.recurring?"recurring":"one time"),1)]),t("td",Ae,[t("div",Te,s(a.title),1),t("div",Ve,s(a.invoice_date),1)]),t("td",Ce,[r(E,{image:a.user.profile_photo_url,name:a.user.name,email:a.user.email},null,8,["image","name","email"])]),t("td",Se,[t("div",Ee,s(e.convertAmount(e.conversionRate(a.currency,e.$page.props.default_currency,a.items_sum_amount))),1),t("div",Me,s(a.due_date_format),1)]),t("td",Ye,[a.recurring?(c(),u("div",Le,[t("label",Be,[t("input",{onChange:g=>h.status(g,a.id),checked:a.recurring_status,type:"checkbox",id:"hs-small-switch",class:"sr-only peer"},null,40,je),Re])])):(c(),u("div",Fe," - "))]),t("td",Ne,[t("div",null,s(a.next_recurring_date),1)]),t("td",Pe,[t("div",Oe,[r(y,{href:e.route("invoice.show",a.id),class:"group relative",id:"testInvoiceShow"+a.id},{default:d(()=>[r(M,{class:"text-yellow-400 w-6 h-6 hover:text-yellow-300"}),r(p,{text:e.__("Details")},null,8,["text"])]),_:2},1032,["href","id"]),r(y,{href:e.route("invoice.edit",a.id),class:"group relative",id:"testInvoiceEdit"+a.id},{default:d(()=>[r(Y,{class:"text-blue-400 hover:text-blue-300 h-6 w-6"}),r(p,{text:e.__("Edit")},null,8,["text"])]),_:2},1032,["href","id"]),t("button",{type:"button",onClick:g=>h.sendInvoiceViaEmail(a.id),class:"group relative",id:"testInvoiceSendEmail"+a.id},[l.mail_sending==a.id?(c(),u("div",He,Ge)):(c(),w(L,{key:1,class:"text-green-400 h-6 w-6 hover:text-green-300"})),r(p,{text:e.__("Send Via Email")},null,8,["text"])],8,Ze),t("a",{href:e.route("invoice.download",a.id),class:"group relative",target:"_blank"},[r(B,{class:"text-purple-400 hover:text-purple-300 w-6 h-6"}),r(p,{text:"Download"})],8,Ue),t("button",{type:"button",onClick:g=>h.destroy(a.id),class:"group relative",id:"testInvoiceDelete"+a.id},[r(j,{class:"w-6 h-6 text-red-400 hover:text-red-300"}),r(p,{text:e.__("Delete")},null,8,["text"])],8,$e)])])]))),128)):(c(),u("tr",ze,[t("td",We,s(e.__("Nothing Found")),1)]))]),_:1}),t("div",Je,[r(F,{class:"mt-6 mb-4",links:i.invoices.links},null,8,["links"])])])])]),_:1},8,["title"])}const bt=G(oe,[["render",Ke],["__scopeId","data-v-9d34e1a0"]]);export{bt as default};
