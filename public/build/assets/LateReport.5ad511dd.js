import{_ as A}from"./AppLayout.ae55cab5.js";import{_ as S,a7 as B,a8 as N,N as R,u as T,f as C,Z as h,o as p,c as F,w as n,g as m,t as r,a as i,b as t,C as M,s as u,a3 as f,e as _,i as D,F as E,r as l,V as I,W as V}from"./app.8123fe3b.js";import{_ as U}from"./Modal.a8b4c637.js";import"./TopBarMenu.831e8367.js";import"./CheckCircleIcon.1ab93f1e.js";import"./shepherd.esm.6ceab578.js";import"./XMarkIcon.842ecca4.js";import"./WarningToast.eff4882a.js";import"./NavLink.9e4c6fb6.js";import"./PlusCircleIcon.9cc6e4a0.js";import"./UserIcon.53552b9e.js";import"./Bars3Icon.d71deab9.js";const O={components:{AppLayout:A,Breadcrumb:B,BreadcrumbLink:N,NothingFound:R,ExportModal:U},props:{LateAttendances:{type:Array,required:!0}},data(){return{loading:!1,options:[],options2:[],export_options:[],visible:!1,export_visible:!1,show_user:"",export_data:T({type:"Excel",course:"all"}),filter:{name:"",month:""}}},setup(e){return{LateAttendances:C(e.LateAttendances)}},computed:{filteredAttendees(){return this.LateAttendances.filter(e=>{let o=!0,a=!0;return this.filter.name.trim()!==""&&(o=e.name.toLowerCase().includes(this.filter.name.trim().toLowerCase())),this.filter.month!==""&&(a=new Date(e.date).toISOString().slice(0,7)===this.filter.month),o&&a})}},methods:{filterData(){h.get(this.route("teacher.lateness.report"),{params:this.filter}).then(e=>{this.attendees=e.data}).catch(e=>{console.error(e)})},exportSubmit(){this.loading=!0,h({url:this.route("teacher.lateness.export"),method:"POST",data:this.filter,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},responseType:"blob"}).then(e=>{const o=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=o,a.setAttribute("download","teacher-lateness-report.xlsx"),document.body.appendChild(a),a.click(),this.loading=!1}).catch(e=>{this.loading=!1,console.error(e)})}}},j=e=>(I("data-v-0e4bd4c7"),e=e(),V(),e),q={class:"flex flex-col sm:flex-row gap-4"},K={class:"mb-4"},P={class:"flex items-center"},W={for:"month",class:"ml-4 mr-2"},X={type:"submit",class:"ml-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},Z={class:"py-4 px-5"},z={class:"py-4 px-5"},G={class:"py-4 px-5"},H={class:"py-4 px-5 text-gray-900 dark:text-white"},J={class:"py-4 px-5 text-gray-900 dark:text-white"},Q={class:"py-4 px-5 text-gray-900 dark:text-white"},Y={key:1},$={colspan:"3",class:"text-center p-4"},ee=j(()=>t("div",{class:"flex justify-center"},null,-1));function te(e,o,a,b,d,c){const g=l("BreadcrumbLink"),y=l("Breadcrumb"),x=l("global-button"),L=l("page-header"),v=l("NothingFound"),w=l("global-table"),k=l("AppLayout");return p(),F(k,{title:e.__("Teacher Lateness Report")},{header:n(()=>[m(r(e.__("Teacher Lateness Report")),1)]),default:n(()=>[i(y,null,{default:n(()=>[i(g,{title:e.__("Teacher Lateness Report"),href:e.route("teacher.lateness.report")},null,8,["title","href"])]),_:1}),t("div",null,[i(L,{class:"flex-col sm:flex-row"},{content:n(()=>[t("div",q,[i(x,{loading:d.loading,onClick:o[0]||(o[0]=s=>c.exportSubmit()),type:"button",theme:"sky"},{default:n(()=>[m(r(e.__("Export")),1)]),_:1},8,["loading"])])]),default:n(()=>[m(r(e.__("Teacher Lateness Report"))+" ",1)]),_:1}),t("div",K,[t("form",{onSubmit:o[3]||(o[3]=M((...s)=>c.filterData&&c.filterData(...s),["prevent"]))},[t("div",P,[u(t("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=s=>d.filter.name=s),id:"name",placeholder:"Name",class:"p-2 border rounded"},null,512),[[f,d.filter.name]]),t("label",W,r(e.__("Month"))+":",1),u(t("input",{type:"month","onUpdate:modelValue":o[2]||(o[2]=s=>d.filter.month=s),id:"month",class:"p-2 border rounded"},null,512),[[f,d.filter.month]]),t("button",X,r(e.__("Filter")),1)])],32)]),i(w,null,{head:n(()=>[t("th",Z,r(e.__("Name")),1),t("th",z,r(e.__("Time In")),1),t("th",G,r(e.__("Date")),1)]),body:n(()=>[c.filteredAttendees.length>0?(p(!0),_(E,{key:0},D(c.filteredAttendees,s=>(p(),_("tr",{key:s.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[t("td",H,r(s.name),1),t("td",J,r(s.time_in),1),t("td",Q,r(s.date),1)]))),128)):(p(),_("tr",Y,[t("td",$,[i(v,{asShow:"div"})])]))]),_:1}),ee])]),_:1},8,["title"])}const he=S(O,[["render",te],["__scopeId","data-v-0e4bd4c7"]]);export{he as default};
