import{_ as L}from"./AppLayout.8b90d46b.js";import B from"./Input.ea2f882e.js";import{S as R}from"./SettingLayout.692af325.js";import{_ as A,o as u,c as N,w as m,a as o,b as s,g as y,t as v,C as D,e as h,i as w,F as x,j as F,r as n}from"./app.9bacd1a0.js";import"./TopBarMenu.978fcd11.js";import"./CheckCircleIcon.14efd96d.js";import"./shepherd.esm.8b0b6bfa.js";import"./XMarkIcon.db621c27.js";import"./WarningToast.5000d5fb.js";import"./NavLink.7e4b7702.js";import"./PlusCircleIcon.7b47160e.js";import"./UserIcon.2090e4c3.js";import"./Bars3Icon.559bf817.js";import"./Cog6ToothIcon.7dba7ae7.js";const T={components:{AppLayout:L,XItem:B,SettingLayout:R},props:{permissions:Array,errors:Object},data(){return{loading:!1,root:null,groups:[],form:{role_permissions:[],name:"",description:""}}},methods:{onChange(e,r){e.checked=r,this.updateChildren(e,r),this.updateTree(),e.children&&e.children.forEach(l=>{if(l.children)l.children.forEach(i=>{if(r){var d=this.form.role_permissions.includes(i.name);d||this.form.role_permissions.push(i.name)}else{var p=this.form.role_permissions;p.forEach(function(f,_){i.name==f&&p.splice(_,1)}),this.form.role_permissions=p}});else if(r){var c=this.form.role_permissions.includes(l.name);c||this.form.role_permissions.push(l.name)}else{var t=this.form.role_permissions;t.forEach(function(i,d){l.name==i&&t.splice(d,1)}),this.form.role_permissions=t}})},updateChildren(e,r){!e.children||e.children.forEach(l=>{l.checked=r,this.updateChildren(l,r)})},updateTree(){(function e(r){!r.children||(r.children.forEach(e),r.checked=r.children.every(l=>l.checked))})(this.root)},getValue(e,r){if(r){var l=this.form.role_permissions.includes(e.name);l||this.form.role_permissions.push(e.name)}else{var c=this.form.role_permissions;c.forEach(function(t,i){e.name==t&&c.splice(i,1)}),this.form.role_permissions=c}},submit(){this.loading=!0,this.$inertia.post(route("roles.store"),this.form,{preserveScroll:!0,onSuccess:()=>{},onFinish:e=>{this.loading=!1}})}},created(){for(const[e,r]of Object.entries(this.permissions))this.groups.push({id:2,name:e,items:r});this.root={name:"Select All",checked:!1,children:this.groups.map(e=>({name:e.name,checked:!1,children:e.items.map(r=>({item:r,id:r.id,name:r.name,checked:!1}))}))}}},q={class:"pb-12"},O={class:"divide-y divide-gray-200 dark:divide-gray-600 overflow-hidden rounded-lg bg-white dark:bg-gray-800 shadow pb-6"},U={class:"py-6 px-4 sm:p-6 lg:pb-8"},I={class:"grid grid-cols-12 divide-y-0 divide-x dark:divide-gray-600 gap-8"},M={class:"col-span-12"},X={class:"w-full sm:p-4 md:p-0 md:mt-2 dark:bg-gray-700"},z={class:"lg:flex items-center justify-center w-full"},G={class:"focus:outline-none lg:w-4/12 mt-4 px-6 rounded-lg"},H={class:"flex justify-between justify-items-center"},J={class:"mb-2 focus:outline-none text-xl font-medium leading-5 text-gray-800 dark:text-white"},K={class:"lg:flex items-center justify-center w-full mt-1"},P={class:"focus:outline-none lg:w-4/12 bg-white dark:bg-gray-700 px-6 rounded-lg"},Q={class:"flex justify-between justify-items-center"},W=s("br",null,null,-1),Y={class:"w-full p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Z={class:"focus:outline-none w-full mt-2"},$={class:"lg:flex justify-center w-full px-4"};function ee(e,r,l,c,t,i){const d=n("BreadcrumbLink"),p=n("Breadcrumb"),f=n("global-button"),_=n("page-header"),k=n("global-label"),g=n("x-item"),V=n("global-input"),b=n("input-error"),j=n("global-textarea"),E=n("SettingLayout"),S=n("AppLayout");return u(),N(S,{title:e.__("Role Create")},{default:m(()=>[o(p,null,{default:m(()=>[o(d,{title:e.__("Settings")},null,8,["title"]),o(d,{title:e.__("Roles")},null,8,["title"]),o(d,{title:e.__("Role Create")},null,8,["title"])]),_:1}),s("div",q,[o(_,null,{content:m(()=>[o(f,{"preserve-scroll":"",url:e.route("roles.index"),type:"link",theme:"primary"},{default:m(()=>[y(v(e.__("All Roles")),1)]),_:1},8,["url"])]),default:m(()=>[y(v(e.__("Role Create"))+" ",1)]),_:1}),o(E,null,{default:m(()=>[s("div",O,[s("div",U,[s("div",I,[s("div",M,[s("form",{onSubmit:r[2]||(r[2]=D((...a)=>i.submit&&i.submit(...a),["prevent"])),class:"rounded-b-lg -mt-2 dark:bg-gray-800"},[s("div",X,[s("div",z,[s("div",G,[s("div",H,[o(k,{for:"name",value:"Name",required:!0}),s("p",J,[o(g,{item:t.root,onChange:i.onChange},null,8,["item","onChange"])])]),o(V,{type:"text",modelValue:t.form.name,"onUpdate:modelValue":r[0]||(r[0]=a=>t.form.name=a),id:"name",name:"name",class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Enter Role Name"),error:e.$page.props.errors.name},null,8,["modelValue","placeholder","error"]),o(b,{error:e.$page.props.errors.name},null,8,["error"])])]),s("div",K,[s("div",P,[s("div",Q,[o(k,{for:"description",value:"Description",required:!1})]),o(j,{type:"text",modelValue:t.form.description,"onUpdate:modelValue":r[1]||(r[1]=a=>t.form.description=a),id:"description",name:"description",class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Enter Role Description"),error:e.$page.props.errors.description},null,8,["modelValue","placeholder","error"]),o(b,{error:e.$page.props.errors.description},null,8,["error"])])]),W]),s("div",Y,[t.root?(u(!0),h(x,{key:0},w(t.root.children,a=>(u(),h("div",{class:"bg-gray-100 dark:bg-gray-700 rounded-lg p-5",key:a},[o(g,{item:a,onChange:i.onChange},null,8,["item","onChange"]),(u(!0),h(x,null,w(a.children,C=>(u(),h("div",{key:C,class:"ml-6 p-1"},[o(g,{item:C,onChildData:i.getValue,onChange:i.onChange},null,8,["item","onChildData","onChange"])]))),128))]))),128)):F("",!0)]),o(b,{error:e.$page.props.errors.role_permissions},null,8,["error"]),s("div",Z,[s("div",$,[o(f,{loading:t.loading,type:"submit",cssClass:"w-full mb-4",theme:"primary"},{default:m(()=>[y(v(e.__("Create")),1)]),_:1},8,["loading"])])])],32)])])])])]),_:1})])]),_:1},8,["title"])}const he=A(T,[["render",ee]]);export{he as default};
