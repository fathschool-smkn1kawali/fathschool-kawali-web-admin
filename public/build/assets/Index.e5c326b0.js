import{_ as J}from"./AppLayout.8b90d46b.js";import{P as W}from"./Pagination.7c6055c2.js";import Y from"./Form.295cbde8.js";import{T as Z}from"./ToolTip.90a7442a.js";import $ from"./Show.7f49f47f.js";import{_ as ee}from"./Modal.d266a93d.js";import{F as te}from"./FullCalendar.3803651b.js";import{T as oe}from"./TdUserShow.11f3adc8.js";import{_ as se,u as le,N as ne,o as u,e as _,a as s,w as i,b as t,g as h,t as r,C as re,F as g,i as w,c as ae,r as l,j as y,n as ie}from"./app.9bacd1a0.js";import{r as de}from"./PencilSquareIcon.1e81501b.js";import{r as ce}from"./TrashIcon.5ff165f8.js";import{r as ue}from"./MagnifyingGlassIcon.a62df564.js";import{r as pe}from"./EyeIcon.6f597e55.js";import{r as _e}from"./CheckIcon.286f3927.js";import{r as he}from"./XMarkIcon.db621c27.js";import"./TopBarMenu.978fcd11.js";import"./CheckCircleIcon.14efd96d.js";import"./shepherd.esm.8b0b6bfa.js";import"./WarningToast.5000d5fb.js";import"./NavLink.7e4b7702.js";import"./PlusCircleIcon.7b47160e.js";import"./UserIcon.2090e4c3.js";import"./Bars3Icon.559bf817.js";import"./main.b444e6f8.js";import"./main.c8c0d7a5.js";import"./main.b9621c54.js";const me={props:{leaves:Object,filter_data:Object,users:Object,leave_types:Object},data(){var e,n,d,f,a;return{loading:!1,options:[],causeModal:!1,filter:{keyword:(e=this.filter_data.keyword)!=null?e:"",status:(n=this.filter_data.status)!=null?n:null,role:(d=this.filter_data.role)!=null?d:null,leave_type:(f=this.filter_data.leave_type)!=null?f:null},searchQuery:(a=this.filter_data.keyword)!=null?a:"",leave:"",visible:!1,show_leave:"",reject:le({id:"",cause_description:""})}},created(){this.options.push({value:"",label:"All"});for(const[e,n]of Object.entries(this.leave_types))this.options.push({value:n.slug,label:n.name})},components:{AppLayout:J,Pagination:W,PencilSquareIcon:de,TrashIcon:ce,RejectModal:ee,MagnifyingGlassIcon:ue,EditForm:Y,EyeIcon:pe,CheckIcon:_e,XMarkIcon:he,TdUserShow:oe,ToolTip:Z,ShowModal:$,FullCalendar:te,NothingFound:ne},watch:{searchQuery(e){this.filter.keyword=e,this.filterData()}},methods:{filterData(){this.loading=!0,this.$inertia.get(this.route("leave-student.index"),this.filter,{preserveScroll:!0,onFinish:e=>{this.loading=!1}})},filterOption(e,n){return n.label.toLowerCase().indexOf(e.toLowerCase())>=0},statusChange(e,n){this.loading=!0,this.$inertia.post(this.route("leave.status.change",e),{status:n,cause:this.reject.cause_description},{preserveScroll:!0,onSuccess:d=>{this.closeModal()},onFinish:d=>{this.loading=!1}})},rejectStatus(e){this.reject.id=e,this.causeModal=!0},closeModal(){this.reject.cause_description="",this.reject.id="",this.causeModal=!1},destroy(e){if(confirm("Are you sure ?"))this.$inertia.delete(this.route("leave-student.destroy",e),{preserveScroll:!0});else return!1},edit(e){this.leave=e,this.$refs.editModal.showModal()},show(e){this.show_leave=e,this.visible=!0},hide(){this.visible=!1}}},ge={class:"pb-12 overflow-x-auto"},be={class:"dark:text-gray-400 flex items-center"},fe={class:"bg-blue-500 text-white rounded ml-2 px-1 text-xs py-0.5"},ye={class:"mb-4"},ve={class:"flex xl:col-span-2"},ke={class:"relative w-full"},we={type:"submit",class:"absolute top-1 right-0 p-2.5 text-sm font-medium text-white bg-blue-700 rounded-r-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},xe={class:"sr-only"},Ce={class:"xl:col-span-2"},je={class:"xl:col-span-1"},Se={class:"overflow-hidden"},Me={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Fe={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Ie={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Le={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Be={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Te={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Ve={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Ae={scope:"row",class:"flex items-center py-4 px-5 text-gray-900 whitespace-nowrap dark:text-white"},Ne={class:"py-4 px-5"},Oe={class:"py-4 px-5"},De={class:"inline-block mb-2 bg-blue-100 dark:bg-gray-700 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:text-gray-400"},Pe={key:0},Re={class:"py-4 px-5"},Ue={class:"inline-block mb-2 bg-blue-100 dark:bg-gray-700 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:text-gray-400"},Ee={class:"py-4 px-5 whitespace-nowrap"},qe={class:"mb-2"},ze={class:"py-4 px-5"},Qe={class:"py-4 px-5"},Ge={class:"flex gap-1 items-center"},Xe=["onClick","id"],He=["onClick","id"],Ke=["onClick","id"],Je=["onClick","id"],We=["onClick","id"],Ye={class:"flex justify-center"},Ze={class:"bg-white rounded-lg overflow-x-auto dark:bg-gray-800"},$e={class:"mb-1"};function et(e,n,d,f,a,c){const x=l("Head"),C=l("BreadcrumbLink"),j=l("Breadcrumb"),b=l("global-button"),S=l("page-header"),M=l("global-input"),F=l("MagnifyingGlassIcon"),v=l("a-select"),I=l("td-user-show"),L=l("CheckIcon"),m=l("tool-tip"),B=l("XMarkIcon"),T=l("PencilSquareIcon"),V=l("eye-icon"),A=l("trash-icon"),N=l("NothingFound"),O=l("global-table"),D=l("pagination"),P=l("full-calendar"),R=l("edit-form"),U=l("a-button"),E=l("show-modal"),q=l("a-modal"),z=l("global-label"),Q=l("global-textarea"),G=l("input-error"),X=l("reject-modal"),H=l("AppLayout");return u(),_(g,null,[s(x,{title:e.__("Student Leave List")},null,8,["title"]),s(H,null,{default:i(()=>[s(j,null,{default:i(()=>[s(C,{title:e.__("Student Leave")},null,8,["title"])]),_:1}),t("div",ge,[s(S,null,{content:i(()=>[s(b,{loading:!1,type:"link",url:e.route("student-leave-type.index"),theme:"primary",id:"testLeaveType"},{default:i(()=>[h(r(e.__("Leave Type")),1)]),_:1},8,["url"])]),default:i(()=>[t("div",be,[t("span",null,r(e.__("Student Leave List")),1),t("span",fe,r(d.leaves.total),1)])]),_:1}),t("div",null,[t("div",ye,[t("form",{class:"items-center grid grid-cols-1 xl:grid-cols-7 gap-6",onSubmit:n[3]||(n[3]=re(o=>c.filterData(),["prevent"]))},[t("div",ve,[t("div",ke,[s(M,{modelValue:a.searchQuery,"onUpdate:modelValue":n[0]||(n[0]=o=>a.searchQuery=o),type:"text",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Keyword")},null,8,["modelValue","placeholder"]),t("button",we,[s(F,{class:"w-5 h-5"}),t("span",xe,r(e.__("Search")),1)])])]),t("div",Ce,[s(v,{class:"width-100",size:"large",value:a.filter.leave_type,"onUpdate:value":n[1]||(n[1]=o=>a.filter.leave_type=o),"show-search":"",placeholder:e.__("Select a leave type"),options:a.options,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleChange},null,8,["value","placeholder","options","onFocus","onBlur","onChange"])]),t("div",je,[s(v,{class:"width-100",size:"large",value:a.filter.status,"onUpdate:value":n[2]||(n[2]=o=>a.filter.status=o),"show-search":"",placeholder:e.__("Select a status"),options:[{title:"All",id:"all",value:"all"},{title:"Pending",id:"pending",value:"pending"},{title:"Accepted",id:"accepted",value:"accepted"},{title:"Rejected",id:"rejected",value:"rejected"}],onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleChange},null,8,["value","placeholder","onFocus","onBlur","onChange"])]),t("div",null,[s(b,{loading:a.loading,type:"submit",theme:"primary",class:"whitespace-nowrap"},{default:i(()=>[h(r(e.__("Search")),1)]),_:1},8,["loading"])])],32)]),t("div",Se,[s(O,null,{head:i(()=>[t("th",Me,r(e.__("Name")),1),t("th",Fe,r(e.__("Course")),1),t("th",Ie,r(e.__("Role")),1),t("th",Le,r(e.__("Leave Type")),1),t("th",Be,r(e.__("Date")),1),t("th",Te,r(e.__("Status")),1),t("th",Ve,r(e.__("Action")),1)]),body:i(()=>[d.leaves.data.length>0?(u(!0),_(g,{key:0},w(d.leaves.data,o=>{var k;return u(),_("tr",{key:o.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[t("td",Ae,[s(I,{image:o.user.profile_photo_url,name:o.user.name,email:o.user.email},null,8,["image","name","email"])]),t("td",Ne,[(u(!0),_(g,null,w(o.user.courses,(p,K)=>(u(),_("div",{key:p.id,class:"font-bold ml-0.5"},[h(r(p.course?p.course.name:"")+" ",1),o.user.courses.length!=K+1?(u(),_(g,{key:0},[h(",")],64)):y("",!0)]))),128))]),t("td",Oe,[t("div",De,r(o.user.role),1),o.user.department&&o.user.role=="Teacher"?(u(),_("div",Pe,r(o.user.department.name),1)):y("",!0)]),t("td",Re,[t("div",Ue,r((k=o.type)==null?void 0:k.name),1)]),t("td",Ee,[t("div",qe,r(o.days),1),t("div",null,r(e.formatTime(o.start,""))+" - "+r(e.formatTime(o.end,"")),1)]),t("td",ze,[t("span",{class:ie([o.status=="pending"?"bg-purple-100 text-purple-800 dark:bg-purple-200 dark:text-purple-900 dark:opacity-60":o.status=="accepted"?"bg-green-100 text-green-800 dark:bg-green-200 dark:text-green-900 dark:opacity-60":o.status=="rejected"?"bg-red-100 text-red-800 dark:bg-red-200 dark:text-red-900 dark:opacity-60":"","capitalize text-xs font-semibold mr-2 px-2.5 py-0.5 rounded"])},r(o.status),3)]),t("td",Qe,[t("div",Ge,[o.status=="pending"?(u(),_(g,{key:0},[t("button",{type:"button",onClick:p=>c.statusChange(o.id,"accepted"),class:"group relative",id:"testAccept"+o.id},[s(L,{class:"text-green-500 w-6 h-6"}),s(m,{text:e.__("Accept")},null,8,["text"])],8,Xe),t("button",{type:"button",onClick:p=>c.rejectStatus(o.id),class:"group relative",id:"testReject"+o.id},[s(B,{class:"text-red-500 w-6 h-6"}),s(m,{text:e.__("Reject")},null,8,["text"])],8,He),t("button",{onClick:p=>c.edit(o),type:"button",class:"group relative",id:"testEdit"+o.id},[s(T,{class:"text-blue-400 hover:text-blue-300 w-6 h-6"}),s(m,{text:e.__("Edit")},null,8,["text"])],8,Ke)],64)):y("",!0),t("button",{onClick:p=>c.show(o),type:"button",class:"group relative",id:"testShow"+o.id},[s(V,{class:"w-6 h-6 text-pink-400 hover:text-pink-300"}),s(m,{text:e.__("View")},null,8,["text"])],8,Je),t("button",{type:"button",onClick:p=>c.destroy(o.id),class:"group relative",id:"testDelete"+o.id},[s(A,{class:"w-6 h-6 text-red-400 hover:text-red-300"}),s(m,{text:e.__("Delete")},null,8,["text"])],8,We)])])])}),128)):(u(),ae(N,{key:1,asShow:"tr",cssClass:"text-center"}))]),_:1}),t("div",Ye,[s(D,{class:"mt-6",links:d.leaves.links},null,8,["links"])])])])]),t("div",Ze,[s(P,{data:d.leaves.data},null,8,["data"])]),s(R,{ref:"editModal",users:d.users,leave:a.leave},null,8,["users","leave"]),s(q,{visible:a.visible,"onUpdate:visible":n[4]||(n[4]=o=>a.visible=o),title:a.show_leave&&a.show_leave.user.name,onOk:c.hide},{footer:i(()=>[s(U,{key:"back",onClick:c.hide},{default:i(()=>[h(r(e.__("Close")),1)]),_:1},8,["onClick"])]),default:i(()=>[s(E,{leave:a.show_leave},null,8,["leave"])]),_:1},8,["visible","title","onOk"]),s(X,{show:a.causeModal,onClose:c.closeModal},{title:i(()=>[h(r(e.__("Insert Reject Cause")),1)]),content:i(()=>[t("div",$e,[s(z,{for:"description",value:"Cause",required:!0}),s(Q,{placeholder:e.__("Description"),id:"name",error:e.$page.props.errors.cause,modelValue:a.reject.cause_description,"onUpdate:modelValue":n[5]||(n[5]=o=>a.reject.cause_description=o),class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400"},null,8,["placeholder","error","modelValue"]),s(G,{error:e.$page.props.errors.cause},null,8,["error"])])]),footer:i(()=>[s(b,{loading:!1,type:"button",onClick:n[6]||(n[6]=o=>c.closeModal()),class:"mr-2",theme:"outline-danger"},{default:i(()=>[h(r(e.__("Cancel")),1)]),_:1}),s(b,{loading:a.reject.processing,type:"button",onClick:n[7]||(n[7]=o=>c.statusChange(a.reject.id,"rejected"))},{default:i(()=>[h(r(e.__("Save")),1)]),_:1},8,["loading"])]),_:1},8,["show","onClose"])]),_:1})],64)}const Mt=se(me,[["render",et]]);export{Mt as default};
