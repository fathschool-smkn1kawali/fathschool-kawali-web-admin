import{_ as M}from"./AppLayout.f7869522.js";import{_ as N,N as R,u as m,o as _,c as x,w as n,a as s,b as a,g as p,t as o,e as b,C as F,j as k,i as P,F as j,s as v,V as w,r as d,n as T}from"./app.eb4bca63.js";import{P as O}from"./Pagination.141e6051.js";import{_ as q}from"./Modal.d8e7dcb9.js";import{s as I}from"./multiselect.bd328a4e.js";/* empty css                */import{r as z}from"./ArrowRightIcon.9bf26196.js";import"./TopBarMenu.57ba7e85.js";import"./CheckCircleIcon.c15b336b.js";import"./shepherd.esm.28e46ee4.js";import"./XMarkIcon.c835eea2.js";import"./WarningToast.ca887990.js";import"./NavLink.88c501bd.js";import"./PlusCircleIcon.b3c660e0.js";import"./UserIcon.11494925.js";import"./Bars3Icon.9d3eeab9.js";const G={components:{AppLayout:M,ArrowRightIcon:z,Pagination:O,ExportModal:q,Multiselect:I,NothingFound:R},props:{users:Array,filter_data:Object,transactions:Array},data(){var e,l,i,u,r;return{visible:!1,form:m({assignment:"",file:"",description:""}),filter:m({keyword:(e=this.filter_data.keyword)!=null?e:"",status:(l=this.filter_data.status)!=null?l:"",parent_id:(i=this.filter_data.parent_id)!=null?i:"",type:this.filter_data.type?this.filter_data.type:"all",amountType:this.filter_data.amountType?this.filter_data.amountType:"all",start_date:(u=this.filter_data.start_date)!=null?u:"",end_date:(r=this.filter_data.end_date)!=null?r:""}),loading:!1,export_data:m({type:"xlsx"})}},methods:{ucf(e){return e.charAt(0).toUpperCase()+e.slice(1)},setTabValue(e){var u,r;let l=(u=e.filter_column_data)!=null?u:"",i=(r=e.value)!=null?r:"";this.filter[l]=i,this.filterData()},filterData(){this.filter.get(this.route("report.transaction"))},showExportModal(){this.visible=!0},exportSubmit(){this.loading=!0,axios({url:this.route("report.transaction.export"),method:"POST",data:this.export_data,responseType:"blob"}).then(e=>{let l=this.export_data.type;var i=window.URL.createObjectURL(new Blob([e.data])),u=document.createElement("a");u.href=i,u.setAttribute("download","transactions-report."+l),document.body.appendChild(u),u.click(),this.loading=!1,this.visible=!1}).catch(e=>{this.loading=!1,this.visible=!1})}}},H={class:"py-12"},J={key:0,class:"mb-3 ml-0.5"},K={class:"2xl:col-span-2"},Q={class:"2xl:col-span-2 flex gap-2"},W={class:"2xl:col-span-2 flex sm:flex-nowrap flex-wrap items-center gap-2"},X={class:"py-5 px-5",width:"25%"},Y={class:"py-5 px-5"},Z={class:"py-5 px-5"},$={class:"py-5"},ee={class:"py-5"},te={class:"py-5"},ae={class:"py-5 px-5"},le={class:"py-5 px-5"},oe={key:0,class:"py-5 px-5"},re=a("br",null,null,-1),se={class:"py-5"},ie=a("br",null,null,-1),ne={class:"py-5"},de={class:"py-5"},ue={class:"flex justify-center mb-4"},pe={class:"flex gap-6"},ce={class:"w-full rounded-lg cursor-pointer flex items-center pl-4 border border-gray-200 dark:border-gray-700"},_e={for:"pdf",class:"w-full cursor-pointer rounded-lg flex items-center pl-4 border border-gray-200 dark:border-gray-700"};function fe(e,l,i,u,r,c){const g=d("BreadcrumbLink"),D=d("Breadcrumb"),f=d("global-button"),V=d("page-header"),A=d("global-input"),C=d("Multiselect"),y=d("tab-filter"),S=d("NothingFound"),E=d("global-table"),U=d("pagination"),h=d("global-label"),L=d("export-modal"),B=d("AppLayout");return _(),x(B,{title:e.__("Transactions Report")},{default:n(()=>[s(D,null,{default:n(()=>[s(g,{href:e.route("reports.index"),title:"Report"},null,8,["href"]),s(g,{title:e.__("Transactions")},null,8,["title"])]),_:1}),a("div",H,[s(V,null,{content:n(()=>[s(f,{onClick:l[0]||(l[0]=t=>c.showExportModal()),loading:!1,type:"button",class:"text-white bg-blue-500 dark:bg-blue-500 hover:bg-blue-500 active:bg-blue-600 dark:active:bg-blue-600 focus:border-blue-600 dark:focus:border-blue-600 focus:ring focus:ring-blue-300 dark:focus:ring-blue-300"},{default:n(()=>[p(o(e.__("Export")),1)]),_:1})]),default:n(()=>[p(o(e.__("Transactions Report"))+" ",1)]),_:1}),i.transactions.data.length>0?(_(),b("div",J,[a("form",{class:"grid grid-cols-1 2xl:grid-cols-6 gap-2 items-center",onSubmit:l[3]||(l[3]=F(t=>c.filterData(),["prevent"]))},[a("div",K,[s(A,{id:"search",modelValue:r.filter.keyword,"onUpdate:modelValue":l[1]||(l[1]=t=>r.filter.keyword=t),type:"search",class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Search: Transactions Title"),error:e.$page.props.errors.keyword},null,8,["modelValue","placeholder","error"])]),a("div",Q,[s(C,{id:"user","close-on-select":!0,"can-clear":!0,searchable:!0,modelValue:r.filter.parent_id,"onUpdate:modelValue":l[2]||(l[2]=t=>r.filter.parent_id=t),"create-option":!1,placeholder:e.__("Select User"),options:i.users.map(t=>({value:t.id,label:t.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),a("div",W,[s(y,{onSetTabData:c.setTabValue,filterData:i.filter_data?i.filter_data.status:"",filter_column:"status",tab_data:[{title:"All",id:"all",value:"all"},{title:"Paid",id:"paid",value:"paid"},{title:"Unpaid",id:"unpaid",value:"unpaid"}]},null,8,["onSetTabData","filterData"]),s(y,{onSetTabData:c.setTabValue,filterData:i.filter_data?i.filter_data.amountType:"",filter_column:"amountType",tab_data:[{title:"All",id:"all2",value:"all"},{title:"Income",id:"income",value:"income"},{title:"Expense",id:"expense",value:"expense"}]},null,8,["onSetTabData","filterData"]),s(f,{loading:r.filter.processing,type:"submit",class:"text-white whitespace-nowrap bg-blue-500 dark:bg-blue-500 hover:bg-blue-500 active:bg-blue-600 dark:active:bg-blue-600 focus:border-blue-600 dark:focus:border-blue-600 focus:ring focus:ring-blue-300 dark:focus:ring-blue-300"},{default:n(()=>[p(o(e.__("Search")),1)]),_:1},8,["loading"])])],32)])):k("",!0),s(E,null,{head:n(()=>[a("th",X,o(e.__("Title")),1),a("th",Y,o(e.__("User")),1),a("th",Z,o(e.__("Type")),1),a("th",$,o(e.__("Amount")),1),a("th",ee,o(e.__("Paid Amount")),1),a("th",te,o(e.__("Date")),1)]),body:n(()=>[i.transactions.data.length>0?(_(!0),b(j,{key:0},P(i.transactions.data,t=>(_(),b("tr",{key:t.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[a("td",ae,o(t.title),1),a("td",le,o(t.user.name),1),t&&t.type?(_(),b("td",oe,[a("span",null,o(t.type.name),1),p(),re,a("span",{class:T(["dark:opacity-60 text-xs font-bold mr-2 px-2.5 py-0.5 rounded mt-3",t.type.type=="income"?"bg-green-100 dark:bg-green-200 text-green-800 dark:text-green-800":"bg-yellow-100  dark:bg-yellow-200 text-yellow-800 dark:text-yellow-800"])},o(c.ucf(t.type.type)),3)])):k("",!0),a("td",se,[p(o(e.convertAmount(t.amount))+" ",1),ie,a("span",{class:T(["text-xs font-bold mr-2 px-2.5 py-0.5 rounded mt-3",t.status=="paid"?"bg-green-100 text-green-600 dark:opacity-60":"bg-blue-100 text-blue-600 dark:opacity-60"])},o(c.ucf(t.status)),3)]),a("td",ne,o(e.convertAmount(t.paid_amount)),1),a("td",de,o(t.date_time),1)]))),128)):(_(),x(S,{key:1,asShow:"tr"}))]),_:1}),a("div",ue,[s(U,{class:"mt-6",links:i.transactions.links},null,8,["links"])])]),s(L,{show:r.visible,onClose:e.closeModal},{title:n(()=>[p(o(e.__("Export Data")),1)]),content:n(()=>[a("div",pe,[a("div",ce,[v(a("input",{value:"xlsx",id:"excel","onUpdate:modelValue":l[4]||(l[4]=t=>r.export_data.type=t),type:"radio",name:"export_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:text-gray-400 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[w,r.export_data.type]]),s(h,{for:"excel",class:"py-3 ml-2 cursor-pointer w-full text-sm font-medium text-gray-900 dark:text-gray-300",value:"Excel",required:!1})]),a("label",_e,[v(a("input",{value:"pdf",id:"pdf","onUpdate:modelValue":l[5]||(l[5]=t=>r.export_data.type=t),type:"radio",name:"export_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[w,r.export_data.type]]),s(h,{for:"pdf",class:"py-3 ml-2 w-full text-sm font-medium cursor-pointer text-gray-900 dark:text-gray-300",value:"PDF",required:!1})])])]),footer:n(()=>[s(f,{onClick:l[6]||(l[6]=t=>c.exportSubmit()),loading:r.loading,type:"button",theme:"primary",class:"mr-2",id:"testExport"},{default:n(()=>[p(o(e.__("Export")),1)]),_:1},8,["loading"]),s(f,{loading:!1,onClick:l[7]||(l[7]=t=>r.visible=!1),type:"button",theme:"outline-danger"},{default:n(()=>[p(o(e.__("Cancel")),1)]),_:1})]),_:1},8,["show","onClose"])]),_:1},8,["title"])}const Ue=N(G,[["render",fe]]);export{Ue as default};
