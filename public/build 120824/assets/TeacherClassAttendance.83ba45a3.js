import{_ as A}from"./AppLayout.92e3dc20.js";import{_ as S,a7 as L,a8 as T,N as B,u as C,f as N,Z as j,o as h,c as D,w as r,g as _,t as s,a as l,b as t,C as F,s as u,a6 as f,e as m,i as M,F as E,r as n,V as I,W as V}from"./app.e9253fa3.js";import{_ as O}from"./Modal.c02b20ca.js";import"./TopBarMenu.2596137d.js";import"./CheckCircleIcon.0e5b0fb8.js";import"./shepherd.esm.74749cbe.js";import"./XMarkIcon.0053782e.js";import"./WarningToast.774e905f.js";import"./NavLink.0361e60b.js";import"./PlusCircleIcon.4f4dbd04.js";import"./UserIcon.2a40eb34.js";import"./Bars3Icon.f96b062a.js";const U={components:{AppLayout:A,Breadcrumb:L,BreadcrumbLink:T,NothingFound:B,ExportModal:O},props:{teacherAttendances:{type:Array,required:!0}},data(){return{loading:!1,options:[],options2:[],export_options:[],visible:!1,export_visible:!1,show_user:"",export_data:C({type:"Excel",course:"all"}),filter:{name:"",month:""}}},setup(e){return{teacherAttendances:N(e.teacherAttendances)}},computed:{filteredAttendance(){return this.teacherAttendances.filter(e=>{let o=!0,d=!0;return this.filter.name.trim()!==""&&(o=e.user.name.toLowerCase().includes(this.filter.name.trim().toLowerCase())),this.filter.month!==""&&(d=new Date(e.date).toISOString().slice(0,7)===this.filter.month),o&&d})}},methods:{filterData(){this.teacherAttendances=this.filteredAttendance},exportSubmit(){this.loading=!0;let e={};this.filter.name.trim()!==""&&(e.name=this.filter.name.trim()),this.filter.month!==""&&(e.month=this.filter.month),j({url:this.route("teacherclass.export"),method:"POST",data:{...this.export_data,...e},headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},responseType:"blob"}).then(o=>{this.export_data.type;var d=window.URL.createObjectURL(new Blob([o.data])),i=document.createElement("a");i.href=d,i.setAttribute("download","teacherclass-report.xlsx"),document.body.appendChild(i),i.click(),this.loading=!1,this.visible=!1}).catch(o=>{this.loading=!1,this.visible=!1})}}},R=e=>(I("data-v-0a727245"),e=e(),V(),e),q={class:"flex flex-col sm:flex-row gap-4"},K={class:"mb-4"},P={class:"flex items-center"},W={for:"month",class:"ml-4 mr-2"},X={type:"submit",class:"ml-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},Z={class:"py-4 px-5"},z={class:"py-4 px-5"},G={class:"py-4 px-5"},H={class:"py-4 px-5"},J={class:"py-4 px-5"},Q={class:"py-4 px-5"},Y={class:"py-4 px-5 text-gray-900 dark:text-white"},$={class:"py-4 px-5 text-gray-900 dark:text-white"},ee={class:"py-4 px-5 text-gray-900 dark:text-white"},te={class:"py-4 px-5 text-gray-900 dark:text-white"},se={class:"py-4 px-5 text-gray-900 dark:text-white"},oe={class:"py-4 px-5 text-gray-900 dark:text-white"},ae={key:1},re={colspan:"6",class:"text-center p-4"},ne=R(()=>t("div",{class:"flex justify-center"},null,-1));function ie(e,o,d,i,p,c){const b=n("BreadcrumbLink"),y=n("Breadcrumb"),x=n("global-button"),g=n("page-header"),v=n("NothingFound"),w=n("global-table"),k=n("AppLayout");return h(),D(k,{title:e.__("Teacher Subject Attendance")},{header:r(()=>[_(s(e.__("Teacher Subject Attendance")),1)]),default:r(()=>[l(y,null,{default:r(()=>[l(b,{title:e.__("Teacher Subject Attendance"),href:e.route("teacher.attendance")},null,8,["title","href"])]),_:1}),t("div",null,[l(g,{class:"flex-col sm:flex-row"},{content:r(()=>[t("div",q,[l(x,{loading:!1,onClick:o[0]||(o[0]=a=>c.exportSubmit()),type:"button",theme:"sky"},{default:r(()=>[_(s(e.__("Export")),1)]),_:1})])]),default:r(()=>[_(s(e.__("Teacher Subject Attendance"))+" ",1)]),_:1}),t("div",K,[t("form",{onSubmit:o[3]||(o[3]=F((...a)=>c.filterData&&c.filterData(...a),["prevent"]))},[t("div",P,[u(t("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=a=>p.filter.name=a),id:"name",placeholder:"Name",class:"p-2 border rounded"},null,512),[[f,p.filter.name]]),t("label",W,s(e.__("Month"))+":",1),u(t("input",{type:"month","onUpdate:modelValue":o[2]||(o[2]=a=>p.filter.month=a),id:"month",class:"p-2 border rounded"},null,512),[[f,p.filter.month]]),t("button",X,s(e.__("Filter")),1)])],32)]),l(w,null,{head:r(()=>[t("th",Z,s(e.__("Name")),1),t("th",z,s(e.__("Class")),1),t("th",G,s(e.__("Subject")),1),t("th",H,s(e.__("Date")),1),t("th",J,s(e.__("Time In")),1),t("th",Q,s(e.__("Time Out")),1)]),body:r(()=>[c.filteredAttendance.length>0?(h(!0),m(E,{key:0},M(c.filteredAttendance,a=>(h(),m("tr",{key:a.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[t("td",Y,s(a.user.name),1),t("td",$,s(a.class_name),1),t("td",ee,s(a.subject_name),1),t("td",te,s(a.date),1),t("td",se,s(a.time_in),1),t("td",oe,s(a.time_out),1)]))),128)):(h(),m("tr",ae,[t("td",re,[l(v,{asShow:"div"})])]))]),_:1}),ne])]),_:1},8,["title"])}const ge=S(U,[["render",ie],["__scopeId","data-v-0a727245"]]);export{ge as default};
