import{_ as D,x as he,y as R,z as T,q as pe,A as ve,C as fe,W as me,G as Ee,H as Se,I as ye,J as De,K,b as E,L as V,M as C,O as we,P as U,Q as x,T as Te,U as Y,X as $,Y as w,Z as J,$ as _,a0 as ee,a1 as I,a2 as Me,u as be,a3 as te,a4 as Q,a5 as Re,a6 as Ie,a7 as Pe,w as y,a8 as ne,a9 as W,aa as j,ab as Ce,ac as Le,ad as re,ae as He,af as Ae,ag as je,ah as Ye,ai as Xe,aj as Ne,ak as Ve,al as Ue}from"./main.5fb2822c.js";/*!
FullCalendar v5.11.5
Docs & License: https://fullcalendar.io/
(c) 2022 Adam Shaw
*/W.touchMouseIgnoreWait=500;var X=0,P=0,N=!1,O=function(){function i(n){var t=this;this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=function(e){if(!t.shouldIgnoreMouse()&&xe(e)&&t.tryStart(e)){var r=t.createEventFromMouse(e,!0);t.emitter.trigger("pointerdown",r),t.initScrollWatch(r),t.shouldIgnoreMove||document.addEventListener("mousemove",t.handleMouseMove),document.addEventListener("mouseup",t.handleMouseUp)}},this.handleMouseMove=function(e){var r=t.createEventFromMouse(e);t.recordCoords(r),t.emitter.trigger("pointermove",r)},this.handleMouseUp=function(e){document.removeEventListener("mousemove",t.handleMouseMove),document.removeEventListener("mouseup",t.handleMouseUp),t.emitter.trigger("pointerup",t.createEventFromMouse(e)),t.cleanup()},this.handleTouchStart=function(e){if(t.tryStart(e)){t.isTouchDragging=!0;var r=t.createEventFromTouch(e,!0);t.emitter.trigger("pointerdown",r),t.initScrollWatch(r);var a=e.target;t.shouldIgnoreMove||a.addEventListener("touchmove",t.handleTouchMove),a.addEventListener("touchend",t.handleTouchEnd),a.addEventListener("touchcancel",t.handleTouchEnd),window.addEventListener("scroll",t.handleTouchScroll,!0)}},this.handleTouchMove=function(e){var r=t.createEventFromTouch(e);t.recordCoords(r),t.emitter.trigger("pointermove",r)},this.handleTouchEnd=function(e){if(t.isDragging){var r=e.target;r.removeEventListener("touchmove",t.handleTouchMove),r.removeEventListener("touchend",t.handleTouchEnd),r.removeEventListener("touchcancel",t.handleTouchEnd),window.removeEventListener("scroll",t.handleTouchScroll,!0),t.emitter.trigger("pointerup",t.createEventFromTouch(e)),t.cleanup(),t.isTouchDragging=!1,We()}},this.handleTouchScroll=function(){t.wasTouchScroll=!0},this.handleScroll=function(e){if(!t.shouldIgnoreMove){var r=window.pageXOffset-t.prevScrollX+t.prevPageX,a=window.pageYOffset-t.prevScrollY+t.prevPageY;t.emitter.trigger("pointermove",{origEvent:e,isTouch:t.isTouchDragging,subjectEl:t.subjectEl,pageX:r,pageY:a,deltaX:r-t.origPageX,deltaY:a-t.origPageY})}},this.containerEl=n,this.emitter=new ne,n.addEventListener("mousedown",this.handleMouseDown),n.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),Oe()}return i.prototype.destroy=function(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),qe()},i.prototype.tryStart=function(n){var t=this.querySubjectEl(n),e=n.target;return t&&(!this.handleSelector||T(e,this.handleSelector))?(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1},i.prototype.cleanup=function(){N=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()},i.prototype.querySubjectEl=function(n){return this.selector?T(n.target,this.selector):this.containerEl},i.prototype.shouldIgnoreMouse=function(){return X||this.isTouchDragging},i.prototype.cancelTouchScroll=function(){this.isDragging&&(N=!0)},i.prototype.initScrollWatch=function(n){this.shouldWatchScroll&&(this.recordCoords(n),window.addEventListener("scroll",this.handleScroll,!0))},i.prototype.recordCoords=function(n){this.shouldWatchScroll&&(this.prevPageX=n.pageX,this.prevPageY=n.pageY,this.prevScrollX=window.pageXOffset,this.prevScrollY=window.pageYOffset)},i.prototype.destroyScrollWatch=function(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)},i.prototype.createEventFromMouse=function(n,t){var e=0,r=0;return t?(this.origPageX=n.pageX,this.origPageY=n.pageY):(e=n.pageX-this.origPageX,r=n.pageY-this.origPageY),{origEvent:n,isTouch:!1,subjectEl:this.subjectEl,pageX:n.pageX,pageY:n.pageY,deltaX:e,deltaY:r}},i.prototype.createEventFromTouch=function(n,t){var e=n.touches,r,a,s=0,c=0;return e&&e.length?(r=e[0].pageX,a=e[0].pageY):(r=n.pageX,a=n.pageY),t?(this.origPageX=r,this.origPageY=a):(s=r-this.origPageX,c=a-this.origPageY),{origEvent:n,isTouch:!0,subjectEl:this.subjectEl,pageX:r,pageY:a,deltaX:s,deltaY:c}},i}();function xe(i){return i.button===0&&!i.ctrlKey}function We(){X+=1,setTimeout(function(){X-=1},W.touchMouseIgnoreWait)}function Oe(){P+=1,P===1&&window.addEventListener("touchmove",ie,{passive:!1})}function qe(){P-=1,P||window.removeEventListener("touchmove",ie,{passive:!1})}function ie(i){N&&i.preventDefault()}var ze=function(){function i(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}return i.prototype.start=function(n,t,e){this.sourceEl=n,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.pageXOffset,this.origScreenY=e-window.pageYOffset,this.deltaX=0,this.deltaY=0,this.updateElPosition()},i.prototype.handleMove=function(n,t){this.deltaX=n-window.pageXOffset-this.origScreenX,this.deltaY=t-window.pageYOffset-this.origScreenY,this.updateElPosition()},i.prototype.setIsVisible=function(n){n?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=n,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=n)},i.prototype.stop=function(n,t){var e=this,r=function(){e.cleanup(),t()};n&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(r,this.revertDuration):setTimeout(r,0)},i.prototype.doRevertAnimation=function(n,t){var e=this.mirrorEl,r=this.sourceEl.getBoundingClientRect();e.style.transition="top "+t+"ms,left "+t+"ms",j(e,{left:r.left,top:r.top}),Ce(e,function(){e.style.transition="",n()})},i.prototype.cleanup=function(){this.mirrorEl&&(Le(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null},i.prototype.updateElPosition=function(){this.sourceEl&&this.isVisible&&j(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})},i.prototype.getMirrorEl=function(){var n=this.sourceElRect,t=this.mirrorEl;return t||(t=this.mirrorEl=this.sourceEl.cloneNode(!0),t.classList.add("fc-unselectable"),t.classList.add("fc-event-dragging"),j(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:n.right-n.left,height:n.bottom-n.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t},i}(),oe=function(i){D(n,i);function n(t,e){var r=i.call(this)||this;return r.handleScroll=function(){r.scrollTop=r.scrollController.getScrollTop(),r.scrollLeft=r.scrollController.getScrollLeft(),r.handleScrollChange()},r.scrollController=t,r.doesListening=e,r.scrollTop=r.origScrollTop=t.getScrollTop(),r.scrollLeft=r.origScrollLeft=t.getScrollLeft(),r.scrollWidth=t.getScrollWidth(),r.scrollHeight=t.getScrollHeight(),r.clientWidth=t.getClientWidth(),r.clientHeight=t.getClientHeight(),r.clientRect=r.computeClientRect(),r.doesListening&&r.getEventTarget().addEventListener("scroll",r.handleScroll),r}return n.prototype.destroy=function(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)},n.prototype.getScrollTop=function(){return this.scrollTop},n.prototype.getScrollLeft=function(){return this.scrollLeft},n.prototype.setScrollTop=function(t){this.scrollController.setScrollTop(t),this.doesListening||(this.scrollTop=Math.max(Math.min(t,this.getMaxScrollTop()),0),this.handleScrollChange())},n.prototype.setScrollLeft=function(t){this.scrollController.setScrollLeft(t),this.doesListening||(this.scrollLeft=Math.max(Math.min(t,this.getMaxScrollLeft()),0),this.handleScrollChange())},n.prototype.getClientWidth=function(){return this.clientWidth},n.prototype.getClientHeight=function(){return this.clientHeight},n.prototype.getScrollWidth=function(){return this.scrollWidth},n.prototype.getScrollHeight=function(){return this.scrollHeight},n.prototype.handleScrollChange=function(){},n}(ve),ae=function(i){D(n,i);function n(t,e){return i.call(this,new fe(t),e)||this}return n.prototype.getEventTarget=function(){return this.scrollController.el},n.prototype.computeClientRect=function(){return he(this.scrollController.el)},n}(oe),Ge=function(i){D(n,i);function n(t){return i.call(this,new me,t)||this}return n.prototype.getEventTarget=function(){return window},n.prototype.computeClientRect=function(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}},n.prototype.handleScrollChange=function(){this.clientRect=this.computeClientRect()},n}(oe),Z=typeof performance=="function"?performance.now:Date.now,Fe=function(){function i(){var n=this;this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=function(){if(n.isAnimating){var t=n.computeBestEdge(n.pointerScreenX+window.pageXOffset,n.pointerScreenY+window.pageYOffset);if(t){var e=Z();n.handleSide(t,(e-n.msSinceRequest)/1e3),n.requestAnimation(e)}else n.isAnimating=!1}}}return i.prototype.start=function(n,t,e){this.isEnabled&&(this.scrollCaches=this.buildCaches(e),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(n,t))},i.prototype.handleMove=function(n,t){if(this.isEnabled){var e=n-window.pageXOffset,r=t-window.pageYOffset,a=this.pointerScreenY===null?0:r-this.pointerScreenY,s=this.pointerScreenX===null?0:e-this.pointerScreenX;a<0?this.everMovedUp=!0:a>0&&(this.everMovedDown=!0),s<0?this.everMovedLeft=!0:s>0&&(this.everMovedRight=!0),this.pointerScreenX=e,this.pointerScreenY=r,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(Z()))}},i.prototype.stop=function(){if(this.isEnabled){this.isAnimating=!1;for(var n=0,t=this.scrollCaches;n<t.length;n++){var e=t[n];e.destroy()}this.scrollCaches=null}},i.prototype.requestAnimation=function(n){this.msSinceRequest=n,requestAnimationFrame(this.animate)},i.prototype.handleSide=function(n,t){var e=n.scrollCache,r=this.edgeThreshold,a=r-n.distance,s=a*a/(r*r)*this.maxVelocity*t,c=1;switch(n.name){case"left":c=-1;case"right":e.setScrollLeft(e.getScrollLeft()+s*c);break;case"top":c=-1;case"bottom":e.setScrollTop(e.getScrollTop()+s*c);break}},i.prototype.computeBestEdge=function(n,t){for(var e=this.edgeThreshold,r=null,a=this.scrollCaches||[],s=0,c=a;s<c.length;s++){var o=c[s],l=o.clientRect,u=n-l.left,g=l.right-n,d=t-l.top,h=l.bottom-t;u>=0&&g>=0&&d>=0&&h>=0&&(d<=e&&this.everMovedUp&&o.canScrollUp()&&(!r||r.distance>d)&&(r={scrollCache:o,name:"top",distance:d}),h<=e&&this.everMovedDown&&o.canScrollDown()&&(!r||r.distance>h)&&(r={scrollCache:o,name:"bottom",distance:h}),u<=e&&this.everMovedLeft&&o.canScrollLeft()&&(!r||r.distance>u)&&(r={scrollCache:o,name:"left",distance:u}),g<=e&&this.everMovedRight&&o.canScrollRight()&&(!r||r.distance>g)&&(r={scrollCache:o,name:"right",distance:g}))}return r},i.prototype.buildCaches=function(n){return this.queryScrollEls(n).map(function(t){return t===window?new Ge(!1):new ae(t,!1)})},i.prototype.queryScrollEls=function(n){for(var t=[],e=0,r=this.scrollQuery;e<r.length;e++){var a=r[e];typeof a=="object"?t.push(a):t.push.apply(t,Array.prototype.slice.call(ee(n).querySelectorAll(a)))}return t},i}(),b=function(i){D(n,i);function n(t,e){var r=i.call(this,t)||this;r.containerEl=t,r.delay=null,r.minDistance=0,r.touchScrollAllowed=!0,r.mirrorNeedsRevert=!1,r.isInteracting=!1,r.isDragging=!1,r.isDelayEnded=!1,r.isDistanceSurpassed=!1,r.delayTimeoutId=null,r.onPointerDown=function(s){r.isDragging||(r.isInteracting=!0,r.isDelayEnded=!1,r.isDistanceSurpassed=!1,Ee(document.body),Se(document.body),s.isTouch||s.origEvent.preventDefault(),r.emitter.trigger("pointerdown",s),r.isInteracting&&!r.pointer.shouldIgnoreMove&&(r.mirror.setIsVisible(!1),r.mirror.start(s.subjectEl,s.pageX,s.pageY),r.startDelay(s),r.minDistance||r.handleDistanceSurpassed(s)))},r.onPointerMove=function(s){if(r.isInteracting){if(r.emitter.trigger("pointermove",s),!r.isDistanceSurpassed){var c=r.minDistance,o=void 0,l=s.deltaX,u=s.deltaY;o=l*l+u*u,o>=c*c&&r.handleDistanceSurpassed(s)}r.isDragging&&(s.origEvent.type!=="scroll"&&(r.mirror.handleMove(s.pageX,s.pageY),r.autoScroller.handleMove(s.pageX,s.pageY)),r.emitter.trigger("dragmove",s))}},r.onPointerUp=function(s){r.isInteracting&&(r.isInteracting=!1,ye(document.body),De(document.body),r.emitter.trigger("pointerup",s),r.isDragging&&(r.autoScroller.stop(),r.tryStopDrag(s)),r.delayTimeoutId&&(clearTimeout(r.delayTimeoutId),r.delayTimeoutId=null))};var a=r.pointer=new O(t);return a.emitter.on("pointerdown",r.onPointerDown),a.emitter.on("pointermove",r.onPointerMove),a.emitter.on("pointerup",r.onPointerUp),e&&(a.selector=e),r.mirror=new ze,r.autoScroller=new Fe,r}return n.prototype.destroy=function(){this.pointer.destroy(),this.onPointerUp({})},n.prototype.startDelay=function(t){var e=this;typeof this.delay=="number"?this.delayTimeoutId=setTimeout(function(){e.delayTimeoutId=null,e.handleDelayEnd(t)},this.delay):this.handleDelayEnd(t)},n.prototype.handleDelayEnd=function(t){this.isDelayEnded=!0,this.tryStartDrag(t)},n.prototype.handleDistanceSurpassed=function(t){this.isDistanceSurpassed=!0,this.tryStartDrag(t)},n.prototype.tryStartDrag=function(t){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(t.pageX,t.pageY,this.containerEl),this.emitter.trigger("dragstart",t),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())},n.prototype.tryStopDrag=function(t){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,t))},n.prototype.stopDrag=function(t){this.isDragging=!1,this.emitter.trigger("dragend",t)},n.prototype.setIgnoreMove=function(t){this.pointer.shouldIgnoreMove=t},n.prototype.setMirrorIsVisible=function(t){this.mirror.setIsVisible(t)},n.prototype.setMirrorNeedsRevert=function(t){this.mirrorNeedsRevert=t},n.prototype.setAutoScrollEnabled=function(t){this.autoScroller.isEnabled=t},n}(K),ke=function(){function i(n){this.origRect=re(n),this.scrollCaches=Ve(n).map(function(t){return new ae(t,!0)})}return i.prototype.destroy=function(){for(var n=0,t=this.scrollCaches;n<t.length;n++){var e=t[n];e.destroy()}},i.prototype.computeLeft=function(){for(var n=this.origRect.left,t=0,e=this.scrollCaches;t<e.length;t++){var r=e[t];n+=r.origScrollLeft-r.getScrollLeft()}return n},i.prototype.computeTop=function(){for(var n=this.origRect.top,t=0,e=this.scrollCaches;t<e.length;t++){var r=e[t];n+=r.origScrollTop-r.getScrollTop()}return n},i.prototype.isWithinClipping=function(n,t){for(var e={left:n,top:t},r=0,a=this.scrollCaches;r<a.length;r++){var s=a[r];if(!Be(s.getEventTarget())&&!Ue(e,s.clientRect))return!1}return!0},i}();function Be(i){var n=i.tagName;return n==="HTML"||n==="BODY"}var L=function(){function i(n,t){var e=this;this.useSubjectCenter=!1,this.requireInitial=!0,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=function(r){var a=e.dragging;e.initialHit=null,e.movingHit=null,e.finalHit=null,e.prepareHits(),e.processFirstCoord(r),e.initialHit||!e.requireInitial?(a.setIgnoreMove(!1),e.emitter.trigger("pointerdown",r)):a.setIgnoreMove(!0)},this.handleDragStart=function(r){e.emitter.trigger("dragstart",r),e.handleMove(r,!0)},this.handleDragMove=function(r){e.emitter.trigger("dragmove",r),e.handleMove(r)},this.handlePointerUp=function(r){e.releaseHits(),e.emitter.trigger("pointerup",r)},this.handleDragEnd=function(r){e.movingHit&&e.emitter.trigger("hitupdate",null,!0,r),e.finalHit=e.movingHit,e.movingHit=null,e.emitter.trigger("dragend",r)},this.droppableStore=t,n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragstart",this.handleDragStart),n.emitter.on("dragmove",this.handleDragMove),n.emitter.on("pointerup",this.handlePointerUp),n.emitter.on("dragend",this.handleDragEnd),this.dragging=n,this.emitter=new ne}return i.prototype.processFirstCoord=function(n){var t={left:n.pageX,top:n.pageY},e=t,r=n.subjectEl,a;r instanceof HTMLElement&&(a=re(r),e=He(e,a));var s=this.initialHit=this.queryHitForOffset(e.left,e.top);if(s){if(this.useSubjectCenter&&a){var c=Ae(a,s.rect);c&&(e=je(c))}this.coordAdjust=Ye(e,t)}else this.coordAdjust={left:0,top:0}},i.prototype.handleMove=function(n,t){var e=this.queryHitForOffset(n.pageX+this.coordAdjust.left,n.pageY+this.coordAdjust.top);(t||!H(this.movingHit,e))&&(this.movingHit=e,this.emitter.trigger("hitupdate",e,!1,n))},i.prototype.prepareHits=function(){this.offsetTrackers=Xe(this.droppableStore,function(n){return n.component.prepareHits(),new ke(n.el)})},i.prototype.releaseHits=function(){var n=this.offsetTrackers;for(var t in n)n[t].destroy();this.offsetTrackers={}},i.prototype.queryHitForOffset=function(n,t){var e=this,r=e.droppableStore,a=e.offsetTrackers,s=null;for(var c in r){var o=r[c].component,l=a[c];if(l&&l.isWithinClipping(n,t)){var u=l.computeLeft(),g=l.computeTop(),d=n-u,h=t-g,p=l.origRect,f=p.right-p.left,S=p.bottom-p.top;if(d>=0&&d<f&&h>=0&&h<S){var v=o.queryHit(d,h,f,S);v&&Ne(v.dateProfile.activeRange,v.dateSpan.range)&&(!s||v.layer>s.layer)&&(v.componentId=c,v.context=o.context,v.rect.left+=u,v.rect.right+=u,v.rect.top+=g,v.rect.bottom+=g,s=v)}}}return s},i}();function H(i,n){return!i&&!n?!0:Boolean(i)!==Boolean(n)?!1:Re(i.dateSpan,n.dateSpan)}function se(i,n){for(var t={},e=0,r=n.pluginHooks.datePointTransforms;e<r.length;e++){var a=r[e];E(t,a(i,n))}return E(t,Qe(i,n.dateEnv)),t}function Qe(i,n){return{date:n.toDate(i.range.start),dateStr:n.formatIso(i.range.start,{omitTime:i.allDay}),allDay:i.allDay}}var Ze=function(i){D(n,i);function n(t){var e=i.call(this,t)||this;e.handlePointerDown=function(a){var s=e.dragging,c=a.origEvent.target;s.setIgnoreMove(!e.component.isValidDateDownEl(c))},e.handleDragEnd=function(a){var s=e.component,c=e.dragging.pointer;if(!c.wasTouchScroll){var o=e.hitDragging,l=o.initialHit,u=o.finalHit;if(l&&u&&H(l,u)){var g=s.context,d=E(E({},se(l.dateSpan,g)),{dayEl:l.dayEl,jsEvent:a.origEvent,view:g.viewApi||g.calendarApi.view});g.emitter.trigger("dateClick",d)}}},e.dragging=new b(t.el),e.dragging.autoScroller.isEnabled=!1;var r=e.hitDragging=new L(e.dragging,V(t));return r.emitter.on("pointerdown",e.handlePointerDown),r.emitter.on("dragend",e.handleDragEnd),e}return n.prototype.destroy=function(){this.dragging.destroy()},n}(C),Ke=function(i){D(n,i);function n(t){var e=i.call(this,t)||this;e.dragSelection=null,e.handlePointerDown=function(o){var l=e,u=l.component,g=l.dragging,d=u.context.options,h=d.selectable&&u.isValidDateDownEl(o.origEvent.target);g.setIgnoreMove(!h),g.delay=o.isTouch?$e(u):null},e.handleDragStart=function(o){e.component.context.calendarApi.unselect(o)},e.handleHitUpdate=function(o,l){var u=e.component.context,g=null,d=!1;if(o){var h=e.hitDragging.initialHit,p=o.componentId===h.componentId&&e.isHitComboAllowed&&!e.isHitComboAllowed(h,o);p||(g=Je(h,o,u.pluginHooks.dateSelectionTransformers)),(!g||!we(g,o.dateProfile,u))&&(d=!0,g=null)}g?u.dispatch({type:"SELECT_DATES",selection:g}):l||u.dispatch({type:"UNSELECT_DATES"}),d?x():U(),l||(e.dragSelection=g)},e.handlePointerUp=function(o){e.dragSelection&&(Te(e.dragSelection,o,e.component.context),e.dragSelection=null)};var r=t.component,a=r.context.options,s=e.dragging=new b(t.el);s.touchScrollAllowed=!1,s.minDistance=a.selectMinDistance||0,s.autoScroller.isEnabled=a.dragScroll;var c=e.hitDragging=new L(e.dragging,V(t));return c.emitter.on("pointerdown",e.handlePointerDown),c.emitter.on("dragstart",e.handleDragStart),c.emitter.on("hitupdate",e.handleHitUpdate),c.emitter.on("pointerup",e.handlePointerUp),e}return n.prototype.destroy=function(){this.dragging.destroy()},n}(C);function $e(i){var n=i.context.options,t=n.selectLongPressDelay;return t==null&&(t=n.longPressDelay),t}function Je(i,n,t){var e=i.dateSpan,r=n.dateSpan,a=[e.range.start,e.range.end,r.range.start,r.range.end];a.sort(Ie);for(var s={},c=0,o=t;c<o.length;c++){var l=o[c],u=l(i,n);if(u===!1)return null;u&&E(s,u)}return s.range={start:a[0],end:a[3]},s.allDay=e.allDay,s}var le=function(i){D(n,i);function n(t){var e=i.call(this,t)||this;e.subjectEl=null,e.subjectSeg=null,e.isDragging=!1,e.eventRange=null,e.relevantEvents=null,e.receivingContext=null,e.validMutation=null,e.mutatedRelevantEvents=null,e.handlePointerDown=function(o){var l=o.origEvent.target,u=e,g=u.component,d=u.dragging,h=d.mirror,p=g.context.options,f=g.context;e.subjectEl=o.subjectEl;var S=e.subjectSeg=Y(o.subjectEl),v=e.eventRange=S.eventRange,m=v.instance.instanceId;e.relevantEvents=$(f.getCurrentData().eventStore,m),d.minDistance=o.isTouch?0:p.eventDragMinDistance,d.delay=o.isTouch&&m!==g.props.eventSelection?et(g):null,p.fixedMirrorParent?h.parentNode=p.fixedMirrorParent:h.parentNode=T(l,".fc"),h.revertDuration=p.dragRevertDuration;var M=g.isValidSegDownEl(l)&&!T(l,".fc-event-resizer");d.setIgnoreMove(!M),e.isDragging=M&&o.subjectEl.classList.contains("fc-event-draggable")},e.handleDragStart=function(o){var l=e.component.context,u=e.eventRange,g=u.instance.instanceId;o.isTouch?g!==e.component.props.eventSelection&&l.dispatch({type:"SELECT_EVENT",eventInstanceId:g}):l.dispatch({type:"UNSELECT_EVENT"}),e.isDragging&&(l.calendarApi.unselect(o),l.emitter.trigger("eventDragStart",{el:e.subjectEl,event:new w(l,u.def,u.instance),jsEvent:o.origEvent,view:l.viewApi}))},e.handleHitUpdate=function(o,l){if(!!e.isDragging){var u=e.relevantEvents,g=e.hitDragging.initialHit,d=e.component.context,h=null,p=null,f=null,S=!1,v={affectedEvents:u,mutatedEvents:R(),isEvent:!0};if(o){h=o.context;var m=h.options;d===h||m.editable&&m.droppable?(p=_e(g,o,h.getCurrentData().pluginHooks.eventDragMutationMassagers),p&&(f=J(u,h.getCurrentData().eventUiBases,p,h),v.mutatedEvents=f,_(v,o.dateProfile,h)||(S=!0,p=null,f=null,v.mutatedEvents=R()))):h=null}e.displayDrag(h,v),S?x():U(),l||(d===h&&H(g,o)&&(p=null),e.dragging.setMirrorNeedsRevert(!p),e.dragging.setMirrorIsVisible(!o||!ee(e.subjectEl).querySelector(".fc-event-mirror")),e.receivingContext=h,e.validMutation=p,e.mutatedRelevantEvents=f)}},e.handlePointerUp=function(){e.isDragging||e.cleanup()},e.handleDragEnd=function(o){if(e.isDragging){var l=e.component.context,u=l.viewApi,g=e,d=g.receivingContext,h=g.validMutation,p=e.eventRange.def,f=e.eventRange.instance,S=new w(l,p,f),v=e.relevantEvents,m=e.mutatedRelevantEvents,M=e.hitDragging.finalHit;if(e.clearDrag(),l.emitter.trigger("eventDragStop",{el:e.subjectEl,event:S,jsEvent:o.origEvent,view:u}),h){if(d===l){var ce=new w(l,m.defs[p.defId],f?m.instances[f.instanceId]:null);l.dispatch({type:"MERGE_EVENTS",eventStore:m});for(var q={oldEvent:S,event:ce,relatedEvents:I(m,l,f),revert:function(){l.dispatch({type:"MERGE_EVENTS",eventStore:v})}},z={},A=0,G=l.getCurrentData().pluginHooks.eventDropTransformers;A<G.length;A++){var ue=G[A];E(z,ue(h,l))}l.emitter.trigger("eventDrop",E(E(E({},q),z),{el:o.subjectEl,delta:h.datesDelta,jsEvent:o.origEvent,view:u})),l.emitter.trigger("eventChange",q)}else if(d){var F={event:S,relatedEvents:I(v,l,f),revert:function(){l.dispatch({type:"MERGE_EVENTS",eventStore:v})}};l.emitter.trigger("eventLeave",E(E({},F),{draggedEl:o.subjectEl,view:u})),l.dispatch({type:"REMOVE_EVENTS",eventStore:v}),l.emitter.trigger("eventRemove",F);var ge=m.defs[p.defId],k=m.instances[f.instanceId],de=new w(d,ge,k);d.dispatch({type:"MERGE_EVENTS",eventStore:m});var B={event:de,relatedEvents:I(m,d,k),revert:function(){d.dispatch({type:"REMOVE_EVENTS",eventStore:m})}};d.emitter.trigger("eventAdd",B),o.isTouch&&d.dispatch({type:"SELECT_EVENT",eventInstanceId:f.instanceId}),d.emitter.trigger("drop",E(E({},se(M.dateSpan,d)),{draggedEl:o.subjectEl,jsEvent:o.origEvent,view:M.context.viewApi})),d.emitter.trigger("eventReceive",E(E({},B),{draggedEl:o.subjectEl,view:M.context.viewApi}))}}else l.emitter.trigger("_noEventDrop")}e.cleanup()};var r=e.component,a=r.context.options,s=e.dragging=new b(t.el);s.pointer.selector=n.SELECTOR,s.touchScrollAllowed=!1,s.autoScroller.isEnabled=a.dragScroll;var c=e.hitDragging=new L(e.dragging,Me);return c.useSubjectCenter=t.useEventCenter,c.emitter.on("pointerdown",e.handlePointerDown),c.emitter.on("dragstart",e.handleDragStart),c.emitter.on("hitupdate",e.handleHitUpdate),c.emitter.on("pointerup",e.handlePointerUp),c.emitter.on("dragend",e.handleDragEnd),e}return n.prototype.destroy=function(){this.dragging.destroy()},n.prototype.displayDrag=function(t,e){var r=this.component.context,a=this.receivingContext;a&&a!==t&&(a===r?a.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:e.affectedEvents,mutatedEvents:R(),isEvent:!0}}):a.dispatch({type:"UNSET_EVENT_DRAG"})),t&&t.dispatch({type:"SET_EVENT_DRAG",state:e})},n.prototype.clearDrag=function(){var t=this.component.context,e=this.receivingContext;e&&e.dispatch({type:"UNSET_EVENT_DRAG"}),t!==e&&t.dispatch({type:"UNSET_EVENT_DRAG"})},n.prototype.cleanup=function(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null},n.SELECTOR=".fc-event-draggable, .fc-event-resizable",n}(C);function _e(i,n,t){var e=i.dateSpan,r=n.dateSpan,a=e.range.start,s=r.range.start,c={};e.allDay!==r.allDay&&(c.allDay=r.allDay,c.hasEnd=n.context.options.allDayMaintainDuration,r.allDay&&(a=be(a)));var o=te(a,s,i.context.dateEnv,i.componentId===n.componentId?i.largeUnit:null);o.milliseconds&&(c.allDay=!1);for(var l={datesDelta:o,standardProps:c},u=0,g=t;u<g.length;u++){var d=g[u];d(l,i,n)}return l}function et(i){var n=i.context.options,t=n.eventLongPressDelay;return t==null&&(t=n.longPressDelay),t}var tt=function(i){D(n,i);function n(t){var e=i.call(this,t)||this;e.draggingSegEl=null,e.draggingSeg=null,e.eventRange=null,e.relevantEvents=null,e.validMutation=null,e.mutatedRelevantEvents=null,e.handlePointerDown=function(c){var o=e.component,l=e.querySegEl(c),u=Y(l),g=e.eventRange=u.eventRange;e.dragging.minDistance=o.context.options.eventDragMinDistance,e.dragging.setIgnoreMove(!e.component.isValidSegDownEl(c.origEvent.target)||c.isTouch&&e.component.props.eventSelection!==g.instance.instanceId)},e.handleDragStart=function(c){var o=e.component.context,l=e.eventRange;e.relevantEvents=$(o.getCurrentData().eventStore,e.eventRange.instance.instanceId);var u=e.querySegEl(c);e.draggingSegEl=u,e.draggingSeg=Y(u),o.calendarApi.unselect(),o.emitter.trigger("eventResizeStart",{el:u,event:new w(o,l.def,l.instance),jsEvent:c.origEvent,view:o.viewApi})},e.handleHitUpdate=function(c,o,l){var u=e.component.context,g=e.relevantEvents,d=e.hitDragging.initialHit,h=e.eventRange.instance,p=null,f=null,S=!1,v={affectedEvents:g,mutatedEvents:R(),isEvent:!0};if(c){var m=c.componentId===d.componentId&&e.isHitComboAllowed&&!e.isHitComboAllowed(d,c);m||(p=nt(d,c,l.subjectEl.classList.contains("fc-event-resizer-start"),h.range))}p&&(f=J(g,u.getCurrentData().eventUiBases,p,u),v.mutatedEvents=f,_(v,c.dateProfile,u)||(S=!0,p=null,f=null,v.mutatedEvents=null)),f?u.dispatch({type:"SET_EVENT_RESIZE",state:v}):u.dispatch({type:"UNSET_EVENT_RESIZE"}),S?x():U(),o||(p&&H(d,c)&&(p=null),e.validMutation=p,e.mutatedRelevantEvents=f)},e.handleDragEnd=function(c){var o=e.component.context,l=e.eventRange.def,u=e.eventRange.instance,g=new w(o,l,u),d=e.relevantEvents,h=e.mutatedRelevantEvents;if(o.emitter.trigger("eventResizeStop",{el:e.draggingSegEl,event:g,jsEvent:c.origEvent,view:o.viewApi}),e.validMutation){var p=new w(o,h.defs[l.defId],u?h.instances[u.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:h});var f={oldEvent:g,event:p,relatedEvents:I(h,o,u),revert:function(){o.dispatch({type:"MERGE_EVENTS",eventStore:d})}};o.emitter.trigger("eventResize",E(E({},f),{el:e.draggingSegEl,startDelta:e.validMutation.startDelta||Q(0),endDelta:e.validMutation.endDelta||Q(0),jsEvent:c.origEvent,view:o.viewApi})),o.emitter.trigger("eventChange",f)}else o.emitter.trigger("_noEventResize");e.draggingSeg=null,e.relevantEvents=null,e.validMutation=null};var r=t.component,a=e.dragging=new b(t.el);a.pointer.selector=".fc-event-resizer",a.touchScrollAllowed=!1,a.autoScroller.isEnabled=r.context.options.dragScroll;var s=e.hitDragging=new L(e.dragging,V(t));return s.emitter.on("pointerdown",e.handlePointerDown),s.emitter.on("dragstart",e.handleDragStart),s.emitter.on("hitupdate",e.handleHitUpdate),s.emitter.on("dragend",e.handleDragEnd),e}return n.prototype.destroy=function(){this.dragging.destroy()},n.prototype.querySegEl=function(t){return T(t.subjectEl,".fc-event")},n}(C);function nt(i,n,t,e){var r=i.context.dateEnv,a=i.dateSpan.range.start,s=n.dateSpan.range.start,c=te(a,s,r,i.largeUnit);if(t){if(r.add(e.start,c)<e.end)return{startDelta:c}}else if(r.add(e.end,c)>e.start)return{endDelta:c};return null}var rt=function(){function i(n){var t=this;this.context=n,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=function(r){r.jsEvent&&(t.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=function(r){var a=t.context.options.unselectCancel,s=Pe(r.origEvent);t.matchesCancel=!!T(s,a),t.matchesEvent=!!T(s,le.SELECTOR)},this.onDocumentPointerUp=function(r){var a=t.context,s=t.documentPointer,c=a.getCurrentData();if(!s.wasTouchScroll){if(c.dateSelection&&!t.isRecentPointerDateSelect){var o=a.options.unselectAuto;o&&(!o||!t.matchesCancel)&&a.calendarApi.unselect(r)}c.eventSelection&&!t.matchesEvent&&a.dispatch({type:"UNSELECT_EVENT"})}t.isRecentPointerDateSelect=!1};var e=this.documentPointer=new O(document);e.shouldIgnoreMove=!0,e.shouldWatchScroll=!1,e.emitter.on("pointerdown",this.onDocumentPointerDown),e.emitter.on("pointerup",this.onDocumentPointerUp),n.emitter.on("select",this.onSelect)}return i.prototype.destroy=function(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()},i}(),it={fixedMirrorParent:y},ot={dateClick:y,eventDragStart:y,eventDragStop:y,eventDrop:y,eventResizeStart:y,eventResizeStop:y,eventResize:y,drop:y,eventReceive:y,eventLeave:y};W.dataAttrPrefix="";(function(i){D(n,i);function n(t){var e=i.call(this,t)||this;e.shouldIgnoreMove=!1,e.mirrorSelector="",e.currentMirrorEl=null,e.handlePointerDown=function(a){e.emitter.trigger("pointerdown",a),e.shouldIgnoreMove||e.emitter.trigger("dragstart",a)},e.handlePointerMove=function(a){e.shouldIgnoreMove||e.emitter.trigger("dragmove",a)},e.handlePointerUp=function(a){e.emitter.trigger("pointerup",a),e.shouldIgnoreMove||e.emitter.trigger("dragend",a)};var r=e.pointer=new O(t);return r.emitter.on("pointerdown",e.handlePointerDown),r.emitter.on("pointermove",e.handlePointerMove),r.emitter.on("pointerup",e.handlePointerUp),e}return n.prototype.destroy=function(){this.pointer.destroy()},n.prototype.setIgnoreMove=function(t){this.shouldIgnoreMove=t},n.prototype.setMirrorIsVisible=function(t){if(t)this.currentMirrorEl&&(this.currentMirrorEl.style.visibility="",this.currentMirrorEl=null);else{var e=this.mirrorSelector?document.querySelector(this.mirrorSelector):null;e&&(this.currentMirrorEl=e,e.style.visibility="hidden")}},n})(K);var st=pe({componentInteractions:[Ze,Ke,le,tt],calendarInteractions:[rt],elementDraggingImpl:b,optionRefiners:it,listenerRefiners:ot});export{st as m};
