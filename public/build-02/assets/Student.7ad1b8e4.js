import{_ as v,r as u,o as _,e as y,b as t,a as s,n as h,u as O,X as b,t as f,w as c,g,C as F,F as B}from"./app.a8c62306.js";const V={props:{departments:Object,user:Object},data(){return{options:[],options2:[],form:{department:this.user?this.user.department_id:""}}},created(){for(const[e,o]of Object.entries(this.departments))this.options.push({value:o.id,label:o.name});this.user||(this.form.department=null)},methods:{dataPush(e){this.$emit("child-form",this.form)},filterOption(e,o){return o.label.toLowerCase().indexOf(e.toLowerCase())>=0}}},S={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},j={class:"mb-3"};function D(e,o,m,w,r,n){const a=u("global-label"),d=u("a-select"),i=u("input-error");return _(),y("div",S,[t("div",j,[s(a,{for:"department",value:"Select Department",required:!0}),s(d,{class:h([e.$page.props.errors.department?"border-custom ":"","width-100"]),size:"large",value:r.form.department,"onUpdate:value":o[0]||(o[0]=p=>r.form.department=p),"show-search":"",placeholder:e.__("Select Department"),options:r.options,"filter-option":n.filterOption,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:n.dataPush},null,8,["class","value","placeholder","options","filter-option","onFocus","onBlur","onChange"]),s(i,{error:e.$page.props.errors.department},null,8,["error"])])])}const Y=v(V,[["render",D]]),U={props:{departments:Object,classes:Object,parents:Object,user:Object,plans:Object},inheritAttrs:!1,data(){return{visible:!1,options:[],options2:[],options3:[],form:{department:this.user?this.user.department_id:"",roll_no:this.user?this.user.profile.roll_no:"",class:this.user?this.user.profile.course_id:"",parent:this.user?this.user.profile.parent_id:"",session:this.user?this.user.profile.session:"",plan:this.user?this.user.profile.plan_id:""},createParent:O({name:"",email:"",password:"",password_confirmation:"",user_type:"Parent"}),errors:null}},created(){for(const[e,o]of Object.entries(this.classes))this.options.push({value:o.id,label:o.name});this.user||(this.form.class=null);for(const[e,o]of Object.entries(this.departments))this.options2.push({value:o.id,label:o.name});this.user||(this.form.department=null);for(const[e,o]of Object.entries(this.parents))this.options3.push({value:o.id,label:o.name});this.user||(this.form.parent=null)},methods:{studentDataPush(e){this.$emit("student-form",this.form)},filterOption(e,o){return o.label.toLowerCase().indexOf(e.toLowerCase())>=0},hide(){this.visible=!1},submit(){b.post(this.route("parent.store"),this.createParent).then(e=>{this.createParent.name="",this.createParent.email="",this.createParent.password="",this.createParent.password_confirmation="",this.$toast.open({message:"Parent Added Successful .",type:"success"}),this.fetchParent(),this.hide()}).catch(e=>{this.errors=e.response.data.errors,setTimeout(()=>{this.errors=null},5e3)})},fetchParent(){b.post(this.route("admin.parent.index")).then(e=>{if(e.data.data)for(const[o,m]of Object.entries(e.data.data))this.options3.push({value:m.id,label:m.name})}).catch(e=>{this.$toast.open({message:"Parent Fetch Failed .",type:"Error"})})}}},q={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},N={class:"mb-3"},E={class:"mb-3"},z={class:"mb-1"},A={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},K={class:"mb-3"},L={class:"mb-3"},T={class:"mb-1"},R={class:"w-full flex"},M={class:"dark:bg-gray-800 rounded-lg dark:text-gray-400"},X={class:"rounded-lg"},G={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},H={class:"mb-3"},I={class:"mb-3"},J={class:"mb-3"};function Q(e,o,m,w,r,n){const a=u("global-label"),d=u("global-input"),i=u("input-error"),p=u("a-select"),k=u("a-button"),P=u("global-button"),C=u("a-modal");return _(),y(B,null,[t("div",q,[t("div",N,[s(a,{for:"roll",value:e.__("Roll No"),required:!1},null,8,["value"]),s(d,{onKeyup:n.studentDataPush,type:"text",modelValue:r.form.roll_no,"onUpdate:modelValue":o[0]||(o[0]=l=>r.form.roll_no=l),id:"roll",name:"roll",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Enter Roll Number"),error:e.$page.props.errors.roll_no},null,8,["onKeyup","modelValue","placeholder","error"]),s(i,{error:e.$page.props.errors.roll_no},null,8,["error"])]),t("div",E,[s(a,{for:"session",value:e.__("Session"),required:!1},null,8,["value"]),s(d,{onKeyup:n.studentDataPush,type:"text",modelValue:r.form.session,"onUpdate:modelValue":o[1]||(o[1]=l=>r.form.session=l),id:"session",name:"session",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:"2021-2022",error:e.$page.props.errors.session},null,8,["onKeyup","modelValue","error"]),s(i,{error:e.$page.props.errors.session},null,8,["error"])]),t("div",z,[s(a,{for:"class",value:e.__("Select Course"),required:!0},null,8,["value"]),s(p,{class:h([e.$page.props.errors.class?"border-custom ":"","width-100"]),size:"large",value:r.form.class,"onUpdate:value":o[2]||(o[2]=l=>r.form.class=l),"show-search":"",placeholder:e.__("Select Course"),options:r.options,"filter-option":n.filterOption,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:n.studentDataPush},null,8,["class","value","placeholder","options","filter-option","onFocus","onBlur","onChange"]),s(i,{error:e.$page.props.errors.class},null,8,["error"])])]),t("div",A,[t("div",K,[s(a,{for:"department",value:e.__("Select Department"),required:!0},null,8,["value"]),s(p,{class:h([e.$page.props.errors.department?"border-custom ":"","width-100"]),size:"large",value:r.form.department,"onUpdate:value":o[3]||(o[3]=l=>r.form.department=l),"show-search":"",placeholder:e.__("Select Department"),options:r.options2,"filter-option":n.filterOption,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:n.studentDataPush},null,8,["class","value","placeholder","options","filter-option","onFocus","onBlur","onChange"]),s(i,{error:e.$page.props.errors.department},null,8,["error"])]),t("div",L,[s(a,{for:"plan",value:e.__("Select Plan"),required:!0},null,8,["value"]),s(p,{class:h([e.$page.props.errors.plan?"border-custom ":"","width-100"]),size:"large",value:r.form.plan,"onUpdate:value":o[4]||(o[4]=l=>r.form.plan=l),"show-search":"",placeholder:e.__("Select Plan"),options:m.plans.map(l=>({value:l.id,label:l.title})),"filter-option":n.filterOption,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:n.studentDataPush},null,8,["class","value","placeholder","options","filter-option","onFocus","onBlur","onChange"]),s(i,{error:e.$page.props.errors.plan},null,8,["error"])]),t("div",T,[s(a,{for:"parent",value:e.__("Select Parent"),required:!0},null,8,["value"]),s(p,{class:h([e.$page.props.errors.parent?"border-custom ":"","width-100"]),size:"large",value:r.form.parent,"onUpdate:value":o[5]||(o[5]=l=>r.form.parent=l),"show-search":"",placeholder:e.__("Select Parent"),options:r.options3,"filter-option":n.filterOption,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:n.studentDataPush},null,8,["class","value","placeholder","options","filter-option","onFocus","onBlur","onChange"]),t("div",R,[t("button",{onClick:o[6]||(o[6]=l=>r.visible=!0),type:"button",class:"focus:outline-none text-blue-500 hover:text-blue-400 ml-auto"},f(e.__("Add New Parent")),1)]),s(i,{error:e.$page.props.errors.parent},null,8,["error"])])]),s(C,{visible:r.visible,"onUpdate:visible":o[11]||(o[11]=l=>r.visible=l),title:e.__("Add Parent"),onOk:n.hide},{footer:c(()=>[s(k,{key:"back",onClick:n.hide},{default:c(()=>[g(f(e.__("Close")),1)]),_:1},8,["onClick"])]),default:c(()=>[t("div",M,[t("div",X,[t("form",{onSubmit:o[10]||(o[10]=F(l=>n.submit(),["prevent"]))},[t("div",G,[t("div",H,[s(a,{for:"name",value:e.__("Name"),required:!0},null,8,["value"]),s(d,{type:"text",modelValue:r.createParent.name,"onUpdate:modelValue":o[7]||(o[7]=l=>r.createParent.name=l),id:"name",name:"name",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Enter Name"),error:r.errors&&r.errors.name?r.errors.name[0]:""},null,8,["modelValue","placeholder","error"]),s(i,{error:r.errors&&r.errors.name?r.errors.name[0]:""},null,8,["error"])]),t("div",I,[s(a,{for:"email",value:e.__("Email"),required:!0},null,8,["value"]),s(d,{type:"email",modelValue:r.createParent.email,"onUpdate:modelValue":o[8]||(o[8]=l=>r.createParent.email=l),id:"email",name:"email",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Enter Email"),error:r.errors&&r.errors.email?r.errors.email[0]:""},null,8,["modelValue","placeholder","error"]),s(i,{error:r.errors&&r.errors.email?r.errors.email[0]:""},null,8,["error"])]),t("div",J,[s(a,{for:"password",value:e.__("Password"),required:!0},null,8,["value"]),s(d,{type:"password",modelValue:r.createParent.password,"onUpdate:modelValue":o[9]||(o[9]=l=>r.createParent.password=l),id:"password",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Password"),error:r.errors&&r.errors.password?r.errors.password[0]:""},null,8,["modelValue","placeholder","error"]),s(i,{error:r.errors&&r.errors.password?r.errors.password[0]:""},null,8,["error"])])]),s(P,{loading:r.createParent.processing,type:"submit",cssClass:"w-full mt-3",theme:"primary"},{default:c(()=>[g(f(e.__("Add")),1)]),_:1},8,["loading"])],32)])])]),_:1},8,["visible","title","onOk"])],64)}const Z=v(U,[["render",Q]]);export{Z as S,Y as T};
