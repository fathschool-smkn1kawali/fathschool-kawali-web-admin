import{_ as L}from"./AppLayout.30446c2a.js";import B from"./Input.1811e97d.js";import{S as A}from"./SettingLayout.2b603c34.js";import{_ as R,o as u,c as N,w as m,a as o,b as s,g as y,t as v,C as D,e as f,i as C,F as E,j as T,r as n}from"./app.a8c62306.js";import"./TopBarMenu.5a606a0f.js";import"./CheckCircleIcon.ced170f0.js";import"./shepherd.esm.fc881b59.js";import"./XMarkIcon.2b6555c7.js";import"./WarningToast.ec32bda2.js";import"./NavLink.c7845e12.js";import"./PlusCircleIcon.b89fcf0b.js";import"./UserIcon.8f94aca1.js";import"./Bars3Icon.047e873b.js";import"./Cog6ToothIcon.5b1a2e30.js";const U={components:{AppLayout:L,XItem:B,SettingLayout:A},props:{permissions:Array,role:Object,errors:Object},data(){return{loading:!1,root:null,groups:[],form:{role_permissions:[],name:this.role.name,description:this.role.description,_method:"PUT"}}},methods:{onChange(e,r){e.checked=r,this.updateChildren(e,r),this.updateTree(),e.children&&e.children.forEach(l=>{if(l.children)l.children.forEach(t=>{if(r){var d=this.form.role_permissions.includes(t.name);d||this.form.role_permissions.push(t.name)}else{var p=this.form.role_permissions;p.forEach(function(h,_){t.name==h&&p.splice(_,1)}),this.form.role_permissions=p}});else if(r){var c=this.form.role_permissions.includes(l.name);c||this.form.role_permissions.push(l.name)}else{var i=this.form.role_permissions;i.forEach(function(t,d){l.name==t&&i.splice(d,1)}),this.form.role_permissions=i}})},updateChildren(e,r){!e.children||e.children.forEach(l=>{l.checked=r,this.updateChildren(l,r)})},updateTree(){(function e(r){!r.children||(r.children.forEach(e),r.checked=r.children.every(l=>l.checked))})(this.root)},getValue(e,r){if(r){var l=this.form.role_permissions.includes(e.name);l||this.form.role_permissions.push(e.name)}else{var c=this.form.role_permissions;c.forEach(function(i,t){e.name==i&&c.splice(t,1)}),this.form.role_permissions=c}},submit(){this.loading=!0,this.$inertia.post(route("roles.update",this.role.id),this.form,{preserveScroll:!0,onSuccess:()=>{},onFinish:e=>{this.loading=!1}})}},created(){Array.from(this.role.permissions).forEach(e=>this.form.role_permissions.push(e.name));for(const[e,r]of Object.entries(this.permissions))this.groups.push({id:2,name:e,items:r});this.root={name:"Select All",checked:!1,children:this.groups.map(e=>({name:e.name,checked:!1,children:e.items.map(r=>({item:r,id:r.id,name:r.name,checked:!!this.form.role_permissions.includes(r.name)}))}))},this.updateTree()}},F={class:"pb-12"},O={class:"divide-y divide-gray-200 dark:divide-gray-600 overflow-hidden rounded-lg bg-white dark:bg-gray-800 shadow pb-6"},q={class:"py-6 px-4 sm:p-6 lg:pb-8"},I={class:"grid grid-cols-12 divide-y-0 divide-x dark:divide-gray-600 gap-8"},M={class:"col-span-12"},P={class:"w-full sm:p-4 md:p-0 dark:bg-gray-700"},X={class:"lg:flex items-center justify-center w-full"},z={class:"focus:outline-none mt-6 lg:w-4/12 bg-white dark:bg-gray-700 px-6 rounded-lg"},G={class:"flex justify-between justify-items-center"},H={class:"mb-2 focus:outline-none text-xl font-medium leading-5 text-gray-800 dark:text-white"},J={class:"lg:flex items-center justify-center w-full mt-1"},K={class:"focus:outline-none lg:w-4/12 bg-white dark:bg-gray-700 px-6 rounded-lg"},Q={class:"flex justify-between justify-items-center"},W=s("br",null,null,-1),Y={class:"w-full p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Z={class:"focus:outline-none w-full mt-2"},$={class:"lg:flex justify-center w-full px-4"};function ee(e,r,l,c,i,t){const d=n("BreadcrumbLink"),p=n("Breadcrumb"),h=n("global-button"),_=n("page-header"),k=n("global-label"),g=n("x-item"),x=n("global-input"),b=n("input-error"),V=n("global-textarea"),j=n("SettingLayout"),S=n("AppLayout");return u(),N(S,{title:e.__("Role Edit")},{default:m(()=>[o(p,null,{default:m(()=>[o(d,{title:e.__("Settings")},null,8,["title"]),o(d,{title:e.__("Roles")},null,8,["title"]),o(d,{title:e.__("Role Edit")},null,8,["title"])]),_:1}),s("div",F,[o(_,null,{content:m(()=>[o(h,{url:e.route("roles.index"),type:"link",theme:"primary"},{default:m(()=>[y(v(e.__("All Roles")),1)]),_:1},8,["url"])]),default:m(()=>[y(v(e.__("Role Edit"))+" ",1)]),_:1}),o(j,null,{default:m(()=>[s("div",O,[s("div",q,[s("div",I,[s("div",M,[s("form",{onSubmit:r[2]||(r[2]=D((...a)=>t.submit&&t.submit(...a),["prevent"])),class:"rounded-b-lg dark:bg-gray-800"},[s("div",P,[s("div",X,[s("div",z,[s("div",G,[o(k,{for:"name",value:"Name",required:!1}),s("p",H,[o(g,{item:i.root,onChange:t.onChange},null,8,["item","onChange"])])]),o(x,{type:"text",modelValue:i.form.name,"onUpdate:modelValue":r[0]||(r[0]=a=>i.form.name=a),id:"name",name:"name",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Enter Role Name"),error:e.$page.props.errors.name},null,8,["modelValue","placeholder","error"]),o(b,{error:e.$page.props.errors.name},null,8,["error"])])]),s("div",J,[s("div",K,[s("div",Q,[o(k,{for:"description",value:"Description",required:!1})]),o(V,{type:"text",modelValue:i.form.description,"onUpdate:modelValue":r[1]||(r[1]=a=>i.form.description=a),id:"description",name:"description",class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Enter Role Description"),error:e.$page.props.errors.description},null,8,["modelValue","placeholder","error"]),o(b,{error:e.$page.props.errors.description},null,8,["error"])])]),W]),s("div",Y,[i.root?(u(!0),f(E,{key:0},C(i.root.children,a=>(u(),f("div",{class:"bg-gray-100 dark:bg-gray-700 rounded-lg p-5",key:a},[o(g,{item:a,onChange:t.onChange},null,8,["item","onChange"]),(u(!0),f(E,null,C(a.children,w=>(u(),f("div",{key:w,class:"ml-6 p-1"},[o(g,{item:w,onChildData:t.getValue,onChange:t.onChange},null,8,["item","onChildData","onChange"])]))),128))]))),128)):T("",!0)]),o(b,{error:e.$page.props.errors.role_permissions},null,8,["error"]),s("div",Z,[s("div",$,[o(h,{loading:i.loading,type:"submit",cssClass:"w-full mb-4",theme:"primary"},{default:m(()=>[y(v(e.__("Update")),1)]),_:1},8,["loading"])])])],32)])])])])]),_:1})])]),_:1},8,["title"])}const fe=R(U,[["render",ee]]);export{fe as default};
